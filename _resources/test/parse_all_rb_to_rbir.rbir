s(:begin,
  s(:lvasgn, :files,
    s(:send,
      s(:const, nil, :Dir), :[],
      s(:str, "*.rb"))),
  s(:for,
    s(:lvasgn, :f),
    s(:lvar, :files),
    s(:begin,
      s(:lvasgn, :oldFile,
        s(:send,
          s(:send,
            s(:lvar, :f), :split,
            s(:str, ".")), :[],
          s(:int, 0))),
      s(:lvasgn, :newFile,
        s(:send,
          s(:lvar, :oldFile), :+,
          s(:str, ".rbir"))),
      s(:lvasgn, :rb_exec,
        s(:str, "ruby")),
      s(:lvasgn, :cmd,
        s(:send,
          s(:send,
            s(:send,
              s(:send,
                s(:lvar, :rb_exec), :+,
                s(:str, " file_to_rbir.rb ")), :+,
              s(:lvar, :f)), :+,
            s(:str, " > ")), :+,
          s(:lvar, :newFile))),
      s(:send, nil, :system,
        s(:lvar, :cmd)))))

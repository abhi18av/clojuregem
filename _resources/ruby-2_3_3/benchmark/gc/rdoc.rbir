s(:begin,
  s(:send, nil, :require,
    s(:str, "rdoc/rdoc")),
  s(:send, nil, :require,
    s(:str, "tmpdir")),
  s(:lvasgn, :srcdir,
    s(:send,
      s(:const, nil, :File), :expand_path,
      s(:str, "../.."),
      s(:send, nil, :__dir__))),
  s(:block,
    s(:send,
      s(:const, nil, :Dir), :mktmpdir,
      s(:str, "rdocbench-")),
    s(:args,
      s(:arg, :d)),
    s(:begin,
      s(:lvasgn, :dir,
        s(:send,
          s(:const, nil, :File), :join,
          s(:lvar, :d),
          s(:str, "rdocbench"))),
      s(:lvasgn, :args,
        s(:array,
          s(:str, "--root"),
          s(:dstr,
            s(:begin,
              s(:lvar, :srcdir))),
          s(:str, "--page-dir"),
          s(:dstr,
            s(:begin,
              s(:lvar, :srcdir)),
            s(:str, "/doc")),
          s(:str, "--encoding=UTF-8"),
          s(:str, "--no-force-update"),
          s(:str, "--all"),
          s(:str, "--ri"),
          s(:str, "--debug"),
          s(:str, "--quiet"),
          s(:dstr,
            s(:begin,
              s(:lvar, :srcdir))))),
      s(:send,
        s(:send,
          s(:lvar, :args), :<<,
          s(:str, "--op")), :<<,
        s(:lvar, :dir)),
      s(:lvasgn, :r,
        s(:send,
          s(:const,
            s(:const, nil, :RDoc), :RDoc), :new)),
      s(:send,
        s(:lvar, :r), :document,
        s(:lvar, :args)))))

s(:begin,
  s(:lvasgn, :max,
    s(:int, 30000000)),
  s(:class,
    s(:const, nil, :Ring), nil,
    s(:begin,
      s(:send, nil, :attr_reader,
        s(:sym, :next_ring)),
      s(:def, :initialize,
        s(:args,
          s(:optarg, :n,
            s(:nil))),
        s(:ivasgn, :@next_ring,
          s(:lvar, :n))),
      s(:def, :size,
        s(:args),
        s(:begin,
          s(:lvasgn, :s,
            s(:int, 1)),
          s(:lvasgn, :ring,
            s(:self)),
          s(:while,
            s(:send,
              s(:lvar, :ring), :next_ring),
            s(:begin,
              s(:op_asgn,
                s(:lvasgn, :s), :+,
                s(:int, 1)),
              s(:lvasgn, :ring,
                s(:send,
                  s(:lvar, :ring), :next_ring)))),
          s(:lvar, :s))))),
  s(:lvasgn, :ring,
    s(:send,
      s(:const, nil, :Ring), :new)),
  s(:block,
    s(:send,
      s(:lvar, :max), :times),
    s(:args),
    s(:lvasgn, :ring,
      s(:send,
        s(:const, nil, :Ring), :new,
        s(:lvar, :ring)))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "rss/rss")),
  s(:module,
    s(:const, nil, :RSS),
    s(:begin,
      s(:casgn, nil, :CONTENT_PREFIX,
        s(:str, "content")),
      s(:casgn, nil, :CONTENT_URI,
        s(:str, "http://purl.org/rss/1.0/modules/content/")),
      s(:module,
        s(:const, nil, :ContentModel),
        s(:begin,
          s(:send, nil, :extend,
            s(:const, nil, :BaseModel)),
          s(:casgn, nil, :ELEMENTS,
            s(:array,
              s(:dstr,
                s(:begin,
                  s(:const, nil, :CONTENT_PREFIX)),
                s(:str, "_encoded")))),
          s(:defs,
            s(:self), :append_features,
            s(:args,
              s(:arg, :klass)),
            s(:begin,
              s(:zsuper),
              s(:send,
                s(:lvar, :klass), :install_must_call_validator,
                s(:const, nil, :CONTENT_PREFIX),
                s(:const, nil, :CONTENT_URI)),
              s(:block,
                s(:send,
                  s(:const, nil, :ELEMENTS), :each),
                s(:args,
                  s(:arg, :full_name)),
                s(:begin,
                  s(:lvasgn, :name,
                    s(:send,
                      s(:lvar, :full_name), :[],
                      s(:irange,
                        s(:begin,
                          s(:send,
                            s(:send,
                              s(:const, nil, :CONTENT_PREFIX), :size), :+,
                            s(:int, 1))),
                        s(:int, -1)))),
                  s(:send,
                    s(:lvar, :klass), :install_text_element,
                    s(:lvar, :name),
                    s(:const, nil, :CONTENT_URI),
                    s(:str, "?"),
                    s(:lvar, :full_name)))))))),
      s(:lvasgn, :prefix_size,
        s(:send,
          s(:send,
            s(:const, nil, :CONTENT_PREFIX), :size), :+,
          s(:int, 1))),
      s(:block,
        s(:send,
          s(:const,
            s(:const, nil, :ContentModel), :ELEMENTS), :each),
        s(:args,
          s(:arg, :full_name)),
        s(:begin,
          s(:lvasgn, :name,
            s(:send,
              s(:lvar, :full_name), :[],
              s(:irange,
                s(:lvar, :prefix_size),
                s(:int, -1)))),
          s(:send,
            s(:const, nil, :BaseListener), :install_get_text_element,
            s(:const, nil, :CONTENT_URI),
            s(:lvar, :name),
            s(:lvar, :full_name)))))),
  s(:send, nil, :require,
    s(:str, "rss/content/1.0")),
  s(:send, nil, :require,
    s(:str, "rss/content/2.0")))

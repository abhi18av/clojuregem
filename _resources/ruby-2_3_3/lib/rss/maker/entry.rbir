s(:begin,
  s(:send, nil, :require,
    s(:str, "rss/maker/atom")),
  s(:send, nil, :require,
    s(:str, "rss/maker/feed")),
  s(:module,
    s(:const, nil, :RSS),
    s(:module,
      s(:const, nil, :Maker),
      s(:begin,
        s(:module,
          s(:const, nil, :Atom),
          s(:class,
            s(:const, nil, :Entry),
            s(:const, nil, :RSSBase),
            s(:begin,
              s(:def, :initialize,
                s(:args,
                  s(:optarg, :feed_version,
                    s(:str, "1.0"))),
                s(:begin,
                  s(:zsuper),
                  s(:ivasgn, :@feed_type,
                    s(:str, "atom")),
                  s(:ivasgn, :@feed_subtype,
                    s(:str, "entry")))),
              s(:send, nil, :private),
              s(:def, :make_feed,
                s(:args),
                s(:send,
                  s(:const,
                    s(:const,
                      s(:const,
                        s(:cbase), :RSS), :Atom), :Entry), :new,
                  s(:ivar, :@version),
                  s(:ivar, :@encoding),
                  s(:ivar, :@standalone))),
              s(:def, :setup_elements,
                s(:args,
                  s(:arg, :entry)),
                s(:send, nil, :setup_items,
                  s(:lvar, :entry))),
              s(:class,
                s(:const, nil, :Channel),
                s(:const, nil, :ChannelBase),
                s(:begin,
                  s(:class,
                    s(:const, nil, :SkipDays),
                    s(:const, nil, :SkipDaysBase),
                    s(:class,
                      s(:const, nil, :Day),
                      s(:const, nil, :DayBase), nil)),
                  s(:class,
                    s(:const, nil, :SkipHours),
                    s(:const, nil, :SkipHoursBase),
                    s(:class,
                      s(:const, nil, :Hour),
                      s(:const, nil, :HourBase), nil)),
                  s(:class,
                    s(:const, nil, :Cloud),
                    s(:const, nil, :CloudBase), nil),
                  s(:casgn, nil, :Categories,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Categories)),
                  s(:casgn, nil, :Links,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Links)),
                  s(:casgn, nil, :Authors,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Authors)),
                  s(:casgn, nil, :Contributors,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Contributors)),
                  s(:class,
                    s(:const, nil, :Generator),
                    s(:const, nil, :GeneratorBase),
                    s(:begin,
                      s(:send, nil, :include,
                        s(:const, nil, :AtomGenerator)),
                      s(:defs,
                        s(:self), :not_set_name,
                        s(:args),
                        s(:str, "maker.channel.generator")))),
                  s(:casgn, nil, :Copyright,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Copyright)),
                  s(:class,
                    s(:const, nil, :Description),
                    s(:const, nil, :DescriptionBase), nil),
                  s(:casgn, nil, :Title,
                    s(:const,
                      s(:const,
                        s(:const, nil, :Feed), :Channel), :Title)))),
              s(:class,
                s(:const, nil, :Image),
                s(:const, nil, :ImageBase), nil),
              s(:class,
                s(:const, nil, :Items),
                s(:const, nil, :ItemsBase),
                s(:begin,
                  s(:def, :to_feed,
                    s(:args,
                      s(:arg, :entry)),
                    s(:send,
                      s(:begin,
                        s(:or,
                          s(:send,
                            s(:send, nil, :normalize), :first),
                          s(:send,
                            s(:const, nil, :Item), :new,
                            s(:ivar, :@maker)))), :to_feed,
                      s(:lvar, :entry))),
                  s(:class,
                    s(:const, nil, :Item),
                    s(:const, nil, :ItemBase),
                    s(:begin,
                      s(:def, :to_feed,
                        s(:args,
                          s(:arg, :entry)),
                        s(:block,
                          s(:send, nil, :set_default_values),
                          s(:args),
                          s(:begin,
                            s(:send, nil, :setup_values,
                              s(:lvar, :entry)),
                            s(:send,
                              s(:send,
                                s(:lvar, :entry), :dc_dates), :clear),
                            s(:send, nil, :setup_other_elements,
                              s(:lvar, :entry)),
                            s(:if,
                              s(:send, nil, :have_required_values?), nil,
                              s(:send, nil, :raise,
                                s(:send,
                                  s(:const, nil, :NotSetError), :new,
                                  s(:str, "maker.item"),
                                  s(:send, nil, :not_set_required_variables))))))),
                      s(:send, nil, :private),
                      s(:def, :required_variable_names,
                        s(:args),
                        s(:array,
                          s(:str, "id"),
                          s(:str, "updated"))),
                      s(:def, :variables,
                        s(:args),
                        s(:send,
                          s(:zsuper), :+,
                          s(:array,
                            s(:str, "updated")))),
                      s(:def, :variable_is_set?,
                        s(:args),
                        s(:or,
                          s(:zsuper),
                          s(:send,
                            s(:send,
                              s(:send, nil, :authors), :empty?), :!))),
                      s(:def, :not_set_required_variables,
                        s(:args),
                        s(:block,
                          s(:send, nil, :set_default_values),
                          s(:args),
                          s(:begin,
                            s(:lvasgn, :vars,
                              s(:zsuper)),
                            s(:if,
                              s(:block,
                                s(:send,
                                  s(:send, nil, :authors), :all?),
                                s(:args,
                                  s(:arg, :author)),
                                s(:send,
                                  s(:send,
                                    s(:lvar, :author), :have_required_values?), :!)),
                              s(:send,
                                s(:lvar, :vars), :<<,
                                s(:str, "author")), nil),
                            s(:if,
                              s(:block,
                                s(:send, nil, :title),
                                s(:args,
                                  s(:arg, :t)),
                                s(:send,
                                  s(:lvar, :t), :have_required_values?)), nil,
                              s(:send,
                                s(:lvar, :vars), :<<,
                                s(:str, "title"))),
                            s(:lvar, :vars)))),
                      s(:def, :_set_default_values,
                        s(:args),
                        s(:ensure,
                          s(:begin,
                            s(:lvasgn, :keep,
                              s(:hash,
                                s(:pair,
                                  s(:sym, :authors),
                                  s(:send,
                                    s(:send,
                                      s(:send, nil, :authors), :to_a), :dup)),
                                s(:pair,
                                  s(:sym, :contributors),
                                  s(:send,
                                    s(:send,
                                      s(:send, nil, :contributors), :to_a), :dup)),
                                s(:pair,
                                  s(:sym, :categories),
                                  s(:send,
                                    s(:send,
                                      s(:send, nil, :categories), :to_a), :dup)),
                                s(:pair,
                                  s(:sym, :id),
                                  s(:send, nil, :id)),
                                s(:pair,
                                  s(:sym, :links),
                                  s(:send,
                                    s(:send,
                                      s(:send, nil, :links), :to_a), :dup)),
                                s(:pair,
                                  s(:sym, :rights),
                                  s(:ivar, :@rights)),
                                s(:pair,
                                  s(:sym, :title),
                                  s(:ivar, :@title)),
                                s(:pair,
                                  s(:sym, :updated),
                                  s(:send, nil, :updated)))),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :authors)), :empty?),
                              s(:send,
                                s(:send, nil, :authors), :replace,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :authors)), nil),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :contributors)), :empty?),
                              s(:send,
                                s(:send, nil, :contributors), :replace,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :contributors)), nil),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :categories)), :empty?),
                              s(:send,
                                s(:send, nil, :categories), :replace,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :categories)), nil),
                            s(:or_asgn,
                              s(:send,
                                s(:self), :id),
                              s(:or,
                                s(:send, nil, :link),
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :id))),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :links)), :empty?),
                              s(:send,
                                s(:send, nil, :links), :replace,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :links)), nil),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :rights)), :variable_is_set?), nil,
                              s(:block,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :rights),
                                s(:args,
                                  s(:arg, :r)),
                                s(:ivasgn, :@rights,
                                  s(:lvar, :r)))),
                            s(:if,
                              s(:send,
                                s(:send,
                                  s(:lvar, :keep), :[],
                                  s(:sym, :title)), :variable_is_set?), nil,
                              s(:block,
                                s(:send,
                                  s(:send,
                                    s(:ivar, :@maker), :channel), :title),
                                s(:args,
                                  s(:arg, :t)),
                                s(:ivasgn, :@title,
                                  s(:lvar, :t)))),
                            s(:or_asgn,
                              s(:send,
                                s(:self), :updated),
                              s(:send,
                                s(:send,
                                  s(:ivar, :@maker), :channel), :updated)),
                            s(:zsuper)),
                          s(:begin,
                            s(:send,
                              s(:send, nil, :authors), :replace,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :authors))),
                            s(:send,
                              s(:send, nil, :contributors), :replace,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :contributors))),
                            s(:send,
                              s(:send, nil, :categories), :replace,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :categories))),
                            s(:send,
                              s(:send, nil, :links), :replace,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :links))),
                            s(:send,
                              s(:self), :id=,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :id))),
                            s(:ivasgn, :@rights,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :rights))),
                            s(:ivasgn, :@title,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :title))),
                            s(:send,
                              s(:self), :updated=,
                              s(:send,
                                s(:lvar, :keep), :[],
                                s(:sym, :updated)))))),
                      s(:casgn, nil, :Guid,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Guid)),
                      s(:casgn, nil, :Enclosure,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Enclosure)),
                      s(:casgn, nil, :Source,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Source)),
                      s(:casgn, nil, :Categories,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Categories)),
                      s(:casgn, nil, :Authors,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Authors)),
                      s(:casgn, nil, :Contributors,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Contributors)),
                      s(:casgn, nil, :Links,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Links)),
                      s(:casgn, nil, :Rights,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Rights)),
                      s(:casgn, nil, :Description,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Description)),
                      s(:casgn, nil, :Title,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Title)),
                      s(:casgn, nil, :Content,
                        s(:const,
                          s(:const,
                            s(:const,
                              s(:const, nil, :Feed), :Items), :Item), :Content)))))),
              s(:class,
                s(:const, nil, :Textinput),
                s(:const, nil, :TextinputBase), nil)))),
        s(:send, nil, :add_maker,
          s(:str, "atom:entry"),
          s(:str, "1.0"),
          s(:const,
            s(:const, nil, :Atom), :Entry)),
        s(:send, nil, :add_maker,
          s(:str, "atom1.0:entry"),
          s(:str, "1.0"),
          s(:const,
            s(:const, nil, :Atom), :Entry))))))

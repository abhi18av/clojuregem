s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/platform")),
  s(:class,
    s(:const,
      s(:const, nil, :Gem), :NameTuple), nil,
    s(:begin,
      s(:def, :initialize,
        s(:args,
          s(:arg, :name),
          s(:arg, :version),
          s(:optarg, :platform,
            s(:str, "ruby"))),
        s(:begin,
          s(:ivasgn, :@name,
            s(:lvar, :name)),
          s(:ivasgn, :@version,
            s(:lvar, :version)),
          s(:if,
            s(:send,
              s(:lvar, :platform), :kind_of?,
              s(:const,
                s(:const, nil, :Gem), :Platform)), nil,
            s(:if,
              s(:or,
                s(:send,
                  s(:lvar, :platform), :!),
                s(:send,
                  s(:lvar, :platform), :empty?)),
              s(:lvasgn, :platform,
                s(:str, "ruby")), nil)),
          s(:ivasgn, :@platform,
            s(:lvar, :platform)))),
      s(:send, nil, :attr_reader,
        s(:sym, :name),
        s(:sym, :version),
        s(:sym, :platform)),
      s(:defs,
        s(:self), :from_list,
        s(:args,
          s(:arg, :list)),
        s(:block,
          s(:send,
            s(:lvar, :list), :map),
          s(:args,
            s(:arg, :t)),
          s(:send, nil, :new,
            s(:splat,
              s(:lvar, :t))))),
      s(:defs,
        s(:self), :to_basic,
        s(:args,
          s(:arg, :list)),
        s(:block,
          s(:send,
            s(:lvar, :list), :map),
          s(:args,
            s(:arg, :t)),
          s(:send,
            s(:lvar, :t), :to_a))),
      s(:defs,
        s(:self), :null,
        s(:args),
        s(:send, nil, :new,
          s(:nil),
          s(:send,
            s(:const,
              s(:const, nil, :Gem), :Version), :new,
            s(:int, 0)),
          s(:nil))),
      s(:def, :full_name,
        s(:args),
        s(:send,
          s(:send,
            s(:case,
              s(:ivar, :@platform),
              s(:when,
                s(:nil),
                s(:str, "ruby"),
                s(:str, ""),
                s(:dstr,
                  s(:begin,
                    s(:ivar, :@name)),
                  s(:str, "-"),
                  s(:begin,
                    s(:ivar, :@version)))),
              s(:dstr,
                s(:begin,
                  s(:ivar, :@name)),
                s(:str, "-"),
                s(:begin,
                  s(:ivar, :@version)),
                s(:str, "-"),
                s(:begin,
                  s(:ivar, :@platform)))), :dup), :untaint)),
      s(:def, :match_platform?,
        s(:args),
        s(:send,
          s(:const,
            s(:const, nil, :Gem), :Platform), :match,
          s(:ivar, :@platform))),
      s(:def, :prerelease?,
        s(:args),
        s(:send,
          s(:ivar, :@version), :prerelease?)),
      s(:def, :spec_name,
        s(:args),
        s(:dstr,
          s(:begin,
            s(:send, nil, :full_name)),
          s(:str, ".gemspec"))),
      s(:def, :to_a,
        s(:args),
        s(:array,
          s(:ivar, :@name),
          s(:ivar, :@version),
          s(:ivar, :@platform))),
      s(:def, :inspect,
        s(:args),
        s(:dstr,
          s(:str, "#<Gem::NameTuple "),
          s(:begin,
            s(:ivar, :@name)),
          s(:str, ", "),
          s(:begin,
            s(:ivar, :@version)),
          s(:str, ", "),
          s(:begin,
            s(:ivar, :@platform)),
          s(:str, ">"))),
      s(:alias,
        s(:sym, :to_s),
        s(:sym, :inspect)),
      s(:def, :<=>,
        s(:args,
          s(:arg, :other)),
        s(:send,
          s(:array,
            s(:ivar, :@name),
            s(:ivar, :@version),
            s(:if,
              s(:send,
                s(:ivar, :@platform), :==,
                s(:const,
                  s(:const,
                    s(:const, nil, :Gem), :Platform), :RUBY)),
              s(:int, -1),
              s(:int, 1))), :<=>,
          s(:array,
            s(:send,
              s(:lvar, :other), :name),
            s(:send,
              s(:lvar, :other), :version),
            s(:if,
              s(:send,
                s(:send,
                  s(:lvar, :other), :platform), :==,
                s(:const,
                  s(:const,
                    s(:const, nil, :Gem), :Platform), :RUBY)),
              s(:int, -1),
              s(:int, 1))))),
      s(:send, nil, :include,
        s(:const, nil, :Comparable)),
      s(:def, :==,
        s(:args,
          s(:arg, :other)),
        s(:case,
          s(:lvar, :other),
          s(:when,
            s(:send,
              s(:self), :class),
            s(:and,
              s(:and,
                s(:send,
                  s(:ivar, :@name), :==,
                  s(:send,
                    s(:lvar, :other), :name)),
                s(:send,
                  s(:ivar, :@version), :==,
                  s(:send,
                    s(:lvar, :other), :version))),
              s(:send,
                s(:ivar, :@platform), :==,
                s(:send,
                  s(:lvar, :other), :platform)))),
          s(:when,
            s(:const, nil, :Array),
            s(:send,
              s(:send, nil, :to_a), :==,
              s(:lvar, :other))),
          s(:false))),
      s(:send, nil, :alias_method,
        s(:sym, :eql?),
        s(:sym, :==)),
      s(:def, :hash,
        s(:args),
        s(:send,
          s(:send, nil, :to_a), :hash)))))

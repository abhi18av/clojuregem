s(:module,
  s(:const, nil, :Gem),
  s(:begin,
    s(:casgn, nil, :DEFAULT_HOST,
      s(:str, "https://rubygems.org")),
    s(:or_asgn,
      s(:ivasgn, :@post_install_hooks),
      s(:array)),
    s(:or_asgn,
      s(:ivasgn, :@done_installing_hooks),
      s(:array)),
    s(:or_asgn,
      s(:ivasgn, :@post_uninstall_hooks),
      s(:array)),
    s(:or_asgn,
      s(:ivasgn, :@pre_uninstall_hooks),
      s(:array)),
    s(:or_asgn,
      s(:ivasgn, :@pre_install_hooks),
      s(:array)),
    s(:defs,
      s(:self), :default_sources,
      s(:args),
      s(:array,
        s(:str, "https://rubygems.org/"))),
    s(:defs,
      s(:self), :default_spec_cache_dir,
      s(:args),
      s(:send,
        s(:const, nil, :File), :join,
        s(:send,
          s(:const, nil, :Gem), :user_home),
        s(:str, ".gem"),
        s(:str, "specs"))),
    s(:defs,
      s(:self), :default_dir,
      s(:args),
      s(:begin,
        s(:lvasgn, :path,
          s(:if,
            s(:defined?,
              s(:const, nil, :RUBY_FRAMEWORK_VERSION)),
            s(:array,
              s(:send,
                s(:const, nil, :File), :dirname,
                s(:send,
                  s(:const,
                    s(:const, nil, :RbConfig), :CONFIG), :[],
                  s(:str, "sitedir"))),
              s(:str, "Gems"),
              s(:send,
                s(:const,
                  s(:const, nil, :RbConfig), :CONFIG), :[],
                s(:str, "ruby_version"))),
            s(:if,
              s(:send,
                s(:const,
                  s(:const, nil, :RbConfig), :CONFIG), :[],
                s(:str, "rubylibprefix")),
              s(:array,
                s(:send,
                  s(:const,
                    s(:const, nil, :RbConfig), :CONFIG), :[],
                  s(:str, "rubylibprefix")),
                s(:str, "gems"),
                s(:send,
                  s(:const,
                    s(:const, nil, :RbConfig), :CONFIG), :[],
                  s(:str, "ruby_version"))),
              s(:array,
                s(:send,
                  s(:const,
                    s(:const, nil, :RbConfig), :CONFIG), :[],
                  s(:str, "libdir")),
                s(:send, nil, :ruby_engine),
                s(:str, "gems"),
                s(:send,
                  s(:const,
                    s(:const, nil, :RbConfig), :CONFIG), :[],
                  s(:str, "ruby_version")))))),
        s(:or_asgn,
          s(:ivasgn, :@default_dir),
          s(:send,
            s(:const, nil, :File), :join,
            s(:splat,
              s(:lvar, :path)))))),
    s(:defs,
      s(:self), :default_ext_dir_for,
      s(:args,
        s(:arg, :base_dir)),
      s(:nil)),
    s(:defs,
      s(:self), :default_rubygems_dirs,
      s(:args),
      s(:nil)),
    s(:defs,
      s(:self), :user_dir,
      s(:args),
      s(:begin,
        s(:lvasgn, :parts,
          s(:array,
            s(:send,
              s(:const, nil, :Gem), :user_home),
            s(:str, ".gem"),
            s(:send, nil, :ruby_engine))),
        s(:if,
          s(:send,
            s(:send,
              s(:const,
                s(:const, nil, :RbConfig), :CONFIG), :[],
              s(:str, "ruby_version")), :empty?), nil,
          s(:send,
            s(:lvar, :parts), :<<,
            s(:send,
              s(:const,
                s(:const, nil, :RbConfig), :CONFIG), :[],
              s(:str, "ruby_version")))),
        s(:send,
          s(:const, nil, :File), :join,
          s(:lvar, :parts)))),
    s(:defs,
      s(:self), :path_separator,
      s(:args),
      s(:const,
        s(:const, nil, :File), :PATH_SEPARATOR)),
    s(:defs,
      s(:self), :default_path,
      s(:args),
      s(:begin,
        s(:lvasgn, :path,
          s(:array)),
        s(:if,
          s(:and,
            s(:send, nil, :user_home),
            s(:send,
              s(:const, nil, :File), :exist?,
              s(:send, nil, :user_home))),
          s(:send,
            s(:lvar, :path), :<<,
            s(:send, nil, :user_dir)), nil),
        s(:send,
          s(:lvar, :path), :<<,
          s(:send, nil, :default_dir)),
        s(:if,
          s(:and,
            s(:send, nil, :vendor_dir),
            s(:send,
              s(:const, nil, :File), :directory?,
              s(:send, nil, :vendor_dir))),
          s(:send,
            s(:lvar, :path), :<<,
            s(:send, nil, :vendor_dir)), nil),
        s(:lvar, :path))),
    s(:defs,
      s(:self), :default_exec_format,
      s(:args),
      s(:begin,
        s(:lvasgn, :exec_format,
          s(:rescue,
            s(:send,
              s(:send,
                s(:const,
                  s(:const, nil, :RbConfig), :CONFIG), :[],
                s(:str, "ruby_install_name")), :sub,
              s(:str, "ruby"),
              s(:str, "%s")),
            s(:resbody, nil, nil,
              s(:str, "%s")), nil)),
        s(:if,
          s(:send,
            s(:lvar, :exec_format), :=~,
            s(:regexp,
              s(:str, "%s"),
              s(:regopt))), nil,
          s(:send, nil, :raise,
            s(:const,
              s(:const, nil, :Gem), :Exception),
            s(:dstr,
              s(:str, "[BUG] invalid exec_format "),
              s(:begin,
                s(:send,
                  s(:lvar, :exec_format), :inspect)),
              s(:str, ", no %s")))),
        s(:lvar, :exec_format))),
    s(:defs,
      s(:self), :default_bindir,
      s(:args),
      s(:if,
        s(:defined?,
          s(:const, nil, :RUBY_FRAMEWORK_VERSION)),
        s(:str, "/usr/bin"),
        s(:send,
          s(:const,
            s(:const, nil, :RbConfig), :CONFIG), :[],
          s(:str, "bindir")))),
    s(:defs,
      s(:self), :ruby_engine,
      s(:args),
      s(:if,
        s(:defined?,
          s(:const, nil, :RUBY_ENGINE)),
        s(:const, nil, :RUBY_ENGINE),
        s(:str, "ruby"))),
    s(:defs,
      s(:self), :default_key_path,
      s(:args),
      s(:send,
        s(:const, nil, :File), :join,
        s(:send,
          s(:const, nil, :Gem), :user_home),
        s(:str, ".gem"),
        s(:str, "gem-private_key.pem"))),
    s(:defs,
      s(:self), :default_cert_path,
      s(:args),
      s(:send,
        s(:const, nil, :File), :join,
        s(:send,
          s(:const, nil, :Gem), :user_home),
        s(:str, ".gem"),
        s(:str, "gem-public_cert.pem"))),
    s(:defs,
      s(:self), :default_gems_use_full_paths?,
      s(:args),
      s(:send,
        s(:send, nil, :ruby_engine), :!=,
        s(:str, "ruby"))),
    s(:defs,
      s(:self), :install_extension_in_lib,
      s(:args),
      s(:true)),
    s(:defs,
      s(:self), :vendor_dir,
      s(:args),
      s(:begin,
        s(:if,
          s(:lvasgn, :vendor_dir,
            s(:send,
              s(:const, nil, :ENV), :[],
              s(:str, "GEM_VENDOR"))),
          s(:return,
            s(:send,
              s(:lvar, :vendor_dir), :dup)), nil),
        s(:if,
          s(:send,
            s(:const,
              s(:const, nil, :RbConfig), :CONFIG), :key?,
            s(:str, "vendordir")), nil,
          s(:return,
            s(:nil))),
        s(:send,
          s(:const, nil, :File), :join,
          s(:send,
            s(:const,
              s(:const, nil, :RbConfig), :CONFIG), :[],
            s(:str, "vendordir")),
          s(:str, "gems"),
          s(:send,
            s(:const,
              s(:const, nil, :RbConfig), :CONFIG), :[],
            s(:str, "ruby_version")))))))

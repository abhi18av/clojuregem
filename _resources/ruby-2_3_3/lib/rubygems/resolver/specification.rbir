s(:class,
  s(:const,
    s(:const,
      s(:const, nil, :Gem), :Resolver), :Specification), nil,
  s(:begin,
    s(:send, nil, :attr_reader,
      s(:sym, :dependencies)),
    s(:send, nil, :attr_reader,
      s(:sym, :name)),
    s(:send, nil, :attr_reader,
      s(:sym, :platform)),
    s(:send, nil, :attr_reader,
      s(:sym, :set)),
    s(:send, nil, :attr_reader,
      s(:sym, :source)),
    s(:send, nil, :attr_reader,
      s(:sym, :spec)),
    s(:send, nil, :attr_reader,
      s(:sym, :version)),
    s(:def, :initialize,
      s(:args),
      s(:begin,
        s(:ivasgn, :@dependencies,
          s(:nil)),
        s(:ivasgn, :@name,
          s(:nil)),
        s(:ivasgn, :@platform,
          s(:nil)),
        s(:ivasgn, :@set,
          s(:nil)),
        s(:ivasgn, :@source,
          s(:nil)),
        s(:ivasgn, :@version,
          s(:nil)))),
    s(:def, :fetch_development_dependencies,
      s(:args), nil),
    s(:def, :full_name,
      s(:args),
      s(:dstr,
        s(:begin,
          s(:ivar, :@name)),
        s(:str, "-"),
        s(:begin,
          s(:ivar, :@version)))),
    s(:def, :install,
      s(:args,
        s(:optarg, :options,
          s(:hash))),
      s(:begin,
        s(:send, nil, :require,
          s(:str, "rubygems/installer")),
        s(:lvasgn, :destination,
          s(:or,
            s(:send,
              s(:lvar, :options), :[],
              s(:sym, :install_dir)),
            s(:send,
              s(:const, nil, :Gem), :dir))),
        s(:send,
          s(:const, nil, :Gem), :ensure_gem_subdirectories,
          s(:lvar, :destination)),
        s(:lvasgn, :gem,
          s(:send,
            s(:send, nil, :source), :download,
            s(:send, nil, :spec),
            s(:lvar, :destination))),
        s(:lvasgn, :installer,
          s(:send,
            s(:const,
              s(:const, nil, :Gem), :Installer), :at,
            s(:lvar, :gem),
            s(:lvar, :options))),
        s(:if,
          s(:send, nil, :block_given?),
          s(:yield,
            s(:lvar, :installer)), nil),
        s(:ivasgn, :@spec,
          s(:send,
            s(:lvar, :installer), :install)))),
    s(:def, :installable_platform?,
      s(:args),
      s(:send,
        s(:const,
          s(:const, nil, :Gem), :Platform), :match,
        s(:send,
          s(:send, nil, :spec), :platform))),
    s(:def, :local?,
      s(:args),
      s(:false))))

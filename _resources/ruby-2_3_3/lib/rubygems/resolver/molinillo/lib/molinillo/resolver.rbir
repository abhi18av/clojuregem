s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/resolver/molinillo/lib/molinillo/dependency_graph")),
  s(:module,
    s(:const,
      s(:const,
        s(:const, nil, :Gem), :Resolver), :Molinillo),
    s(:class,
      s(:const, nil, :Resolver), nil,
      s(:begin,
        s(:send, nil, :require,
          s(:str, "rubygems/resolver/molinillo/lib/molinillo/resolution")),
        s(:send, nil, :attr_reader,
          s(:sym, :specification_provider)),
        s(:send, nil, :attr_reader,
          s(:sym, :resolver_ui)),
        s(:def, :initialize,
          s(:args,
            s(:arg, :specification_provider),
            s(:arg, :resolver_ui)),
          s(:begin,
            s(:ivasgn, :@specification_provider,
              s(:lvar, :specification_provider)),
            s(:ivasgn, :@resolver_ui,
              s(:lvar, :resolver_ui)))),
        s(:def, :resolve,
          s(:args,
            s(:arg, :requested),
            s(:optarg, :base,
              s(:send,
                s(:const, nil, :DependencyGraph), :new))),
          s(:send,
            s(:send,
              s(:const, nil, :Resolution), :new,
              s(:send, nil, :specification_provider),
              s(:send, nil, :resolver_ui),
              s(:lvar, :requested),
              s(:lvar, :base)), :resolve))))))

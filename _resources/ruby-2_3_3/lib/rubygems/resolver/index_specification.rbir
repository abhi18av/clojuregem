s(:class,
  s(:const,
    s(:const,
      s(:const, nil, :Gem), :Resolver), :IndexSpecification),
  s(:const,
    s(:const,
      s(:const, nil, :Gem), :Resolver), :Specification),
  s(:begin,
    s(:def, :initialize,
      s(:args,
        s(:arg, :set),
        s(:arg, :name),
        s(:arg, :version),
        s(:arg, :source),
        s(:arg, :platform)),
      s(:begin,
        s(:super),
        s(:ivasgn, :@set,
          s(:lvar, :set)),
        s(:ivasgn, :@name,
          s(:lvar, :name)),
        s(:ivasgn, :@version,
          s(:lvar, :version)),
        s(:ivasgn, :@source,
          s(:lvar, :source)),
        s(:ivasgn, :@platform,
          s(:send,
            s(:lvar, :platform), :to_s)),
        s(:ivasgn, :@spec,
          s(:nil)))),
    s(:def, :dependencies,
      s(:args),
      s(:send,
        s(:send, nil, :spec), :dependencies)),
    s(:def, :inspect,
      s(:args),
      s(:send,
        s(:str, "#<%s %s source %s>"), :%,
        s(:array,
          s(:send,
            s(:self), :class),
          s(:send, nil, :full_name),
          s(:ivar, :@source)))),
    s(:def, :pretty_print,
      s(:args,
        s(:arg, :q)),
      s(:block,
        s(:send,
          s(:lvar, :q), :group,
          s(:int, 2),
          s(:str, "[Index specification"),
          s(:str, "]")),
        s(:args),
        s(:begin,
          s(:send,
            s(:lvar, :q), :breakable),
          s(:send,
            s(:lvar, :q), :text,
            s(:send, nil, :full_name)),
          s(:if,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Platform), :RUBY), :==,
              s(:ivar, :@platform)), nil,
            s(:begin,
              s(:send,
                s(:lvar, :q), :breakable),
              s(:send,
                s(:lvar, :q), :text,
                s(:send,
                  s(:ivar, :@platform), :to_s)))),
          s(:send,
            s(:lvar, :q), :breakable),
          s(:send,
            s(:lvar, :q), :text,
            s(:str, "source ")),
          s(:send,
            s(:lvar, :q), :pp,
            s(:ivar, :@source))))),
    s(:def, :spec,
      s(:args),
      s(:or_asgn,
        s(:ivasgn, :@spec),
        s(:kwbegin,
          s(:lvasgn, :tuple,
            s(:send,
              s(:const,
                s(:const, nil, :Gem), :NameTuple), :new,
              s(:ivar, :@name),
              s(:ivar, :@version),
              s(:ivar, :@platform))),
          s(:send,
            s(:ivar, :@source), :fetch_spec,
            s(:lvar, :tuple)))))))

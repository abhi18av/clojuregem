s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/command")),
  s(:send, nil, :require,
    s(:str, "rubygems/commands/query_command")),
  s(:class,
    s(:const,
      s(:const,
        s(:const, nil, :Gem), :Commands), :SearchCommand),
    s(:const,
      s(:const,
        s(:const, nil, :Gem), :Commands), :QueryCommand),
    s(:begin,
      s(:def, :initialize,
        s(:args),
        s(:begin,
          s(:super,
            s(:str, "search"),
            s(:str, "Display remote gems whose name matches REGEXP")),
          s(:send, nil, :remove_option,
            s(:str, "--name-matches")),
          s(:send,
            s(:send, nil, :defaults), :[]=,
            s(:sym, :domain),
            s(:sym, :remote)))),
      s(:def, :arguments,
        s(:args),
        s(:str, "REGEXP        regexp to search for in gem name")),
      s(:def, :defaults_str,
        s(:args),
        s(:str, "--remote --no-details")),
      s(:def, :description,
        s(:args),
        s(:dstr,
          s(:str, "The search command displays remote gems whose name matches the given\n"),
          s(:str, "regexp.\n"),
          s(:str, "\n"),
          s(:str, "The --details option displays additional details from the gem but will\n"),
          s(:str, "take a little longer to complete as it must download the information\n"),
          s(:str, "individually from the index.\n"),
          s(:str, "\n"),
          s(:str, "To list local gems use the list command.\n"))),
      s(:def, :usage,
        s(:args),
        s(:dstr,
          s(:begin,
            s(:send, nil, :program_name)),
          s(:str, " [REGEXP]"))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/command")),
  s(:if,
    s(:defined?,
      s(:const,
        s(:const,
          s(:const, nil, :Gem), :Commands), :MirrorCommand)), nil,
    s(:class,
      s(:const,
        s(:const,
          s(:const, nil, :Gem), :Commands), :MirrorCommand),
      s(:const,
        s(:const, nil, :Gem), :Command),
      s(:begin,
        s(:def, :initialize,
          s(:args),
          s(:begin,
            s(:super,
              s(:str, "mirror"),
              s(:str, "Mirror all gem files (requires rubygems-mirror)")),
            s(:kwbegin,
              s(:rescue,
                s(:send,
                  s(:send,
                    s(:const,
                      s(:const, nil, :Gem), :Specification), :find_by_name,
                    s(:str, "rubygems-mirror")), :activate),
                s(:resbody,
                  s(:array,
                    s(:const,
                      s(:const, nil, :Gem), :LoadError)), nil, nil), nil)))),
        s(:def, :description,
          s(:args),
          s(:str, "The mirror command has been moved to the rubygems-mirror gem.\n")),
        s(:def, :execute,
          s(:args),
          s(:send, nil, :alert_error,
            s(:str, "Install the rubygems-mirror gem for the mirror command")))))))

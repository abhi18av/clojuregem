s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/command")),
  s(:send, nil, :require,
    s(:str, "rubygems/commands/query_command")),
  s(:class,
    s(:const,
      s(:const,
        s(:const, nil, :Gem), :Commands), :ListCommand),
    s(:const,
      s(:const,
        s(:const, nil, :Gem), :Commands), :QueryCommand),
    s(:begin,
      s(:def, :initialize,
        s(:args),
        s(:begin,
          s(:super,
            s(:str, "list"),
            s(:str, "Display local gems whose name matches REGEXP")),
          s(:send, nil, :remove_option,
            s(:str, "--name-matches")))),
      s(:def, :arguments,
        s(:args),
        s(:str, "REGEXP        regexp to look for in gem name")),
      s(:def, :defaults_str,
        s(:args),
        s(:str, "--local --no-details")),
      s(:def, :description,
        s(:args),
        s(:dstr,
          s(:str, "The list command is used to view the gems you have installed locally.\n"),
          s(:str, "\n"),
          s(:str, "The --details option displays additional details including the summary, the\n"),
          s(:str, "homepage, the author, the locations of different versions of the gem.\n"),
          s(:str, "\n"),
          s(:str, "To search for remote gems use the search command.\n"))),
      s(:def, :usage,
        s(:args),
        s(:dstr,
          s(:begin,
            s(:send, nil, :program_name)),
          s(:str, " [REGEXP ...]"))))))

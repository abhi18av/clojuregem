s(:module,
  s(:const,
    s(:const, nil, :RDoc), :RubyToken),
  s(:begin,
    s(:casgn, nil, :EXPR_BEG,
      s(:sym, :EXPR_BEG)),
    s(:casgn, nil, :EXPR_MID,
      s(:sym, :EXPR_MID)),
    s(:casgn, nil, :EXPR_END,
      s(:sym, :EXPR_END)),
    s(:casgn, nil, :EXPR_ARG,
      s(:sym, :EXPR_ARG)),
    s(:casgn, nil, :EXPR_FNAME,
      s(:sym, :EXPR_FNAME)),
    s(:casgn, nil, :EXPR_DOT,
      s(:sym, :EXPR_DOT)),
    s(:casgn, nil, :EXPR_CLASS,
      s(:sym, :EXPR_CLASS)),
    s(:if,
      s(:send,
        s(:defined?,
          s(:const, nil, :Symbol)), :!),
      s(:casgn, nil, :Symbol,
        s(:const, nil, :Integer)), nil),
    s(:def, :set_token_position,
      s(:args,
        s(:arg, :line),
        s(:arg, :char)),
      s(:begin,
        s(:ivasgn, :@prev_line_no,
          s(:lvar, :line)),
        s(:ivasgn, :@prev_char_no,
          s(:lvar, :char)))),
    s(:class,
      s(:const, nil, :Token), nil,
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:optarg, :text,
              s(:nil))),
          s(:begin,
            s(:ivasgn, :@seek,
              s(:lvar, :seek)),
            s(:ivasgn, :@line_no,
              s(:lvar, :line_no)),
            s(:ivasgn, :@char_no,
              s(:lvar, :char_no)),
            s(:ivasgn, :@text,
              s(:lvar, :text)))),
        s(:send, nil, :attr_reader,
          s(:sym, :seek)),
        s(:send, nil, :attr_reader,
          s(:sym, :line_no)),
        s(:send, nil, :attr_reader,
          s(:sym, :char_no)),
        s(:send, nil, :attr_accessor,
          s(:sym, :text)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :text), :==,
              s(:ivar, :@text)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@text,
              s(:lvar, :text)),
            s(:self))),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@text))))))),
    s(:class,
      s(:const, nil, :TkNode),
      s(:const, nil, :Token),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:optarg, :node,
              s(:nil))),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:ivasgn, :@node,
              s(:lvar, :node)))),
        s(:send, nil, :attr_reader,
          s(:sym, :node)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :node), :==,
              s(:ivar, :@node)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@node,
              s(:lvar, :text)),
            s(:self))),
        s(:alias,
          s(:sym, :text),
          s(:sym, :node)),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@node))))))),
    s(:class,
      s(:const, nil, :TkId),
      s(:const, nil, :Token),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:arg, :name)),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:ivasgn, :@name,
              s(:lvar, :name)))),
        s(:send, nil, :attr_reader,
          s(:sym, :name)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :name), :==,
              s(:ivar, :@name)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@name,
              s(:lvar, :text)),
            s(:self))),
        s(:alias,
          s(:sym, :text),
          s(:sym, :name)),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@name))))))),
    s(:class,
      s(:const, nil, :TkKW),
      s(:const, nil, :TkId), nil),
    s(:class,
      s(:const, nil, :TkVal),
      s(:const, nil, :Token),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:optarg, :value,
              s(:nil))),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:ivasgn, :@value,
              s(:lvar, :value)))),
        s(:send, nil, :attr_accessor,
          s(:sym, :value)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :value), :==,
              s(:ivar, :@value)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@value,
              s(:lvar, :text)),
            s(:self))),
        s(:alias,
          s(:sym, :text),
          s(:sym, :value)),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %s, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@value))))))),
    s(:class,
      s(:const, nil, :TkOp),
      s(:const, nil, :Token),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:optarg, :name,
              s(:nil))),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:ivasgn, :@name,
              s(:lvar, :name)))),
        s(:send, nil, :attr_accessor,
          s(:sym, :name)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :name), :==,
              s(:ivar, :@name)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@name,
              s(:lvar, :text)),
            s(:self))),
        s(:alias,
          s(:sym, :text),
          s(:sym, :name)),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@name))))))),
    s(:class,
      s(:const, nil, :TkOPASGN),
      s(:const, nil, :TkOp),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:arg, :op)),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:if,
              s(:send,
                s(:lvar, :op), :kind_of?,
                s(:const, nil, :Symbol)), nil,
              s(:lvasgn, :op,
                s(:send,
                  s(:send,
                    s(:const, nil, :TkReading2Token), :[],
                    s(:lvar, :op)), :[],
                  s(:int, 0)))),
            s(:ivasgn, :@op,
              s(:lvar, :op)),
            s(:ivasgn, :@text,
              s(:nil)))),
        s(:send, nil, :attr_reader,
          s(:sym, :op)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :op), :==,
              s(:ivar, :@op)))),
        s(:def, :text,
          s(:args),
          s(:or_asgn,
            s(:ivasgn, :@text),
            s(:dstr,
              s(:begin,
                s(:send,
                  s(:const, nil, :TkToken2Reading), :[],
                  s(:send, nil, :op))),
              s(:str, "=")))),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@op))))))),
    s(:class,
      s(:const, nil, :TkUnknownChar),
      s(:const, nil, :Token),
      s(:begin,
        s(:def, :initialize,
          s(:args,
            s(:arg, :seek),
            s(:arg, :line_no),
            s(:arg, :char_no),
            s(:arg, :name)),
          s(:begin,
            s(:super,
              s(:lvar, :seek),
              s(:lvar, :line_no),
              s(:lvar, :char_no)),
            s(:ivasgn, :@name,
              s(:lvar, :name)))),
        s(:send, nil, :attr_reader,
          s(:sym, :name)),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:and,
              s(:and,
                s(:send,
                  s(:send,
                    s(:self), :class), :==,
                  s(:send,
                    s(:lvar, :other), :class)),
                s(:send,
                  s(:send,
                    s(:lvar, :other), :line_no), :==,
                  s(:ivar, :@line_no))),
              s(:send,
                s(:send,
                  s(:lvar, :other), :char_no), :==,
                s(:ivar, :@char_no))),
            s(:send,
              s(:send,
                s(:lvar, :other), :name), :==,
              s(:ivar, :@name)))),
        s(:def, :set_text,
          s(:args,
            s(:arg, :text)),
          s(:begin,
            s(:ivasgn, :@name,
              s(:lvar, :text)),
            s(:self))),
        s(:alias,
          s(:sym, :text),
          s(:sym, :name)),
        s(:def, :inspect,
          s(:args),
          s(:begin,
            s(:lvasgn, :klass,
              s(:send,
                s(:send,
                  s(:send,
                    s(:send,
                      s(:self), :class), :name), :split,
                  s(:str, "::")), :last)),
            s(:send,
              s(:str, "{%s %d, %d:%d %p}"), :%,
              s(:array,
                s(:lvar, :klass),
                s(:ivar, :@seek),
                s(:ivar, :@line_no),
                s(:ivar, :@char_no),
                s(:ivar, :@name))))))),
    s(:class,
      s(:const, nil, :TkError),
      s(:const, nil, :Token), nil),
    s(:def, :Token,
      s(:args,
        s(:arg, :token),
        s(:optarg, :value,
          s(:nil))),
      s(:begin,
        s(:or_asgn,
          s(:lvasgn, :value),
          s(:send,
            s(:const, nil, :TkToken2Reading), :[],
            s(:lvar, :token))),
        s(:case,
          s(:lvar, :token),
          s(:when,
            s(:const, nil, :String),
            s(:begin,
              s(:if,
                s(:send,
                  s(:begin,
                    s(:lvasgn, :tk,
                      s(:send,
                        s(:const, nil, :TkReading2Token), :[],
                        s(:lvar, :token)))), :nil?),
                s(:send,
                  s(:const, nil, :IRB), :fail,
                  s(:const, nil, :TkReading2TokenNoKey),
                  s(:lvar, :token)), nil),
              s(:lvasgn, :tk,
                s(:send, nil, :Token,
                  s(:send,
                    s(:lvar, :tk), :[],
                    s(:int, 0)),
                  s(:lvar, :value))),
              s(:if,
                s(:send,
                  s(:lvar, :tk), :kind_of?,
                  s(:const, nil, :TkOp)),
                s(:send,
                  s(:lvar, :tk), :name=,
                  s(:lvar, :token)), nil))),
          s(:when,
            s(:const, nil, :Symbol),
            s(:begin,
              s(:if,
                s(:send,
                  s(:begin,
                    s(:lvasgn, :tk,
                      s(:send,
                        s(:const, nil, :TkSymbol2Token), :[],
                        s(:lvar, :token)))), :nil?),
                s(:send,
                  s(:const, nil, :IRB), :fail,
                  s(:const, nil, :TkSymbol2TokenNoKey),
                  s(:lvar, :token)), nil),
              s(:lvasgn, :tk,
                s(:send, nil, :Token,
                  s(:send,
                    s(:lvar, :tk), :[],
                    s(:int, 0)),
                  s(:lvar, :value))))),
          s(:if,
            s(:send,
              s(:send,
                s(:send,
                  s(:lvar, :token), :instance_method,
                  s(:sym, :initialize)), :arity), :==,
              s(:int, 3)),
            s(:begin,
              s(:lvasgn, :tk,
                s(:send,
                  s(:lvar, :token), :new,
                  s(:ivar, :@prev_seek),
                  s(:ivar, :@prev_line_no),
                  s(:ivar, :@prev_char_no))),
              s(:send,
                s(:lvar, :tk), :set_text,
                s(:lvar, :value))),
            s(:lvasgn, :tk,
              s(:send,
                s(:lvar, :token), :new,
                s(:ivar, :@prev_seek),
                s(:ivar, :@prev_line_no),
                s(:ivar, :@prev_char_no),
                s(:lvar, :value))))),
        s(:lvar, :tk))),
    s(:casgn, nil, :TokenDefinitions,
      s(:array,
        s(:array,
          s(:sym, :TkCLASS),
          s(:const, nil, :TkKW),
          s(:str, "class"),
          s(:sym, :EXPR_CLASS)),
        s(:array,
          s(:sym, :TkMODULE),
          s(:const, nil, :TkKW),
          s(:str, "module"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkDEF),
          s(:const, nil, :TkKW),
          s(:str, "def"),
          s(:sym, :EXPR_FNAME)),
        s(:array,
          s(:sym, :TkUNDEF),
          s(:const, nil, :TkKW),
          s(:str, "undef"),
          s(:sym, :EXPR_FNAME)),
        s(:array,
          s(:sym, :TkBEGIN),
          s(:const, nil, :TkKW),
          s(:str, "begin"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkRESCUE),
          s(:const, nil, :TkKW),
          s(:str, "rescue"),
          s(:sym, :EXPR_MID)),
        s(:array,
          s(:sym, :TkENSURE),
          s(:const, nil, :TkKW),
          s(:str, "ensure"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkEND),
          s(:const, nil, :TkKW),
          s(:str, "end"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkIF),
          s(:const, nil, :TkKW),
          s(:str, "if"),
          s(:sym, :EXPR_BEG),
          s(:sym, :TkIF_MOD)),
        s(:array,
          s(:sym, :TkUNLESS),
          s(:const, nil, :TkKW),
          s(:str, "unless"),
          s(:sym, :EXPR_BEG),
          s(:sym, :TkUNLESS_MOD)),
        s(:array,
          s(:sym, :TkTHEN),
          s(:const, nil, :TkKW),
          s(:str, "then"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkELSIF),
          s(:const, nil, :TkKW),
          s(:str, "elsif"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkELSE),
          s(:const, nil, :TkKW),
          s(:str, "else"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkCASE),
          s(:const, nil, :TkKW),
          s(:str, "case"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkWHEN),
          s(:const, nil, :TkKW),
          s(:str, "when"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkWHILE),
          s(:const, nil, :TkKW),
          s(:str, "while"),
          s(:sym, :EXPR_BEG),
          s(:sym, :TkWHILE_MOD)),
        s(:array,
          s(:sym, :TkUNTIL),
          s(:const, nil, :TkKW),
          s(:str, "until"),
          s(:sym, :EXPR_BEG),
          s(:sym, :TkUNTIL_MOD)),
        s(:array,
          s(:sym, :TkFOR),
          s(:const, nil, :TkKW),
          s(:str, "for"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkBREAK),
          s(:const, nil, :TkKW),
          s(:str, "break"),
          s(:sym, :EXPR_MID)),
        s(:array,
          s(:sym, :TkNEXT),
          s(:const, nil, :TkKW),
          s(:str, "next"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkREDO),
          s(:const, nil, :TkKW),
          s(:str, "redo"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkRETRY),
          s(:const, nil, :TkKW),
          s(:str, "retry"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkIN),
          s(:const, nil, :TkKW),
          s(:str, "in"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkDO),
          s(:const, nil, :TkKW),
          s(:str, "do"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkRETURN),
          s(:const, nil, :TkKW),
          s(:str, "return"),
          s(:sym, :EXPR_MID)),
        s(:array,
          s(:sym, :TkYIELD),
          s(:const, nil, :TkKW),
          s(:str, "yield"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkSUPER),
          s(:const, nil, :TkKW),
          s(:str, "super"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkSELF),
          s(:const, nil, :TkKW),
          s(:str, "self"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkNIL),
          s(:const, nil, :TkKW),
          s(:str, "nil"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkTRUE),
          s(:const, nil, :TkKW),
          s(:str, "true"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkFALSE),
          s(:const, nil, :TkKW),
          s(:str, "false"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkAND),
          s(:const, nil, :TkKW),
          s(:str, "and"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkOR),
          s(:const, nil, :TkKW),
          s(:str, "or"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkNOT),
          s(:const, nil, :TkKW),
          s(:str, "not"),
          s(:sym, :EXPR_BEG)),
        s(:array,
          s(:sym, :TkIF_MOD),
          s(:const, nil, :TkKW)),
        s(:array,
          s(:sym, :TkUNLESS_MOD),
          s(:const, nil, :TkKW)),
        s(:array,
          s(:sym, :TkWHILE_MOD),
          s(:const, nil, :TkKW)),
        s(:array,
          s(:sym, :TkUNTIL_MOD),
          s(:const, nil, :TkKW)),
        s(:array,
          s(:sym, :TkALIAS),
          s(:const, nil, :TkKW),
          s(:str, "alias"),
          s(:sym, :EXPR_FNAME)),
        s(:array,
          s(:sym, :TkDEFINED),
          s(:const, nil, :TkKW),
          s(:str, "defined?"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TklBEGIN),
          s(:const, nil, :TkKW),
          s(:str, "BEGIN"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TklEND),
          s(:const, nil, :TkKW),
          s(:str, "END"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :Tk__LINE__),
          s(:const, nil, :TkKW),
          s(:str, "__LINE__"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :Tk__FILE__),
          s(:const, nil, :TkKW),
          s(:str, "__FILE__"),
          s(:sym, :EXPR_END)),
        s(:array,
          s(:sym, :TkIDENTIFIER),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkFID),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkGVAR),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkCVAR),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkIVAR),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkCONSTANT),
          s(:const, nil, :TkId)),
        s(:array,
          s(:sym, :TkINTEGER),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkFLOAT),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkSTRING),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkHEREDOC),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkXSTRING),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkREGEXP),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkSYMBOL),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkCHAR),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkDSTRING),
          s(:const, nil, :TkNode)),
        s(:array,
          s(:sym, :TkDXSTRING),
          s(:const, nil, :TkNode)),
        s(:array,
          s(:sym, :TkDREGEXP),
          s(:const, nil, :TkNode)),
        s(:array,
          s(:sym, :TkNTH_REF),
          s(:const, nil, :TkNode)),
        s(:array,
          s(:sym, :TkBACK_REF),
          s(:const, nil, :TkNode)),
        s(:array,
          s(:sym, :TkUPLUS),
          s(:const, nil, :TkOp),
          s(:str, "+@")),
        s(:array,
          s(:sym, :TkUMINUS),
          s(:const, nil, :TkOp),
          s(:str, "-@")),
        s(:array,
          s(:sym, :TkPOW),
          s(:const, nil, :TkOp),
          s(:str, "**")),
        s(:array,
          s(:sym, :TkCMP),
          s(:const, nil, :TkOp),
          s(:str, "<=>")),
        s(:array,
          s(:sym, :TkEQ),
          s(:const, nil, :TkOp),
          s(:str, "==")),
        s(:array,
          s(:sym, :TkEQQ),
          s(:const, nil, :TkOp),
          s(:str, "===")),
        s(:array,
          s(:sym, :TkNEQ),
          s(:const, nil, :TkOp),
          s(:str, "!=")),
        s(:array,
          s(:sym, :TkGEQ),
          s(:const, nil, :TkOp),
          s(:str, ">=")),
        s(:array,
          s(:sym, :TkLEQ),
          s(:const, nil, :TkOp),
          s(:str, "<=")),
        s(:array,
          s(:sym, :TkANDOP),
          s(:const, nil, :TkOp),
          s(:str, "&&")),
        s(:array,
          s(:sym, :TkOROP),
          s(:const, nil, :TkOp),
          s(:str, "||")),
        s(:array,
          s(:sym, :TkMATCH),
          s(:const, nil, :TkOp),
          s(:str, "=~")),
        s(:array,
          s(:sym, :TkNMATCH),
          s(:const, nil, :TkOp),
          s(:str, "!~")),
        s(:array,
          s(:sym, :TkDOT2),
          s(:const, nil, :TkOp),
          s(:str, "..")),
        s(:array,
          s(:sym, :TkDOT3),
          s(:const, nil, :TkOp),
          s(:str, "...")),
        s(:array,
          s(:sym, :TkAREF),
          s(:const, nil, :TkOp),
          s(:str, "[]")),
        s(:array,
          s(:sym, :TkASET),
          s(:const, nil, :TkOp),
          s(:str, "[]=")),
        s(:array,
          s(:sym, :TkLSHFT),
          s(:const, nil, :TkOp),
          s(:str, "<<")),
        s(:array,
          s(:sym, :TkRSHFT),
          s(:const, nil, :TkOp),
          s(:str, ">>")),
        s(:array,
          s(:sym, :TkCOLON2),
          s(:const, nil, :TkOp),
          s(:str, "::")),
        s(:array,
          s(:sym, :TkCOLON3),
          s(:const, nil, :TkOp),
          s(:str, "::")),
        s(:array,
          s(:sym, :TkASSOC),
          s(:const, nil, :TkOp),
          s(:str, "=>")),
        s(:array,
          s(:sym, :TkQUESTION),
          s(:const, nil, :TkOp),
          s(:str, "?")),
        s(:array,
          s(:sym, :TkCOLON),
          s(:const, nil, :TkOp),
          s(:str, ":")),
        s(:array,
          s(:sym, :TkfLPAREN),
          s(:const, nil, :Token),
          s(:str, "(")),
        s(:array,
          s(:sym, :TkfLBRACK),
          s(:const, nil, :Token),
          s(:str, "[")),
        s(:array,
          s(:sym, :TkfLBRACE),
          s(:const, nil, :Token),
          s(:str, "{")),
        s(:array,
          s(:sym, :TkSYMBEG),
          s(:const, nil, :Token),
          s(:str, ":")),
        s(:array,
          s(:sym, :TkAMPER),
          s(:const, nil, :TkOp),
          s(:str, "&")),
        s(:array,
          s(:sym, :TkGT),
          s(:const, nil, :TkOp),
          s(:str, ">")),
        s(:array,
          s(:sym, :TkLT),
          s(:const, nil, :TkOp),
          s(:str, "<")),
        s(:array,
          s(:sym, :TkPLUS),
          s(:const, nil, :TkOp),
          s(:str, "+")),
        s(:array,
          s(:sym, :TkSTAR),
          s(:const, nil, :TkOp),
          s(:str, "*")),
        s(:array,
          s(:sym, :TkMINUS),
          s(:const, nil, :TkOp),
          s(:str, "-")),
        s(:array,
          s(:sym, :TkMULT),
          s(:const, nil, :TkOp),
          s(:str, "*")),
        s(:array,
          s(:sym, :TkDIV),
          s(:const, nil, :TkOp),
          s(:str, "/")),
        s(:array,
          s(:sym, :TkMOD),
          s(:const, nil, :TkOp),
          s(:str, "%")),
        s(:array,
          s(:sym, :TkBITOR),
          s(:const, nil, :TkOp),
          s(:str, "|")),
        s(:array,
          s(:sym, :TkBITXOR),
          s(:const, nil, :TkOp),
          s(:str, "^")),
        s(:array,
          s(:sym, :TkBITAND),
          s(:const, nil, :TkOp),
          s(:str, "&")),
        s(:array,
          s(:sym, :TkBITNOT),
          s(:const, nil, :TkOp),
          s(:str, "~")),
        s(:array,
          s(:sym, :TkNOTOP),
          s(:const, nil, :TkOp),
          s(:str, "!")),
        s(:array,
          s(:sym, :TkBACKQUOTE),
          s(:const, nil, :TkOp),
          s(:str, "`")),
        s(:array,
          s(:sym, :TkASSIGN),
          s(:const, nil, :Token),
          s(:str, "=")),
        s(:array,
          s(:sym, :TkDOT),
          s(:const, nil, :Token),
          s(:str, ".")),
        s(:array,
          s(:sym, :TkLPAREN),
          s(:const, nil, :Token),
          s(:str, "(")),
        s(:array,
          s(:sym, :TkLBRACK),
          s(:const, nil, :Token),
          s(:str, "[")),
        s(:array,
          s(:sym, :TkLBRACE),
          s(:const, nil, :Token),
          s(:str, "{")),
        s(:array,
          s(:sym, :TkRPAREN),
          s(:const, nil, :Token),
          s(:str, ")")),
        s(:array,
          s(:sym, :TkRBRACK),
          s(:const, nil, :Token),
          s(:str, "]")),
        s(:array,
          s(:sym, :TkRBRACE),
          s(:const, nil, :Token),
          s(:str, "}")),
        s(:array,
          s(:sym, :TkCOMMA),
          s(:const, nil, :Token),
          s(:str, ",")),
        s(:array,
          s(:sym, :TkSEMICOLON),
          s(:const, nil, :Token),
          s(:str, ";")),
        s(:array,
          s(:sym, :TkCOMMENT),
          s(:const, nil, :TkVal)),
        s(:array,
          s(:sym, :TkSPACE),
          s(:const, nil, :Token),
          s(:str, " ")),
        s(:array,
          s(:sym, :TkNL),
          s(:const, nil, :Token),
          s(:str, "\n")),
        s(:array,
          s(:sym, :TkEND_OF_SCRIPT)),
        s(:array,
          s(:sym, :TkBACKSLASH),
          s(:const, nil, :TkUnknownChar),
          s(:str, "\\")),
        s(:array,
          s(:sym, :TkAT),
          s(:const, nil, :TkUnknownChar),
          s(:str, "@")),
        s(:array,
          s(:sym, :TkDOLLAR),
          s(:const, nil, :TkUnknownChar),
          s(:str, "$")))),
    s(:casgn, nil, :TkReading2Token,
      s(:hash)),
    s(:casgn, nil, :TkToken2Reading,
      s(:hash)),
    s(:casgn, nil, :TkSymbol2Token,
      s(:hash)),
    s(:defs,
      s(:self), :def_token,
      s(:args,
        s(:arg, :token_n),
        s(:optarg, :super_token,
          s(:const, nil, :Token)),
        s(:optarg, :reading,
          s(:nil)),
        s(:restarg, :opts)),
      s(:begin,
        s(:if,
          s(:send,
            s(:lvar, :token_n), :kind_of?,
            s(:const, nil, :Symbol)),
          s(:lvasgn, :token_n,
            s(:send,
              s(:lvar, :token_n), :id2name)), nil),
        s(:if,
          s(:send, nil, :const_defined?,
            s(:lvar, :token_n)),
          s(:send,
            s(:const, nil, :IRB), :fail,
            s(:const, nil, :AlreadyDefinedToken),
            s(:lvar, :token_n)), nil),
        s(:lvasgn, :token_c,
          s(:send, nil, :eval,
            s(:dstr,
              s(:str, "class "),
              s(:begin,
                s(:lvar, :token_n)),
              s(:str, " < "),
              s(:begin,
                s(:lvar, :super_token)),
              s(:str, "; end; "),
              s(:begin,
                s(:lvar, :token_n))))),
        s(:if,
          s(:lvar, :reading),
          s(:begin,
            s(:send,
              s(:const, nil, :TkToken2Reading), :[]=,
              s(:lvar, :token_c),
              s(:lvar, :reading)),
            s(:if,
              s(:send,
                s(:const, nil, :TkReading2Token), :[],
                s(:lvar, :reading)),
              s(:return), nil),
            s(:if,
              s(:send,
                s(:lvar, :opts), :empty?),
              s(:send,
                s(:const, nil, :TkReading2Token), :[]=,
                s(:lvar, :reading),
                s(:array,
                  s(:lvar, :token_c))),
              s(:send,
                s(:const, nil, :TkReading2Token), :[]=,
                s(:lvar, :reading),
                s(:send,
                  s(:array,
                    s(:lvar, :token_c)), :concat,
                  s(:lvar, :opts))))), nil),
        s(:send,
          s(:const, nil, :TkSymbol2Token), :[]=,
          s(:send,
            s(:lvar, :token_n), :intern),
          s(:lvar, :token_c)))),
    s(:for,
      s(:lvasgn, :defs),
      s(:const, nil, :TokenDefinitions),
      s(:send, nil, :def_token,
        s(:splat,
          s(:lvar, :defs)))),
    s(:send, nil, :def_token,
      s(:sym, :TkRD_COMMENT),
      s(:const, nil, :TkCOMMENT)),
    s(:casgn, nil, :NEWLINE_TOKEN,
      s(:send,
        s(:const, nil, :TkNL), :new,
        s(:int, 0),
        s(:int, 0),
        s(:int, 0),
        s(:str, "\n"))),
    s(:class,
      s(:const, nil, :TkSYMBOL), nil,
      s(:def, :to_sym,
        s(:args),
        s(:or_asgn,
          s(:ivasgn, :@sym),
          s(:send,
            s(:send,
              s(:send, nil, :text), :[],
              s(:irange,
                s(:int, 1),
                s(:int, -1))), :intern))))))

s(:class,
  s(:const,
    s(:const,
      s(:const, nil, :RDoc), :Markup), :ListItem), nil,
  s(:begin,
    s(:send, nil, :attr_accessor,
      s(:sym, :label)),
    s(:send, nil, :attr_reader,
      s(:sym, :parts)),
    s(:def, :initialize,
      s(:args,
        s(:optarg, :label,
          s(:nil)),
        s(:restarg, :parts)),
      s(:begin,
        s(:ivasgn, :@label,
          s(:lvar, :label)),
        s(:ivasgn, :@parts,
          s(:array)),
        s(:send,
          s(:ivar, :@parts), :concat,
          s(:lvar, :parts)))),
    s(:def, :<<,
      s(:args,
        s(:arg, :part)),
      s(:send,
        s(:ivar, :@parts), :<<,
        s(:lvar, :part))),
    s(:def, :==,
      s(:args,
        s(:arg, :other)),
      s(:and,
        s(:and,
          s(:send,
            s(:send,
              s(:self), :class), :==,
            s(:send,
              s(:lvar, :other), :class)),
          s(:send,
            s(:ivar, :@label), :==,
            s(:send,
              s(:lvar, :other), :label))),
        s(:send,
          s(:ivar, :@parts), :==,
          s(:send,
            s(:lvar, :other), :parts)))),
    s(:def, :accept,
      s(:args,
        s(:arg, :visitor)),
      s(:begin,
        s(:send,
          s(:lvar, :visitor), :accept_list_item_start,
          s(:self)),
        s(:block,
          s(:send,
            s(:ivar, :@parts), :each),
          s(:args,
            s(:arg, :part)),
          s(:send,
            s(:lvar, :part), :accept,
            s(:lvar, :visitor))),
        s(:send,
          s(:lvar, :visitor), :accept_list_item_end,
          s(:self)))),
    s(:def, :empty?,
      s(:args),
      s(:send,
        s(:ivar, :@parts), :empty?)),
    s(:def, :length,
      s(:args),
      s(:send,
        s(:ivar, :@parts), :length)),
    s(:def, :pretty_print,
      s(:args,
        s(:arg, :q)),
      s(:block,
        s(:send,
          s(:lvar, :q), :group,
          s(:int, 2),
          s(:str, "[item: "),
          s(:str, "]")),
        s(:args),
        s(:begin,
          s(:case,
            s(:ivar, :@label),
            s(:when,
              s(:const, nil, :Array),
              s(:begin,
                s(:send,
                  s(:lvar, :q), :pp,
                  s(:ivar, :@label)),
                s(:send,
                  s(:lvar, :q), :text,
                  s(:str, ";")),
                s(:send,
                  s(:lvar, :q), :breakable))),
            s(:when,
              s(:const, nil, :String),
              s(:begin,
                s(:send,
                  s(:lvar, :q), :pp,
                  s(:ivar, :@label)),
                s(:send,
                  s(:lvar, :q), :text,
                  s(:str, ";")),
                s(:send,
                  s(:lvar, :q), :breakable))), nil),
          s(:block,
            s(:send,
              s(:lvar, :q), :seplist,
              s(:ivar, :@parts)),
            s(:args,
              s(:arg, :part)),
            s(:send,
              s(:lvar, :q), :pp,
              s(:lvar, :part)))))),
    s(:def, :push,
      s(:args,
        s(:restarg, :parts)),
      s(:send,
        s(:ivar, :@parts), :concat,
        s(:lvar, :parts)))))

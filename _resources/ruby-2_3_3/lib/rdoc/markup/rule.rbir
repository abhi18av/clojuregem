s(:class,
  s(:const,
    s(:const,
      s(:const, nil, :RDoc), :Markup), :Rule),
  s(:send,
    s(:const, nil, :Struct), :new,
    s(:sym, :weight)),
  s(:begin,
    s(:def, :accept,
      s(:args,
        s(:arg, :visitor)),
      s(:send,
        s(:lvar, :visitor), :accept_rule,
        s(:self))),
    s(:def, :pretty_print,
      s(:args,
        s(:arg, :q)),
      s(:block,
        s(:send,
          s(:lvar, :q), :group,
          s(:int, 2),
          s(:str, "[rule:"),
          s(:str, "]")),
        s(:args),
        s(:send,
          s(:lvar, :q), :pp,
          s(:send, nil, :weight))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "optparse")),
  s(:send, nil, :require,
    s(:str, "date")),
  s(:block,
    s(:send,
      s(:const, nil, :OptionParser), :accept,
      s(:const, nil, :DateTime)),
    s(:args,
      s(:arg, :s)),
    s(:kwbegin,
      s(:rescue,
        s(:if,
          s(:lvar, :s),
          s(:send,
            s(:const, nil, :DateTime), :parse,
            s(:lvar, :s)), nil),
        s(:resbody,
          s(:array,
            s(:const, nil, :ArgumentError)), nil,
          s(:send, nil, :raise,
            s(:const,
              s(:const, nil, :OptionParser), :InvalidArgument),
            s(:lvar, :s))), nil))),
  s(:block,
    s(:send,
      s(:const, nil, :OptionParser), :accept,
      s(:const, nil, :Date)),
    s(:args,
      s(:arg, :s)),
    s(:kwbegin,
      s(:rescue,
        s(:if,
          s(:lvar, :s),
          s(:send,
            s(:const, nil, :Date), :parse,
            s(:lvar, :s)), nil),
        s(:resbody,
          s(:array,
            s(:const, nil, :ArgumentError)), nil,
          s(:send, nil, :raise,
            s(:const,
              s(:const, nil, :OptionParser), :InvalidArgument),
            s(:lvar, :s))), nil))))

s(:module,
  s(:const, nil, :DRb),
  s(:class,
    s(:const, nil, :DRbObject), nil,
    s(:begin,
      s(:def, :==,
        s(:args,
          s(:arg, :other)),
        s(:begin,
          s(:if,
            s(:send,
              s(:const, nil, :DRbObject), :===,
              s(:lvar, :other)), nil,
            s(:return,
              s(:false))),
          s(:and,
            s(:begin,
              s(:send,
                s(:ivar, :@ref), :==,
                s(:send,
                  s(:lvar, :other), :__drbref))),
            s(:begin,
              s(:send,
                s(:ivar, :@uri), :==,
                s(:send,
                  s(:lvar, :other), :__drburi)))))),
      s(:def, :hash,
        s(:args),
        s(:send,
          s(:array,
            s(:ivar, :@uri),
            s(:ivar, :@ref)), :hash)),
      s(:alias,
        s(:sym, :eql?),
        s(:sym, :==)))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "rexml/child")),
  s(:module,
    s(:const, nil, :REXML),
    s(:class,
      s(:const, nil, :Comment),
      s(:const, nil, :Child),
      s(:begin,
        s(:send, nil, :include,
          s(:const, nil, :Comparable)),
        s(:casgn, nil, :START,
          s(:str, "<!--")),
        s(:casgn, nil, :STOP,
          s(:str, "-->")),
        s(:send, nil, :attr_accessor,
          s(:sym, :string)),
        s(:def, :initialize,
          s(:args,
            s(:arg, :first),
            s(:optarg, :second,
              s(:nil))),
          s(:begin,
            s(:super,
              s(:lvar, :second)),
            s(:if,
              s(:send,
                s(:lvar, :first), :kind_of?,
                s(:const, nil, :String)),
              s(:ivasgn, :@string,
                s(:lvar, :first)),
              s(:if,
                s(:send,
                  s(:lvar, :first), :kind_of?,
                  s(:const, nil, :Comment)),
                s(:ivasgn, :@string,
                  s(:send,
                    s(:lvar, :first), :string)), nil)))),
        s(:def, :clone,
          s(:args),
          s(:send,
            s(:const, nil, :Comment), :new,
            s(:self))),
        s(:def, :write,
          s(:args,
            s(:arg, :output),
            s(:optarg, :indent,
              s(:int, -1)),
            s(:optarg, :transitive,
              s(:false)),
            s(:optarg, :ie_hack,
              s(:false))),
          s(:begin,
            s(:send,
              s(:const, nil, :Kernel), :warn,
              s(:str, "Comment.write is deprecated.  See REXML::Formatters")),
            s(:send, nil, :indent,
              s(:lvar, :output),
              s(:lvar, :indent)),
            s(:send,
              s(:lvar, :output), :<<,
              s(:const, nil, :START)),
            s(:send,
              s(:lvar, :output), :<<,
              s(:ivar, :@string)),
            s(:send,
              s(:lvar, :output), :<<,
              s(:const, nil, :STOP)))),
        s(:alias,
          s(:sym, :to_s),
          s(:sym, :string)),
        s(:def, :<=>,
          s(:args,
            s(:arg, :other)),
          s(:send,
            s(:send,
              s(:lvar, :other), :to_s), :<=>,
            s(:ivar, :@string))),
        s(:def, :==,
          s(:args,
            s(:arg, :other)),
          s(:and,
            s(:send,
              s(:lvar, :other), :kind_of?,
              s(:const, nil, :Comment)),
            s(:send,
              s(:begin,
                s(:send,
                  s(:lvar, :other), :<=>,
                  s(:self))), :==,
              s(:int, 0)))),
        s(:def, :node_type,
          s(:args),
          s(:sym, :comment))))))

s(:begin,
  s(:lvasgn, :freq,
    s(:hash)),
  s(:block,
    s(:send,
      s(:const, nil, :ARGF), :each_line),
    s(:args,
      s(:arg, :line)),
    s(:for,
      s(:lvasgn, :word),
      s(:send,
        s(:lvar, :line), :split,
        s(:regexp,
          s(:str, "\\W+"),
          s(:regopt))),
      s(:begin,
        s(:or_asgn,
          s(:send,
            s(:lvar, :freq), :[],
            s(:lvar, :word)),
          s(:int, 0)),
        s(:op_asgn,
          s(:send,
            s(:lvar, :freq), :[],
            s(:lvar, :word)), :+,
          s(:int, 1))))),
  s(:for,
    s(:lvasgn, :word),
    s(:send,
      s(:send,
        s(:lvar, :freq), :keys), :sort),
    s(:send, nil, :printf,
      s(:str, "%s -- %d\n"),
      s(:lvar, :word),
      s(:send,
        s(:lvar, :freq), :[],
        s(:lvar, :word)))))

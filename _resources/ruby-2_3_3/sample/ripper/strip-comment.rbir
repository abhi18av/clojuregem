s(:begin,
  s(:send, nil, :require,
    s(:str, "ripper/filter")),
  s(:class,
    s(:const, nil, :CommentStripper),
    s(:const,
      s(:const, nil, :Ripper), :Filter),
    s(:begin,
      s(:defs,
        s(:const, nil, :CommentStripper), :strip,
        s(:args,
          s(:arg, :src)),
        s(:send,
          s(:send, nil, :new,
            s(:lvar, :src)), :parse,
          s(:nil))),
      s(:def, :on_default,
        s(:args,
          s(:arg, :event),
          s(:arg, :token),
          s(:arg, :data)),
        s(:send, nil, :print,
          s(:lvar, :token))),
      s(:def, :on_comment,
        s(:args,
          s(:arg, :token),
          s(:arg, :data)),
        s(:send, nil, :puts)))),
  s(:send,
    s(:const, nil, :CommentStripper), :strip,
    s(:const, nil, :ARGF)))

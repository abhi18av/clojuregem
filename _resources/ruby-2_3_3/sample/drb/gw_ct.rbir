s(:begin,
  s(:send, nil, :require,
    s(:str, "drb/drb")),
  s(:class,
    s(:const, nil, :Foo), nil,
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :DRbUndumped)),
      s(:def, :foo,
        s(:args,
          s(:arg, :n)),
        s(:send,
          s(:lvar, :n), :+,
          s(:lvar, :n))),
      s(:def, :bar,
        s(:args,
          s(:arg, :n)),
        s(:send,
          s(:yield,
            s(:lvar, :n)), :+,
          s(:yield,
            s(:lvar, :n)))))),
  s(:send,
    s(:const, nil, :DRb), :start_service,
    s(:nil)),
  s(:send, nil, :puts,
    s(:send,
      s(:const, nil, :DRb), :uri)),
  s(:lvasgn, :ro,
    s(:send,
      s(:const, nil, :DRbObject), :new,
      s(:nil),
      s(:send,
        s(:const, nil, :ARGV), :shift))),
  s(:send,
    s(:lvar, :ro), :[]=,
    s(:sym, :tcp),
    s(:send,
      s(:const, nil, :Foo), :new)),
  s(:send, nil, :gets),
  s(:lvasgn, :it,
    s(:send,
      s(:lvar, :ro), :[],
      s(:sym, :unix))),
  s(:send, nil, :p,
    s(:array,
      s(:lvar, :it),
      s(:send,
        s(:lvar, :it), :foo,
        s(:int, 1)))),
  s(:send, nil, :gets),
  s(:send, nil, :p,
    s(:block,
      s(:send,
        s(:lvar, :it), :bar,
        s(:str, "2")),
      s(:args,
        s(:arg, :n)),
      s(:send,
        s(:lvar, :n), :*,
        s(:int, 3)))),
  s(:send, nil, :gets))

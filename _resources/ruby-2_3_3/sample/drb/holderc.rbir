s(:begin,
  s(:send, nil, :require,
    s(:str, "drb/drb")),
  s(:kwbegin,
    s(:rescue,
      s(:lvasgn, :there,
        s(:or,
          s(:send,
            s(:const, nil, :ARGV), :shift),
          s(:send, nil, :raise))),
      s(:resbody, nil, nil,
        s(:begin,
          s(:send,
            s(:gvar, :$stderr), :puts,
            s(:dstr,
              s(:str, "usage: "),
              s(:begin,
                s(:gvar, :$0)),
              s(:str, " <server_uri>"))),
          s(:send, nil, :exit,
            s(:int, 1)))), nil)),
  s(:send,
    s(:const, nil, :DRb), :start_service),
  s(:lvasgn, :ro,
    s(:send,
      s(:const, nil, :DRbObject), :new,
      s(:nil),
      s(:lvar, :there))),
  s(:lvasgn, :ary,
    s(:array)),
  s(:block,
    s(:send,
      s(:int, 10), :times),
    s(:args),
    s(:send,
      s(:lvar, :ary), :push,
      s(:send,
        s(:lvar, :ro), :gen))),
  s(:if,
    s(:gvar, :$DEBUG),
    s(:send, nil, :sleep,
      s(:int, 5)), nil),
  s(:block,
    s(:send,
      s(:lvar, :ary), :each),
    s(:args,
      s(:arg, :e)),
    s(:send, nil, :p,
      s(:send,
        s(:lvar, :e), :sample,
        s(:array,
          s(:int, 1))))))

s(:begin,
  s(:lvasgn, :max,
    s(:send, nil, :Integer,
      s(:or,
        s(:send,
          s(:const, nil, :ARGV), :shift),
        s(:int, 100)))),
  s(:lvasgn, :sieve,
    s(:array)),
  s(:for,
    s(:lvasgn, :i),
    s(:irange,
      s(:int, 2),
      s(:lvar, :max)),
    s(:send,
      s(:lvar, :sieve), :[]=,
      s(:lvar, :i),
      s(:lvar, :i))),
  s(:for,
    s(:lvasgn, :i),
    s(:irange,
      s(:int, 2),
      s(:send,
        s(:const, nil, :Math), :sqrt,
        s(:lvar, :max))),
    s(:begin,
      s(:if,
        s(:send,
          s(:lvar, :sieve), :[],
          s(:lvar, :i)), nil,
        s(:next)),
      s(:block,
        s(:send,
          s(:begin,
            s(:send,
              s(:lvar, :i), :*,
              s(:lvar, :i))), :step,
          s(:lvar, :max),
          s(:lvar, :i)),
        s(:args,
          s(:arg, :j)),
        s(:send,
          s(:lvar, :sieve), :[]=,
          s(:lvar, :j),
          s(:nil))))),
  s(:send, nil, :puts,
    s(:send,
      s(:send,
        s(:lvar, :sieve), :compact), :join,
      s(:str, ", "))))

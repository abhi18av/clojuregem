s(:begin,
  s(:lvasgn, :_,
    s(:str, "s %sSATISFIABLE")),
  s(:send, nil, :puts,
    s(:send, nil, :eval,
      s(:send,
        s(:block,
          s(:send,
            s(:send,
              s(:gvar, :$<), :read), :gsub,
            s(:regexp,
              s(:str, ".*p.*?(\\d+).*?$|\\d+"),
              s(:regopt, :m))),
          s(:args),
          s(:if,
            s(:nth_ref, 1),
            s(:send,
              s(:array,
                s(:str, "?-*"),
                s(:str, "+'=-'=~/\#{'(-?)'*"),
                s(:str, "}-*=(?=")), :*,
              s(:nth_ref, 1)),
            s(:if,
              s(:send,
                s(:back_ref, :$&), :>,
                s(:str, "0")),
              s(:dstr,
                s(:str, "\\"),
                s(:back_ref, :$&),
                s(:str, "$|")),
              s(:str, "$)(?=")))), :+,
        s(:str, ")/x?[_%p%i=0,[*$~].map{|x|x>?-?:v:eval(x+?1)*i-=1}*\" \"]:_%:UN")))))

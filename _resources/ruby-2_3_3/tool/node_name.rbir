s(:while,
  s(:send, nil, :gets),
  s(:if,
    s(:iflipflop,
      s(:send,
        s(:regexp,
          s(:str, "enum node_type \\{"),
          s(:regopt)), :~),
      s(:send,
        s(:regexp,
          s(:str, "^\\};"),
          s(:regopt)), :~)),
    s(:and,
      s(:send,
        s(:regexp,
          s(:str, "(NODE_.+),"),
          s(:regopt)), :~),
      s(:send, nil, :puts,
        s(:dstr,
          s(:str, "      case "),
          s(:begin,
            s(:nth_ref, 1)),
          s(:str, ":\n\treturn \""),
          s(:begin,
            s(:nth_ref, 1)),
          s(:str, "\";")))), nil))

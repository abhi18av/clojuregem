s(:begin,
  s(:gvasgn, :$file,
    s(:send,
      s(:const, nil, :ARGV), :[],
      s(:int, 0))),
  s(:gvasgn, :$str,
    s(:send,
      s(:send,
        s(:const, nil, :ARGF), :read), :sub,
      s(:regexp,
        s(:str, "^__END__.*\\z"),
        s(:regopt, :m)),
      s(:str, ""))),
  s(:send, nil, :puts,
    s(:send,
      s(:str, "# "), :+,
      s(:send,
        s(:str, "-"), :*,
        s(:int, 70)))),
  s(:send, nil, :puts,
    s(:str, "# target program: ")),
  s(:send, nil, :puts,
    s(:send,
      s(:str, "# "), :+,
      s(:send,
        s(:str, "-"), :*,
        s(:int, 70)))),
  s(:send, nil, :puts,
    s(:gvar, :$str)),
  s(:send, nil, :puts,
    s(:send,
      s(:str, "# "), :+,
      s(:send,
        s(:str, "-"), :*,
        s(:int, 70)))),
  s(:gvasgn, :$parsed,
    s(:send,
      s(:const,
        s(:const, nil, :RubyVM), :InstructionSequence), :compile_file,
      s(:gvar, :$file))),
  s(:send, nil, :puts,
    s(:str, "# disasm result: ")),
  s(:send, nil, :puts,
    s(:send,
      s(:str, "# "), :+,
      s(:send,
        s(:str, "-"), :*,
        s(:int, 70)))),
  s(:send, nil, :puts,
    s(:send,
      s(:gvar, :$parsed), :disasm)),
  s(:send, nil, :puts,
    s(:send,
      s(:str, "# "), :+,
      s(:send,
        s(:str, "-"), :*,
        s(:int, 70)))))

s(:block,
  s(:send,
    s(:send,
      s(:send,
        s(:const, nil, :File), :read,
        s(:send,
          s(:const, nil, :ARGV), :[],
          s(:int, 0))), :scan,
      s(:regexp,
        s(:str, "/\\*.*?\\*/"),
        s(:regopt, :m))), :grep,
    s(:regexp,
      s(:str, "ruby"),
      s(:regopt))),
  s(:args,
    s(:arg, :comment)),
  s(:begin,
    s(:send,
      s(:send,
        s(:lvar, :comment), :gsub!,
        s(:regexp,
          s(:str, "^(/\\*|[ ]*)|\\*/$"),
          s(:regopt)),
        s(:str, "")), :strip!),
    s(:send, nil, :puts),
    s(:block,
      s(:send,
        s(:send,
          s(:lvar, :comment), :each_line), :with_index),
      s(:args,
        s(:arg, :line),
        s(:arg, :i)),
      s(:if,
        s(:send,
          s(:lvar, :i), :==,
          s(:int, 0)),
        s(:send, nil, :puts,
          s(:dstr,
            s(:str, "=== "),
            s(:begin,
              s(:send,
                s(:lvar, :line), :chomp)))),
        s(:send, nil, :puts,
          s(:send,
            s(:lvar, :line), :gsub,
            s(:regexp,
              s(:str, "`([^`]*)`"),
              s(:regopt)),
            s(:str, "(({\\1}))")))))))

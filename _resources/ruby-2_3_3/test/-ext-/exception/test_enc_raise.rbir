s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:send, nil, :require,
    s(:str, "-test-/exception")),
  s(:module,
    s(:const, nil, :Bug),
    s(:class,
      s(:const, nil, :TestException),
      s(:const,
        s(:const,
          s(:const, nil, :Test), :Unit), :TestCase),
      s(:def, :test_enc_raise,
        s(:args),
        s(:begin,
          s(:lvasgn, :feature5650,
            s(:str, "[ruby-core:41160]")),
          s(:block,
            s(:send,
              s(:send,
                s(:const, nil, :Encoding), :list), :each),
            s(:args,
              s(:arg, :enc)),
            s(:begin,
              s(:if,
                s(:send,
                  s(:lvar, :enc), :ascii_compatible?), nil,
                s(:next)),
              s(:lvasgn, :e,
                s(:block,
                  s(:send, nil, :assert_raise,
                    s(:const,
                      s(:const, nil, :Bug), :Exception)),
                  s(:args),
                  s(:send,
                    s(:const,
                      s(:const, nil, :Bug), :Exception), :enc_raise,
                    s(:lvar, :enc),
                    s(:str, "[Feature #5650]")))),
              s(:send, nil, :assert_equal,
                s(:lvar, :enc),
                s(:send,
                  s(:send,
                    s(:lvar, :e), :message), :encoding),
                s(:lvar, :feature5650)))))))))

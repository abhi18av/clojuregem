s(:begin,
  s(:send, nil, :require,
    s(:str, "-test-/method")),
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:class,
    s(:const, nil, :TestMethod),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:class,
      s(:const, nil, :TestArity),
      s(:const,
        s(:const,
          s(:const, nil, :Test), :Unit), :TestCase),
      s(:begin,
        s(:class,
          s(:const, nil, :A), nil,
          s(:begin,
            s(:def, :foo0,
              s(:args), nil),
            s(:def, :foom1,
              s(:args,
                s(:restarg, :a)), nil),
            s(:def, :foom2,
              s(:args,
                s(:arg, :a),
                s(:restarg, :b)), nil),
            s(:def, :foo1,
              s(:args,
                s(:arg, :a)), nil),
            s(:def, :foo2,
              s(:args,
                s(:arg, :a),
                s(:arg, :b)), nil))),
        s(:class,
          s(:const, nil, :B),
          s(:const, nil, :A),
          s(:send, nil, :private,
            s(:sym, :foo1),
            s(:sym, :foo2))),
        s(:casgn, nil, :METHODS,
          s(:hash,
            s(:pair,
              s(:sym, :foo0),
              s(:int, 0)),
            s(:pair,
              s(:sym, :foo1),
              s(:int, 1)),
            s(:pair,
              s(:sym, :foo2),
              s(:int, 2)),
            s(:pair,
              s(:sym, :foom1),
              s(:int, -1)),
            s(:pair,
              s(:sym, :foom2),
              s(:int, -2)))),
        s(:def, :test_base,
          s(:args),
          s(:block,
            s(:send,
              s(:const, nil, :METHODS), :each),
            s(:args,
              s(:arg, :name),
              s(:arg, :arity)),
            s(:send, nil, :assert_equal,
              s(:lvar, :arity),
              s(:send,
                s(:const,
                  s(:const, nil, :Bug), :Method), :mod_method_arity,
                s(:const, nil, :A),
                s(:lvar, :name)),
              s(:dstr,
                s(:str, "A#"),
                s(:begin,
                  s(:lvar, :name)))))),
        s(:def, :test_zsuper,
          s(:args),
          s(:block,
            s(:send,
              s(:const, nil, :METHODS), :each),
            s(:args,
              s(:arg, :name),
              s(:arg, :arity)),
            s(:send, nil, :assert_equal,
              s(:lvar, :arity),
              s(:send,
                s(:const,
                  s(:const, nil, :Bug), :Method), :mod_method_arity,
                s(:const, nil, :B),
                s(:lvar, :name)),
              s(:dstr,
                s(:str, "B#"),
                s(:begin,
                  s(:lvar, :name))))))))))

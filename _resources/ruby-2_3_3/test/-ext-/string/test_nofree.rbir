s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:class,
    s(:const, nil, :Test_StringNoFree),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:def, :test_no_memory_leak,
      s(:args),
      s(:begin,
        s(:lvasgn, :bug10942,
          s(:str, "[ruby-core:68436] [Bug #10942] no leak on nofree string")),
        s(:lvasgn, :code,
          s(:str, ".times {Bug::String.nofree << \"a\" * 100}")),
        s(:send, nil, :assert_no_memory_leak,
          s(:array,
            s(:str, "-r-test-/string")),
          s(:dstr,
            s(:str, "100_000"),
            s(:begin,
              s(:lvar, :code))),
          s(:dstr,
            s(:str, "1_000_000"),
            s(:begin,
              s(:lvar, :code))),
          s(:lvar, :bug10942),
          s(:hash,
            s(:pair,
              s(:sym, :rss),
              s(:true))))))))

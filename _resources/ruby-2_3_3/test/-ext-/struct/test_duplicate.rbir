s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:send, nil, :require,
    s(:str, "-test-/struct")),
  s(:class,
    s(:const,
      s(:const,
        s(:const, nil, :Bug), :Struct), :Test_Duplicate),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:begin,
      s(:def, :test_new_dupilicate,
        s(:args),
        s(:begin,
          s(:lvasgn, :bug12291,
            s(:str, "[ruby-core:74971] [Bug #12291]")),
          s(:block,
            s(:send, nil, :assert_raise_with_message,
              s(:const, nil, :ArgumentError),
              s(:regexp,
                s(:str, "duplicate member"),
                s(:regopt)),
              s(:lvar, :bug12291)),
            s(:args),
            s(:send,
              s(:const,
                s(:const, nil, :Bug), :Struct), :new_duplicate,
              s(:nil),
              s(:str, "a"))),
          s(:block,
            s(:send, nil, :assert_raise_with_message,
              s(:const, nil, :ArgumentError),
              s(:regexp,
                s(:str, "duplicate member"),
                s(:regopt)),
              s(:lvar, :bug12291)),
            s(:args),
            s(:send,
              s(:const,
                s(:const, nil, :Bug), :Struct), :new_duplicate,
              s(:str, "X"),
              s(:str, "a"))))),
      s(:def, :test_new_dupilicate_under,
        s(:args),
        s(:begin,
          s(:lvasgn, :bug12291,
            s(:str, "[ruby-core:74971] [Bug #12291]")),
          s(:block,
            s(:send, nil, :assert_raise_with_message,
              s(:const, nil, :ArgumentError),
              s(:regexp,
                s(:str, "duplicate member"),
                s(:regopt)),
              s(:lvar, :bug12291)),
            s(:args),
            s(:send,
              s(:const,
                s(:const, nil, :Bug), :Struct), :new_duplicate_under,
              s(:str, "x"),
              s(:str, "a"))))))))

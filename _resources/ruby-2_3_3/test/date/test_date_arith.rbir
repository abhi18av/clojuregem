s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:send, nil, :require,
    s(:str, "date")),
  s(:class,
    s(:const, nil, :TestDateArith),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:begin,
      s(:def, :new_offset,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :DateTime), :new,
              s(:int, 2002),
              s(:int, 3),
              s(:int, 14))),
          s(:send, nil, :assert_equal,
            s(:send, nil, :Rational,
              s(:int, 9),
              s(:int, 24)),
            s(:send,
              s(:send,
                s(:lvar, :d), :new_offset,
                s(:send, nil, :Rational,
                  s(:int, 9),
                  s(:int, 24))), :offset)),
          s(:send, nil, :assert_equal,
            s(:send, nil, :Rational,
              s(:int, 9),
              s(:int, 24)),
            s(:send,
              s(:send,
                s(:lvar, :d), :new_offset,
                s(:str, "+0900")), :offset)))),
      s(:def, :test__plus,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 28)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:int, 0))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 3),
              s(:int, 1)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:send,
                s(:send,
                  s(:int, 1), :to_r), :/,
                s(:int, 2)))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29),
              s(:int, 12),
              s(:int, 0),
              s(:int, 0)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday),
              s(:send,
                s(:lvar, :d), :hour),
              s(:send,
                s(:lvar, :d), :min),
              s(:send,
                s(:lvar, :d), :sec))))),
      s(:def, :test__plus__ex,
        s(:args),
        s(:begin,
          s(:lvasgn, :e,
            s(:const, nil, :TypeError)),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:str, "foo"))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:str, "foo"))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:send,
                s(:const, nil, :Time), :mktime,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :+,
              s(:send,
                s(:const, nil, :Time), :mktime,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)))))),
      s(:def, :test__minus,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :-,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 3),
              s(:int, 2)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :-,
              s(:int, 0))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 3),
              s(:int, 1)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :-,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :-,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)))),
          s(:send, nil, :assert_equal,
            s(:int, 1),
            s(:lvar, :d)),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :-,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)))),
          s(:send, nil, :assert_equal,
            s(:int, -1),
            s(:lvar, :d)),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :-,
              s(:send,
                s(:send,
                  s(:int, 1), :to_r), :/,
                s(:int, 2)))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29),
              s(:int, 12),
              s(:int, 0),
              s(:int, 0)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday),
              s(:send,
                s(:lvar, :d), :hour),
              s(:send,
                s(:lvar, :d), :min),
              s(:send,
                s(:lvar, :d), :sec))))),
      s(:def, :test__minus__ex,
        s(:args),
        s(:begin,
          s(:lvasgn, :e,
            s(:const, nil, :TypeError)),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :-,
              s(:str, "foo"))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :-,
              s(:str, "foo"))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :-,
              s(:send,
                s(:const, nil, :Time), :mktime,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:lvar, :e)),
            s(:args),
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :-,
              s(:send,
                s(:const, nil, :Time), :mktime,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)))))),
      s(:def, :test__compare,
        s(:args),
        s(:begin,
          s(:send, nil, :assert_equal,
            s(:int, 0),
            s(:begin,
              s(:send,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 1)), :<=>,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 1))))),
          s(:send, nil, :assert_equal,
            s(:int, -1),
            s(:begin,
              s(:send,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 1)), :<=>,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 2))))),
          s(:send, nil, :assert_equal,
            s(:int, 1),
            s(:begin,
              s(:send,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 2)), :<=>,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2000),
                  s(:int, 1),
                  s(:int, 1))))),
          s(:send, nil, :assert_equal,
            s(:int, 0),
            s(:begin,
              s(:send,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2001),
                  s(:int, 1),
                  s(:int, 4),
                  s(:const,
                    s(:const, nil, :Date), :JULIAN)), :<=>,
                s(:send,
                  s(:const, nil, :Date), :new,
                  s(:int, 2001),
                  s(:int, 1),
                  s(:int, 17),
                  s(:const,
                    s(:const, nil, :Date), :GREGORIAN))))),
          s(:send, nil, :assert_equal,
            s(:int, 0),
            s(:begin,
              s(:send,
                s(:send,
                  s(:const, nil, :DateTime), :new,
                  s(:int, 2001),
                  s(:int, 1),
                  s(:int, 4),
                  s(:int, 0),
                  s(:int, 0),
                  s(:int, 0),
                  s(:int, 0),
                  s(:const,
                    s(:const, nil, :Date), :JULIAN)), :<=>,
                s(:send,
                  s(:const, nil, :DateTime), :new,
                  s(:int, 2001),
                  s(:int, 1),
                  s(:int, 17),
                  s(:int, 0),
                  s(:int, 0),
                  s(:int, 0),
                  s(:int, 0),
                  s(:const,
                    s(:const, nil, :Date), :GREGORIAN))))))),
      s(:def, :test_prev,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2000),
              s(:int, 1),
              s(:int, 1))),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:const, nil, :NoMethodError)),
            s(:args),
            s(:send,
              s(:lvar, :d), :prev)))),
      s(:def, :test_prev_day,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2001),
                s(:int, 1),
                s(:int, 1)), :prev_day)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 12),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2001),
                s(:int, 1),
                s(:int, 1)), :prev_day,
              s(:int, 2))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 12),
              s(:int, 30)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 12),
                s(:int, 31)), :prev_day,
              s(:int, -2))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 2)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 3),
                s(:int, 1)), :prev_day,
              s(:send,
                s(:send,
                  s(:int, 1), :to_r), :/,
                s(:int, 2)))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29),
              s(:int, 12),
              s(:int, 0),
              s(:int, 0)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday),
              s(:send,
                s(:lvar, :d), :hour),
              s(:send,
                s(:lvar, :d), :min),
              s(:send,
                s(:lvar, :d), :sec))))),
      s(:def, :test_prev_month,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :<<,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :<<,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 12),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :<<,
              s(:int, 12))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :<<,
              s(:int, 14))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1998),
              s(:int, 11),
              s(:int, 30)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_prev_month__2,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_month,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_month)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 12),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_month,
              s(:int, 12))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_month,
              s(:int, 14))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1998),
              s(:int, 11),
              s(:int, 30)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_prev_year,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_year,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_year)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_year,
              s(:int, 10))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1990),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :prev_year,
              s(:int, 100))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1900),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_next,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 12),
                s(:int, 31)), :next)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 1)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 12),
                s(:int, 31)), :succ)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 1)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :Date), :today)),
          s(:lvasgn, :d2,
            s(:send,
              s(:lvar, :d), :next)),
          s(:send, nil, :assert_equal,
            s(:lvar, :d),
            s(:begin,
              s(:send,
                s(:lvar, :d2), :-,
                s(:int, 1)))),
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :Date), :today)),
          s(:lvasgn, :d2,
            s(:send,
              s(:lvar, :d), :succ)),
          s(:send, nil, :assert_equal,
            s(:lvar, :d),
            s(:begin,
              s(:send,
                s(:lvar, :d2), :-,
                s(:int, 1)))),
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :DateTime), :now)),
          s(:lvasgn, :d2,
            s(:send,
              s(:lvar, :d), :next)),
          s(:send, nil, :assert_equal,
            s(:lvar, :d),
            s(:begin,
              s(:send,
                s(:lvar, :d2), :-,
                s(:int, 1)))),
          s(:lvasgn, :d,
            s(:send,
              s(:const, nil, :DateTime), :now)),
          s(:lvasgn, :d2,
            s(:send,
              s(:lvar, :d), :succ)),
          s(:send, nil, :assert_equal,
            s(:lvar, :d),
            s(:begin,
              s(:send,
                s(:lvar, :d2), :-,
                s(:int, 1)))))),
      s(:def, :test_next_day,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 12),
                s(:int, 31)), :next_day)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 1)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 12),
                s(:int, 31)), :next_day,
              s(:int, 2))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 2)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2001),
                s(:int, 1),
                s(:int, 1)), :next_day,
              s(:int, -2))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 12),
              s(:int, 30)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :DateTime), :new,
                s(:int, 2000),
                s(:int, 2),
                s(:int, 29)), :next_day,
              s(:send,
                s(:send,
                  s(:int, 1), :to_r), :/,
                s(:int, 2)))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29),
              s(:int, 12),
              s(:int, 0),
              s(:int, 0)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday),
              s(:send,
                s(:lvar, :d), :hour),
              s(:send,
                s(:lvar, :d), :min),
              s(:send,
                s(:lvar, :d), :sec))))),
      s(:def, :test_next_month,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :>>,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 12),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :>>,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :>>,
              s(:int, 12))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :>>,
              s(:int, 13))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 2),
              s(:int, 28)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_next_month__2,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_month,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 12),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_month)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2000),
              s(:int, 2),
              s(:int, 29)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_month,
              s(:int, 12))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_month,
              s(:int, 13))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 2),
              s(:int, 28)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_next_year,
        s(:args),
        s(:begin,
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_year,
              s(:int, -1))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 1999),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_year)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_year,
              s(:int, 10))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2010),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))),
          s(:lvasgn, :d,
            s(:send,
              s(:send,
                s(:const, nil, :Date), :new,
                s(:int, 2000),
                s(:int, 1),
                s(:int, 31)), :next_year,
              s(:int, 100))),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:int, 2100),
              s(:int, 1),
              s(:int, 31)),
            s(:array,
              s(:send,
                s(:lvar, :d), :year),
              s(:send,
                s(:lvar, :d), :mon),
              s(:send,
                s(:lvar, :d), :mday))))),
      s(:def, :test_downto,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 7))),
          s(:lvasgn, :i,
            s(:int, 0)),
          s(:block,
            s(:send,
              s(:lvar, :p), :downto,
              s(:lvar, :q)),
            s(:args),
            s(:op_asgn,
              s(:lvasgn, :i), :+,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:lvar, :i)))),
      s(:def, :test_downto__noblock,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 7))),
          s(:lvasgn, :e,
            s(:send,
              s(:lvar, :p), :downto,
              s(:lvar, :q))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:send,
              s(:send,
                s(:lvar, :e), :to_a), :size)))),
      s(:def, :test_upto,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 21))),
          s(:lvasgn, :i,
            s(:int, 0)),
          s(:block,
            s(:send,
              s(:lvar, :p), :upto,
              s(:lvar, :q)),
            s(:args),
            s(:op_asgn,
              s(:lvasgn, :i), :+,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:lvar, :i)))),
      s(:def, :test_upto__noblock,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 21))),
          s(:lvasgn, :e,
            s(:send,
              s(:lvar, :p), :upto,
              s(:lvar, :q))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:send,
              s(:send,
                s(:lvar, :e), :to_a), :size)))),
      s(:def, :test_step,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 21))),
          s(:lvasgn, :i,
            s(:int, 0)),
          s(:block,
            s(:send,
              s(:lvar, :p), :step,
              s(:lvar, :q),
              s(:int, 2)),
            s(:args),
            s(:op_asgn,
              s(:lvasgn, :i), :+,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:int, 4),
            s(:lvar, :i)),
          s(:lvasgn, :i,
            s(:int, 0)),
          s(:block,
            s(:send,
              s(:lvar, :p), :step,
              s(:lvar, :q)),
            s(:args),
            s(:op_asgn,
              s(:lvasgn, :i), :+,
              s(:int, 1))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:lvar, :i)))),
      s(:def, :test_step__noblock,
        s(:args),
        s(:begin,
          s(:lvasgn, :p,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 14))),
          s(:lvasgn, :q,
            s(:send,
              s(:const, nil, :Date), :new,
              s(:int, 2001),
              s(:int, 1),
              s(:int, 21))),
          s(:lvasgn, :e,
            s(:send,
              s(:lvar, :p), :step,
              s(:lvar, :q),
              s(:int, 2))),
          s(:send, nil, :assert_equal,
            s(:int, 4),
            s(:send,
              s(:send,
                s(:lvar, :e), :to_a), :size)),
          s(:lvasgn, :e,
            s(:send,
              s(:lvar, :p), :step,
              s(:lvar, :q))),
          s(:send, nil, :assert_equal,
            s(:int, 8),
            s(:send,
              s(:send,
                s(:lvar, :e), :to_a), :size)))))))

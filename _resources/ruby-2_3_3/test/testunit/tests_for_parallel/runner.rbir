s(:begin,
  s(:send, nil, :require,
    s(:str, "rbconfig")),
  s(:send,
    s(:gvar, :$LOAD_PATH), :unshift,
    s(:dstr,
      s(:begin,
        s(:send,
          s(:const, nil, :File), :dirname,
          s(:str, "(string)"))),
      s(:str, "/../../lib"))),
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:lvasgn, :src_testdir,
    s(:send,
      s(:const, nil, :File), :dirname,
      s(:send,
        s(:const, nil, :File), :expand_path,
        s(:str, "(string)")))),
  s(:class,
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :Runner), nil,
    s(:cvasgn, :@@testfile_prefix,
      s(:str, "ptest"))),
  s(:send, nil, :exit,
    s(:send,
      s(:const,
        s(:const,
          s(:const, nil, :Test), :Unit), :AutoRunner), :run,
      s(:true),
      s(:lvar, :src_testdir))))

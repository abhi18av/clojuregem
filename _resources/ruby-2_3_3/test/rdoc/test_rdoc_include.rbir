s(:begin,
  s(:send, nil, :require,
    s(:send,
      s(:const, nil, :File), :expand_path,
      s(:str, "../xref_test_case"),
      s(:str, "(string)"))),
  s(:class,
    s(:const, nil, :TestRDocInclude),
    s(:const, nil, :XrefTestCase),
    s(:begin,
      s(:def, :setup,
        s(:args),
        s(:begin,
          s(:zsuper),
          s(:ivasgn, :@inc,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "M1"),
              s(:str, "comment"))),
          s(:send,
            s(:ivar, :@inc), :parent=,
            s(:ivar, :@m1)),
          s(:send,
            s(:ivar, :@inc), :record_location,
            s(:ivar, :@top_level)),
          s(:send,
            s(:ivar, :@inc), :store=,
            s(:ivar, :@store)))),
      s(:def, :test_module,
        s(:args),
        s(:begin,
          s(:send, nil, :assert_equal,
            s(:ivar, :@m1),
            s(:send,
              s(:ivar, :@inc), :module)),
          s(:send, nil, :assert_equal,
            s(:str, "Unknown"),
            s(:send,
              s(:send,
                s(:const,
                  s(:const, nil, :RDoc), :Include), :new,
                s(:str, "Unknown"),
                s(:str, "comment")), :module)))),
      s(:def, :test_module_extended,
        s(:args),
        s(:begin,
          s(:lvasgn, :m1,
            s(:send,
              s(:ivar, :@xref_data), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod1"))),
          s(:lvasgn, :m1_m3,
            s(:send,
              s(:lvar, :m1), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod3"))),
          s(:lvasgn, :m1_m2,
            s(:send,
              s(:lvar, :m1), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod2"))),
          s(:lvasgn, :m1_m2_m3,
            s(:send,
              s(:lvar, :m1_m2), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod3"))),
          s(:lvasgn, :m1_m2_m3_m4,
            s(:send,
              s(:lvar, :m1_m2_m3), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod4"))),
          s(:lvasgn, :m1_m2_m4,
            s(:send,
              s(:lvar, :m1_m2), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod4"))),
          s(:lvasgn, :m1_m2_k0,
            s(:send,
              s(:lvar, :m1_m2), :add_class,
              s(:const,
                s(:const, nil, :RDoc), :NormalClass),
              s(:str, "Klass0"))),
          s(:lvasgn, :m1_m2_k0_m4,
            s(:send,
              s(:lvar, :m1_m2_k0), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod4"))),
          s(:lvasgn, :m1_m2_k0_m4_m6,
            s(:send,
              s(:lvar, :m1_m2_k0_m4), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod6"))),
          s(:lvasgn, :m1_m2_k0_m5,
            s(:send,
              s(:lvar, :m1_m2_k0), :add_module,
              s(:const,
                s(:const, nil, :RDoc), :NormalModule),
              s(:str, "Mod5"))),
          s(:lvasgn, :i0_m4,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod4"),
              s(:nil))),
          s(:lvasgn, :i0_m5,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod5"),
              s(:nil))),
          s(:lvasgn, :i0_m6,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod6"),
              s(:nil))),
          s(:lvasgn, :i0_m1,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod1"),
              s(:nil))),
          s(:lvasgn, :i0_m2,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod2"),
              s(:nil))),
          s(:lvasgn, :i0_m3,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod3"),
              s(:nil))),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m4)),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m5)),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m6)),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m1)),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m2)),
          s(:send,
            s(:lvar, :m1_m2_k0), :add_include,
            s(:lvar, :i0_m3)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :i0_m4),
              s(:lvar, :i0_m5),
              s(:lvar, :i0_m6),
              s(:lvar, :i0_m1),
              s(:lvar, :i0_m2),
              s(:lvar, :i0_m3)),
            s(:send,
              s(:lvar, :m1_m2_k0), :includes)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :m1_m2_m3),
              s(:lvar, :m1_m2),
              s(:lvar, :m1),
              s(:lvar, :m1_m2_k0_m4_m6),
              s(:lvar, :m1_m2_k0_m5),
              s(:lvar, :m1_m2_k0_m4),
              s(:str, "Object")),
            s(:send,
              s(:lvar, :m1_m2_k0), :ancestors)),
          s(:lvasgn, :m1_k1,
            s(:send,
              s(:lvar, :m1), :add_class,
              s(:const,
                s(:const, nil, :RDoc), :NormalClass),
              s(:str, "Klass1"))),
          s(:lvasgn, :i1_m1,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod1"),
              s(:nil))),
          s(:lvasgn, :i1_m2,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod2"),
              s(:nil))),
          s(:lvasgn, :i1_m3,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod3"),
              s(:nil))),
          s(:lvasgn, :i1_m4,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod4"),
              s(:nil))),
          s(:lvasgn, :i1_k0_m4,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Klass0::Mod4"),
              s(:nil))),
          s(:send,
            s(:lvar, :m1_k1), :add_include,
            s(:lvar, :i1_m1)),
          s(:send,
            s(:lvar, :m1_k1), :add_include,
            s(:lvar, :i1_m2)),
          s(:send,
            s(:lvar, :m1_k1), :add_include,
            s(:lvar, :i1_m3)),
          s(:send,
            s(:lvar, :m1_k1), :add_include,
            s(:lvar, :i1_m4)),
          s(:send,
            s(:lvar, :m1_k1), :add_include,
            s(:lvar, :i1_k0_m4)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :i1_m1),
              s(:lvar, :i1_m2),
              s(:lvar, :i1_m3),
              s(:lvar, :i1_m4),
              s(:lvar, :i1_k0_m4)),
            s(:send,
              s(:lvar, :m1_k1), :includes)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :m1_m2_k0_m4),
              s(:lvar, :m1_m2_m3_m4),
              s(:lvar, :m1_m2_m3),
              s(:lvar, :m1_m2),
              s(:lvar, :m1),
              s(:str, "Object")),
            s(:send,
              s(:lvar, :m1_k1), :ancestors)),
          s(:lvasgn, :m1_k2,
            s(:send,
              s(:lvar, :m1), :add_class,
              s(:const,
                s(:const, nil, :RDoc), :NormalClass),
              s(:str, "Klass2"))),
          s(:lvasgn, :i2_m1,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod1"),
              s(:nil))),
          s(:lvasgn, :i2_m2,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod2"),
              s(:nil))),
          s(:lvasgn, :i2_m3,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod3"),
              s(:nil))),
          s(:lvasgn, :i2_k0_m4,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Klass0::Mod4"),
              s(:nil))),
          s(:send,
            s(:lvar, :m1_k2), :add_include,
            s(:lvar, :i2_m1)),
          s(:send,
            s(:lvar, :m1_k2), :add_include,
            s(:lvar, :i2_m3)),
          s(:send,
            s(:lvar, :m1_k2), :add_include,
            s(:lvar, :i2_m2)),
          s(:send,
            s(:lvar, :m1_k2), :add_include,
            s(:lvar, :i2_k0_m4)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :i2_m1),
              s(:lvar, :i2_m3),
              s(:lvar, :i2_m2),
              s(:lvar, :i2_k0_m4)),
            s(:send,
              s(:lvar, :m1_k2), :includes)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :m1_m2_k0_m4),
              s(:lvar, :m1_m2),
              s(:lvar, :m1_m3),
              s(:lvar, :m1),
              s(:str, "Object")),
            s(:send,
              s(:lvar, :m1_k2), :ancestors)),
          s(:lvasgn, :m1_k3,
            s(:send,
              s(:lvar, :m1), :add_class,
              s(:const,
                s(:const, nil, :RDoc), :NormalClass),
              s(:str, "Klass3"))),
          s(:lvasgn, :i3_m1,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod1"),
              s(:nil))),
          s(:lvasgn, :i3_m2,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod2"),
              s(:nil))),
          s(:lvasgn, :i3_m4,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "Mod4"),
              s(:nil))),
          s(:send,
            s(:lvar, :m1_k3), :add_include,
            s(:lvar, :i3_m1)),
          s(:send,
            s(:lvar, :m1_k3), :add_include,
            s(:lvar, :i3_m2)),
          s(:send,
            s(:lvar, :m1_k3), :add_include,
            s(:lvar, :i3_m4)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :i3_m1),
              s(:lvar, :i3_m2),
              s(:lvar, :i3_m4)),
            s(:send,
              s(:lvar, :m1_k3), :includes)),
          s(:send, nil, :assert_equal,
            s(:array,
              s(:lvar, :m1_m2_m4),
              s(:lvar, :m1_m2),
              s(:lvar, :m1),
              s(:str, "Object")),
            s(:send,
              s(:lvar, :m1_k3), :ancestors)))),
      s(:def, :test_store_equals,
        s(:args),
        s(:begin,
          s(:lvasgn, :incl,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :Include), :new,
              s(:str, "M"),
              s(:nil))),
          s(:send,
            s(:lvar, :incl), :record_location,
            s(:send,
              s(:const,
                s(:const, nil, :RDoc), :TopLevel), :new,
              s(:send,
                s(:ivar, :@top_level), :name))),
          s(:send,
            s(:lvar, :incl), :store=,
            s(:ivar, :@store)),
          s(:send, nil, :assert_same,
            s(:ivar, :@top_level),
            s(:send,
              s(:lvar, :incl), :file)),
          s(:send, nil, :assert_same,
            s(:ivar, :@store),
            s(:send,
              s(:send,
                s(:lvar, :incl), :file), :store)))))))

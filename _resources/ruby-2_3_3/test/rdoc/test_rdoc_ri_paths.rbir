s(:begin,
  s(:send, nil, :require,
    s(:str, "rdoc/test_case")),
  s(:class,
    s(:const, nil, :TestRDocRIPaths),
    s(:const,
      s(:const, nil, :RDoc), :TestCase),
    s(:begin,
      s(:def, :setup,
        s(:args),
        s(:begin,
          s(:zsuper),
          s(:ivasgn, :@orig_gem_path,
            s(:send,
              s(:const, nil, :Gem), :path)),
          s(:ivasgn, :@tempdir,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:const, nil, :Dir), :tmpdir),
              s(:dstr,
                s(:str, "test_rdoc_ri_paths_"),
                s(:begin,
                  s(:gvar, :$$))))),
          s(:send,
            s(:const, nil, :Gem), :use_paths,
            s(:ivar, :@tempdir)),
          s(:send,
            s(:const, nil, :Gem), :ensure_gem_subdirectories,
            s(:ivar, :@tempdir)),
          s(:lvasgn, :specs,
            s(:array,
              s(:ivasgn, :@rake_10,
                s(:send,
                  s(:const,
                    s(:const, nil, :Gem), :Specification), :new,
                  s(:str, "rake"),
                  s(:str, "10.0.1"))),
              s(:ivasgn, :@rdoc_4_0,
                s(:send,
                  s(:const,
                    s(:const, nil, :Gem), :Specification), :new,
                  s(:str, "rdoc"),
                  s(:str, "4.0"))),
              s(:ivasgn, :@rdoc_3_12,
                s(:send,
                  s(:const,
                    s(:const, nil, :Gem), :Specification), :new,
                  s(:str, "rdoc"),
                  s(:str, "3.12"))),
              s(:ivasgn, :@nodoc,
                s(:send,
                  s(:const,
                    s(:const, nil, :Gem), :Specification), :new,
                  s(:str, "nodoc"),
                  s(:str, "1.0"))))),
          s(:block,
            s(:send,
              s(:lvar, :specs), :each),
            s(:args,
              s(:arg, :spec)),
            s(:begin,
              s(:send,
                s(:lvar, :spec), :loaded_from=,
                s(:send,
                  s(:lvar, :spec), :spec_file)),
              s(:block,
                s(:send, nil, :open,
                  s(:send,
                    s(:lvar, :spec), :spec_file),
                  s(:str, "w")),
                s(:args,
                  s(:arg, :file)),
                s(:send,
                  s(:lvar, :file), :write,
                  s(:send,
                    s(:lvar, :spec), :to_ruby_for_cache))),
              s(:if,
                s(:send,
                  s(:send,
                    s(:lvar, :spec), :name), :==,
                  s(:str, "nodoc")), nil,
                s(:send,
                  s(:const, nil, :FileUtils), :mkdir_p,
                  s(:send,
                    s(:const, nil, :File), :join,
                    s(:send,
                      s(:lvar, :spec), :doc_dir),
                    s(:str, "ri")))))),
          s(:send,
            s(:const,
              s(:const, nil, :Gem), :Specification), :reset),
          s(:send,
            s(:const,
              s(:const, nil, :Gem), :Specification), :all=,
            s(:lvar, :specs)))),
      s(:def, :teardown,
        s(:args),
        s(:begin,
          s(:zsuper),
          s(:send,
            s(:const, nil, :Gem), :use_paths,
            s(:splat,
              s(:ivar, :@orig_gem_path))),
          s(:send,
            s(:const,
              s(:const, nil, :Gem), :Specification), :reset),
          s(:send,
            s(:const, nil, :FileUtils), :rm_rf,
            s(:ivar, :@tempdir)))),
      s(:def, :test_class_each,
        s(:args),
        s(:begin,
          s(:lvasgn, :enum,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :each,
              s(:true),
              s(:true),
              s(:true),
              s(:sym, :all))),
          s(:lvasgn, :path,
            s(:block,
              s(:send,
                s(:lvar, :enum), :map),
              s(:args,
                s(:arg, :dir)),
              s(:lvar, :dir))),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :system_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :site_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :home_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@nodoc), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rake_10), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rdoc_4_0), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rdoc_3_12), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_empty,
            s(:lvar, :path)))),
      s(:def, :test_class_gemdirs_latest,
        s(:args),
        s(:block,
          s(:send,
            s(:const, nil, :Dir), :chdir,
            s(:ivar, :@tempdir)),
          s(:args),
          s(:begin,
            s(:lvasgn, :gemdirs,
              s(:send,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :gemdirs,
                s(:sym, :latest))),
            s(:lvasgn, :expected,
              s(:array,
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rake_10), :doc_dir),
                  s(:str, "ri")),
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rdoc_4_0), :doc_dir),
                  s(:str, "ri")))),
            s(:send, nil, :assert_equal,
              s(:lvar, :expected),
              s(:lvar, :gemdirs))))),
      s(:def, :test_class_gemdirs_legacy,
        s(:args),
        s(:block,
          s(:send,
            s(:const, nil, :Dir), :chdir,
            s(:ivar, :@tempdir)),
          s(:args),
          s(:begin,
            s(:lvasgn, :gemdirs,
              s(:send,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :gemdirs,
                s(:true))),
            s(:lvasgn, :expected,
              s(:array,
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rake_10), :doc_dir),
                  s(:str, "ri")),
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rdoc_4_0), :doc_dir),
                  s(:str, "ri")))),
            s(:send, nil, :assert_equal,
              s(:lvar, :expected),
              s(:lvar, :gemdirs))))),
      s(:def, :test_class_gemdirs_all,
        s(:args),
        s(:block,
          s(:send,
            s(:const, nil, :Dir), :chdir,
            s(:ivar, :@tempdir)),
          s(:args),
          s(:begin,
            s(:lvasgn, :gemdirs,
              s(:send,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :gemdirs,
                s(:sym, :all))),
            s(:lvasgn, :expected,
              s(:array,
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@nodoc), :doc_dir),
                  s(:str, "ri")),
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rake_10), :doc_dir),
                  s(:str, "ri")),
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rdoc_4_0), :doc_dir),
                  s(:str, "ri")),
                s(:send,
                  s(:const, nil, :File), :join,
                  s(:send,
                    s(:ivar, :@rdoc_3_12), :doc_dir),
                  s(:str, "ri")))),
            s(:send, nil, :assert_equal,
              s(:lvar, :expected),
              s(:lvar, :gemdirs))))),
      s(:def, :test_class_gem_dir,
        s(:args),
        s(:begin,
          s(:lvasgn, :dir,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :gem_dir,
              s(:str, "rake"),
              s(:str, "10.0.1"))),
          s(:lvasgn, :expected,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rake_10), :doc_dir),
              s(:str, "ri"))),
          s(:send, nil, :assert_equal,
            s(:lvar, :expected),
            s(:lvar, :dir)))),
      s(:def, :test_class_home_dir,
        s(:args),
        s(:begin,
          s(:lvasgn, :dir,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :home_dir)),
          s(:send, nil, :assert_equal,
            s(:const,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :HOMEDIR),
            s(:lvar, :dir)))),
      s(:def, :test_class_path_nonexistent,
        s(:args),
        s(:block,
          s(:send, nil, :temp_dir),
          s(:args,
            s(:arg, :dir)),
          s(:begin,
            s(:lvasgn, :nonexistent,
              s(:send,
                s(:const, nil, :File), :join,
                s(:lvar, :dir),
                s(:str, "nonexistent"))),
            s(:lvasgn, :dir,
              s(:send,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :path,
                s(:true),
                s(:true),
                s(:true),
                s(:true),
                s(:lvar, :nonexistent))),
            s(:send, nil, :refute_includes,
              s(:lvar, :dir),
              s(:lvar, :nonexistent))))),
      s(:def, :test_class_raw_path,
        s(:args),
        s(:begin,
          s(:lvasgn, :path,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :raw_path,
              s(:true),
              s(:true),
              s(:true),
              s(:true))),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :system_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :site_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :home_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rake_10), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)))),
      s(:def, :test_class_raw_path_extra_dirs,
        s(:args),
        s(:begin,
          s(:lvasgn, :path,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :raw_path,
              s(:true),
              s(:true),
              s(:true),
              s(:true),
              s(:str, "/nonexistent"))),
          s(:send, nil, :assert_equal,
            s(:str, "/nonexistent"),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :system_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :site_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :home_dir),
            s(:send,
              s(:lvar, :path), :shift)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:send,
                s(:ivar, :@rake_10), :doc_dir),
              s(:str, "ri")),
            s(:send,
              s(:lvar, :path), :shift)))),
      s(:def, :test_class_site_dir,
        s(:args),
        s(:begin,
          s(:lvasgn, :dir,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :site_dir)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:const,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :BASE),
              s(:str, "site")),
            s(:lvar, :dir)))),
      s(:def, :test_class_system_dir,
        s(:args),
        s(:begin,
          s(:lvasgn, :dir,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :RDoc), :RI), :Paths), :system_dir)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const, nil, :File), :join,
              s(:const,
                s(:const,
                  s(:const,
                    s(:const, nil, :RDoc), :RI), :Paths), :BASE),
              s(:str, "system")),
            s(:lvar, :dir)))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:module,
    s(:const, nil, :TestIRB),
    s(:class,
      s(:const, nil, :TestCompletion),
      s(:const,
        s(:const,
          s(:const, nil, :Test), :Unit), :TestCase),
      s(:def, :test_nonstring_module_name,
        s(:args),
        s(:kwbegin,
          s(:rescue,
            s(:begin,
              s(:send, nil, :require,
                s(:str, "irb/completion")),
              s(:lvasgn, :bug5938,
                s(:str, "[ruby-core:42244]")),
              s(:lvasgn, :cmds,
                s(:array,
                  s(:str, "-rirb"),
                  s(:str, "-rirb/completion"),
                  s(:str, "-e"),
                  s(:str, "IRB.setup(__FILE__)"),
                  s(:str, "-e"),
                  s(:str, "IRB.conf[:MAIN_CONTEXT]=IRB::Irb.new.context"),
                  s(:str, "-e"),
                  s(:str, "module Foo;def self.name;//;end;end"),
                  s(:str, "-e"),
                  s(:str, "IRB::InputCompletor::CompletionProc.call(\"[1].first.\")"),
                  s(:str, "--"),
                  s(:str, "-f"),
                  s(:str, "--"))),
              s(:lvasgn, :status,
                s(:send, nil, :assert_in_out_err,
                  s(:lvar, :cmds),
                  s(:str, ""),
                  s(:regexp,
                    s(:regopt)),
                  s(:array),
                  s(:lvar, :bug5938))),
              s(:send, nil, :assert,
                s(:send,
                  s(:lvar, :status), :success?),
                s(:lvar, :bug5938))),
            s(:resbody,
              s(:array,
                s(:const, nil, :LoadError)), nil,
              s(:send, nil, :skip,
                s(:str, "cannot load irb/completion"))), nil))))))

s(:begin,
  s(:send, nil, :require_relative,
    s(:str, "base")),
  s(:if,
    s(:send,
      s(:const, nil, :RUBY_ENGINE), :==,
      s(:str, "ruby")),
    s(:class,
      s(:const, nil, :TestMkmf), nil,
      s(:class,
        s(:const, nil, :TestLibs),
        s(:const, nil, :TestMkmf),
        s(:begin,
          s(:def, :test_split_libs,
            s(:args),
            s(:begin,
              s(:send, nil, :assert_equal,
                s(:array,
                  s(:str, "-lfoo"),
                  s(:str, "-lbar")),
                s(:send, nil, :split_libs,
                  s(:str, "-lfoo -lbar"))),
              s(:send, nil, :assert_equal,
                s(:array,
                  s(:str, "-ObjC"),
                  s(:str, "-framework Ruby")),
                s(:send, nil, :split_libs,
                  s(:str, "-ObjC -framework Ruby")),
                s(:str, "Bug #6987")))),
          s(:def, :assert_in_order,
            s(:args,
              s(:arg, :array),
              s(:arg, :x),
              s(:arg, :y),
              s(:optarg, :mesg,
                s(:nil))),
            s(:begin,
              s(:lvasgn, :mesg,
                s(:dstr,
                  s(:begin,
                    s(:lvar, :x)),
                  s(:str, " must proceed to "),
                  s(:begin,
                    s(:lvar, :y)),
                  s(:begin,
                    s(:if,
                      s(:lvar, :mesg),
                      s(:str, ": "), nil)),
                  s(:begin,
                    s(:lvar, :mesg)))),
              s(:send, nil, :assert_operator,
                s(:send,
                  s(:lvar, :array), :index,
                  s(:lvar, :x)),
                s(:sym, :<),
                s(:send,
                  s(:lvar, :array), :rindex,
                  s(:lvar, :y)),
                s(:lvar, :mesg)))),
          s(:def, :test_merge_simple,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:21765]")),
              s(:send, nil, :assert_equal,
                s(:array),
                s(:send, nil, :merge_libs,
                  s(:array))),
              s(:send, nil, :assert_equal,
                s(:array,
                  s(:str, "a"),
                  s(:str, "b")),
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a")),
                  s(:array,
                    s(:str, "b")))),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "c")),
                  s(:array,
                    s(:str, "b")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "c"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_seq,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:21765]")),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "c"),
                    s(:str, "d")),
                  s(:array,
                    s(:str, "c"),
                    s(:str, "b"),
                    s(:str, "e")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "b"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "b"),
                s(:str, "e"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_seq_pre,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:21765]")),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "c"),
                    s(:str, "d")),
                  s(:array,
                    s(:str, "b"),
                    s(:str, "c"),
                    s(:str, "d"),
                    s(:str, "e")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "b"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "d"),
                s(:str, "e"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_cyclic,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:21765]")),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "c"),
                    s(:str, "d")),
                  s(:array,
                    s(:str, "b"),
                    s(:str, "c"),
                    s(:str, "b")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "b"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "b"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_cyclic_2,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:21765]")),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "c"),
                    s(:str, "a"),
                    s(:str, "d")),
                  s(:array,
                    s(:str, "b"),
                    s(:str, "c"),
                    s(:str, "b")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "a"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "d"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "b"),
                s(:str, "c"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "b"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_reversal,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug,
                s(:str, "[ruby-dev:22440]")),
              s(:lvasgn, :array,
                s(:send, nil, :merge_libs,
                  s(:array,
                    s(:str, "a"),
                    s(:str, "b"),
                    s(:str, "c")),
                  s(:array,
                    s(:str, "c"),
                    s(:str, "d"),
                    s(:str, "a")))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "b"),
                s(:lvar, :bug)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug)))),
          s(:def, :test_merge_reversal_followed,
            s(:args),
            s(:begin,
              s(:lvasgn, :bug7467,
                s(:str, "[ruby-core:50314] [Bug #7467]")),
              s(:lvasgn, :array,
                s(:nil)),
              s(:block,
                s(:send, nil, :assert_nothing_raised,
                  s(:lvar, :bug7467)),
                s(:args),
                s(:lvasgn, :array,
                  s(:send, nil, :merge_libs,
                    s(:array,
                      s(:str, "a"),
                      s(:str, "b"),
                      s(:str, "c"),
                      s(:str, "d"),
                      s(:str, "e"),
                      s(:str, "f"),
                      s(:str, "g"),
                      s(:str, "h")),
                    s(:array,
                      s(:str, "d"),
                      s(:str, "c"),
                      s(:str, "d"),
                      s(:str, "e")),
                    s(:array)))),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "a"),
                s(:str, "b"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "b"),
                s(:str, "c"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "d"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "d"),
                s(:str, "e"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "e"),
                s(:str, "f"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "f"),
                s(:str, "g"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "g"),
                s(:str, "h"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "d"),
                s(:str, "c"),
                s(:lvar, :bug7467)),
              s(:send, nil, :assert_in_order,
                s(:lvar, :array),
                s(:str, "c"),
                s(:str, "e"),
                s(:lvar, :bug7467))))))), nil))

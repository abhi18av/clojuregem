s(:begin,
  s(:send, nil, :require,
    s(:str, "rubygems/test_case")),
  s(:class,
    s(:const, nil, :TestGemResolverAPISpecification),
    s(:const,
      s(:const, nil, :Gem), :TestCase),
    s(:begin,
      s(:def, :test_initialize,
        s(:args),
        s(:begin,
          s(:lvasgn, :set,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISet), :new)),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "rails")),
              s(:pair,
                s(:sym, :number),
                s(:str, "3.0.3")),
              s(:pair,
                s(:sym, :platform),
                s(:send,
                  s(:send,
                    s(:const,
                      s(:const, nil, :Gem), :Platform), :local), :to_s)),
              s(:pair,
                s(:sym, :dependencies),
                s(:array,
                  s(:array,
                    s(:str, "bundler"),
                    s(:str, "~> 1.0")),
                  s(:array,
                    s(:str, "railties"),
                    s(:str, "= 3.0.3")))))),
          s(:lvasgn, :spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send, nil, :assert_equal,
            s(:str, "rails"),
            s(:send,
              s(:lvar, :spec), :name)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const, nil, :Gem), :Version), :new,
              s(:str, "3.0.3")),
            s(:send,
              s(:lvar, :spec), :version)),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:const,
                s(:const, nil, :Gem), :Platform), :local),
            s(:send,
              s(:lvar, :spec), :platform)),
          s(:lvasgn, :expected,
            s(:array,
              s(:send,
                s(:const,
                  s(:const, nil, :Gem), :Dependency), :new,
                s(:str, "bundler"),
                s(:str, "~> 1.0")),
              s(:send,
                s(:const,
                  s(:const, nil, :Gem), :Dependency), :new,
                s(:str, "railties"),
                s(:str, "= 3.0.3")))),
          s(:send, nil, :assert_equal,
            s(:lvar, :expected),
            s(:send,
              s(:lvar, :spec), :dependencies)))),
      s(:def, :test_fetch_development_dependencies,
        s(:args),
        s(:begin,
          s(:lvasgn, :specs,
            s(:block,
              s(:send, nil, :spec_fetcher),
              s(:args,
                s(:arg, :fetcher)),
              s(:block,
                s(:send,
                  s(:lvar, :fetcher), :spec,
                  s(:str, "rails"),
                  s(:str, "3.0.3")),
                s(:args,
                  s(:arg, :s)),
                s(:begin,
                  s(:send,
                    s(:lvar, :s), :add_runtime_dependency,
                    s(:str, "bundler"),
                    s(:str, "~> 1.0")),
                  s(:send,
                    s(:lvar, :s), :add_runtime_dependency,
                    s(:str, "railties"),
                    s(:str, "= 3.0.3")),
                  s(:send,
                    s(:lvar, :s), :add_development_dependency,
                    s(:str, "a"),
                    s(:str, "= 1")))))),
          s(:lvasgn, :rails,
            s(:send,
              s(:lvar, :specs), :[],
              s(:str, "rails-3.0.3"))),
          s(:lvasgn, :repo,
            s(:send,
              s(:ivar, :@gem_repo), :+,
              s(:str, "api/v1/dependencies"))),
          s(:lvasgn, :set,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISet), :new,
              s(:lvar, :repo))),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "rails")),
              s(:pair,
                s(:sym, :number),
                s(:str, "3.0.3")),
              s(:pair,
                s(:sym, :platform),
                s(:str, "ruby")),
              s(:pair,
                s(:sym, :dependencies),
                s(:array,
                  s(:array,
                    s(:str, "bundler"),
                    s(:str, "~> 1.0")),
                  s(:array,
                    s(:str, "railties"),
                    s(:str, "= 3.0.3")))))),
          s(:send, nil, :util_setup_spec_fetcher,
            s(:lvar, :rails)),
          s(:lvasgn, :spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send,
            s(:lvar, :spec), :fetch_development_dependencies),
          s(:lvasgn, :expected,
            s(:array,
              s(:send,
                s(:const,
                  s(:const, nil, :Gem), :Dependency), :new,
                s(:str, "bundler"),
                s(:str, "~> 1.0")),
              s(:send,
                s(:const,
                  s(:const, nil, :Gem), :Dependency), :new,
                s(:str, "railties"),
                s(:str, "= 3.0.3")),
              s(:send,
                s(:const,
                  s(:const, nil, :Gem), :Dependency), :new,
                s(:str, "a"),
                s(:str, "= 1"),
                s(:sym, :development)))),
          s(:send, nil, :assert_equal,
            s(:lvar, :expected),
            s(:send,
              s(:lvar, :spec), :dependencies)))),
      s(:def, :test_installable_platform_eh,
        s(:args),
        s(:begin,
          s(:lvasgn, :set,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISet), :new)),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "a")),
              s(:pair,
                s(:sym, :number),
                s(:str, "1")),
              s(:pair,
                s(:sym, :platform),
                s(:str, "ruby")),
              s(:pair,
                s(:sym, :dependencies),
                s(:array)))),
          s(:lvasgn, :a_spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send, nil, :assert,
            s(:send,
              s(:lvar, :a_spec), :installable_platform?)),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "b")),
              s(:pair,
                s(:sym, :number),
                s(:str, "1")),
              s(:pair,
                s(:sym, :platform),
                s(:str, "cpu-other_platform-1")),
              s(:pair,
                s(:sym, :dependencies),
                s(:array)))),
          s(:lvasgn, :b_spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send, nil, :refute,
            s(:send,
              s(:lvar, :b_spec), :installable_platform?)),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "c")),
              s(:pair,
                s(:sym, :number),
                s(:str, "1")),
              s(:pair,
                s(:sym, :platform),
                s(:send,
                  s(:send,
                    s(:const,
                      s(:const, nil, :Gem), :Platform), :local), :to_s)),
              s(:pair,
                s(:sym, :dependencies),
                s(:array)))),
          s(:lvasgn, :c_spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send, nil, :assert,
            s(:send,
              s(:lvar, :c_spec), :installable_platform?)))),
      s(:def, :test_source,
        s(:args),
        s(:begin,
          s(:lvasgn, :set,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISet), :new)),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "a")),
              s(:pair,
                s(:sym, :number),
                s(:str, "1")),
              s(:pair,
                s(:sym, :platform),
                s(:str, "ruby")),
              s(:pair,
                s(:sym, :dependencies),
                s(:array)))),
          s(:lvasgn, :api_spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:lvar, :set), :source),
            s(:send,
              s(:lvar, :api_spec), :source)))),
      s(:def, :test_spec,
        s(:args),
        s(:begin,
          s(:block,
            s(:send, nil, :spec_fetcher),
            s(:args,
              s(:arg, :fetcher)),
            s(:send,
              s(:lvar, :fetcher), :spec,
              s(:str, "a"),
              s(:int, 1))),
          s(:lvasgn, :dep_uri,
            s(:send,
              s(:send, nil, :URI,
                s(:ivar, :@gem_repo)), :+,
              s(:str, "api/v1/dependencies"))),
          s(:lvasgn, :set,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISet), :new,
              s(:lvar, :dep_uri))),
          s(:lvasgn, :data,
            s(:hash,
              s(:pair,
                s(:sym, :name),
                s(:str, "a")),
              s(:pair,
                s(:sym, :number),
                s(:str, "1")),
              s(:pair,
                s(:sym, :platform),
                s(:str, "ruby")),
              s(:pair,
                s(:sym, :dependencies),
                s(:array)))),
          s(:lvasgn, :api_spec,
            s(:send,
              s(:const,
                s(:const,
                  s(:const, nil, :Gem), :Resolver), :APISpecification), :new,
              s(:lvar, :set),
              s(:lvar, :data))),
          s(:lvasgn, :spec,
            s(:send,
              s(:lvar, :api_spec), :spec)),
          s(:send, nil, :assert_kind_of,
            s(:const,
              s(:const, nil, :Gem), :Specification),
            s(:lvar, :spec)),
          s(:send, nil, :assert_equal,
            s(:str, "a-1"),
            s(:send,
              s(:lvar, :spec), :full_name)))))))

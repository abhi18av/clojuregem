s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:class,
    s(:const, nil, :TestShiftJIS),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:begin,
      s(:def, :test_mbc_case_fold,
        s(:args),
        s(:begin,
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "(ａ)(a)\\1\\2"),
              s(:regopt, :i)),
            s(:str, "ａaａA")),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "(ａ)(a)\\1\\2"),
              s(:regopt, :i)),
            s(:str, "ａaＡA")))),
      s(:def, :test_property,
        s(:args),
        s(:begin,
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Hiragana}{4}"),
              s(:regopt)),
            s(:str, "ひらがな")),
          s(:send, nil, :assert_no_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Hiragana}{4}"),
              s(:regopt)),
            s(:str, "カタカナ")),
          s(:send, nil, :assert_no_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Hiragana}{4}"),
              s(:regopt)),
            s(:str, "漢字漢字")),
          s(:send, nil, :assert_no_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Katakana}{4}"),
              s(:regopt)),
            s(:str, "ひらがな")),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Katakana}{4}"),
              s(:regopt)),
            s(:str, "カタカナ")),
          s(:send, nil, :assert_no_match,
            s(:regexp,
              s(:str, "あ{0}\\p{Katakana}{4}"),
              s(:regopt)),
            s(:str, "漢字漢字")),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:const, nil, :RegexpError)),
            s(:args),
            s(:send,
              s(:const, nil, :Regexp), :new,
              s(:str, "あ{0}\\p{foobarbaz}"))))),
      s(:def, :test_code_to_mbclen,
        s(:args),
        s(:begin,
          s(:lvasgn, :s,
            s(:str, "あいうえお")),
          s(:send,
            s(:lvar, :s), :<<,
            s(:int, 33449)),
          s(:send, nil, :assert_equal,
            s(:str, "あいうえおか"),
            s(:lvar, :s)),
          s(:block,
            s(:send, nil, :assert_raise,
              s(:const, nil, :RangeError)),
            s(:args),
            s(:send,
              s(:lvar, :s), :<<,
              s(:int, 130))))))))

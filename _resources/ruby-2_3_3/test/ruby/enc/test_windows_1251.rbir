s(:begin,
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:class,
    s(:const, nil, :TestWindows1251),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase),
    s(:def, :test_windows_1251,
      s(:args),
      s(:block,
        s(:send,
          s(:begin,
            s(:irange,
              s(:int, 192),
              s(:int, 223))), :each),
        s(:args,
          s(:arg, :c)),
        s(:begin,
          s(:lvasgn, :c1,
            s(:send,
              s(:lvar, :c), :chr,
              s(:str, "windows-1251"))),
          s(:lvasgn, :c2,
            s(:send,
              s(:begin,
                s(:send,
                  s(:lvar, :c), :+,
                  s(:int, 32))), :chr,
              s(:str, "windows-1251"))),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "^("),
              s(:begin,
                s(:lvar, :c1)),
              s(:str, ")\\1$"),
              s(:regopt, :i)),
            s(:send,
              s(:lvar, :c2), :+,
              s(:lvar, :c1))),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "^("),
              s(:begin,
                s(:lvar, :c2)),
              s(:str, ")\\1$"),
              s(:regopt, :i)),
            s(:send,
              s(:lvar, :c1), :+,
              s(:lvar, :c2))),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "^["),
              s(:begin,
                s(:lvar, :c1)),
              s(:str, "]+$"),
              s(:regopt, :i)),
            s(:send,
              s(:lvar, :c2), :+,
              s(:lvar, :c1))),
          s(:send, nil, :assert_match,
            s(:regexp,
              s(:str, "^["),
              s(:begin,
                s(:lvar, :c2)),
              s(:str, "]+$"),
              s(:regopt, :i)),
            s(:send,
              s(:lvar, :c1), :+,
              s(:lvar, :c2))))))))

s(:begin,
  s(:preexe,
    s(:begin,
      s(:send, nil, :puts,
        s(:str, "b1")),
      s(:gvasgn, :$global_begin1,
        s(:str, "global_begin1")),
      s(:casgn, nil, :ConstBegin1,
        s(:str, "ConstBegin1")))),
  s(:preexe,
    s(:begin,
      s(:send, nil, :puts,
        s(:str, "b2")),
      s(:preexe,
        s(:send, nil, :puts,
          s(:str, "b2-1"))))),
  s(:if,
    s(:defined?,
      s(:gvar, :$global_begin1)), nil,
    s(:send, nil, :raise)),
  s(:if,
    s(:defined?,
      s(:const,
        s(:cbase), :ConstBegin1)), nil,
    s(:send, nil, :raise)),
  s(:lvasgn, :local_for_end2,
    s(:str, "e2")),
  s(:gvasgn, :$global_for_end1,
    s(:str, "e1")),
  s(:send, nil, :puts,
    s(:str, "main")),
  s(:postexe,
    s(:send, nil, :puts,
      s(:lvar, :local_for_end2))),
  s(:send, nil, :eval,
    s(:dstr,
      s(:str, "  BEGIN {\n"),
      s(:str, "    puts \"b3\"\n"),
      s(:str, "\n"),
      s(:str, "    BEGIN {\n"),
      s(:str, "      puts \"b3-1\"\n"),
      s(:str, "    }\n"),
      s(:str, "  }\n"),
      s(:str, "\n"),
      s(:str, "  BEGIN {\n"),
      s(:str, "    puts \"b4\"\n"),
      s(:str, "  }\n"),
      s(:str, "\n"),
      s(:str, "  END {\n"),
      s(:str, "    puts \"e3\"\n"),
      s(:str, "  }\n"),
      s(:str, "\n"),
      s(:str, "  END {\n"),
      s(:str, "    puts \"e4\"\n"),
      s(:str, "\n"),
      s(:str, "    END {\n"),
      s(:str, "      puts \"e4-1\"\n"),
      s(:str, "\n"),
      s(:str, "      END {\n"),
      s(:str, "\tputs \"e4-1-1\"\n"),
      s(:str, "      }\n"),
      s(:str, "    }\n"),
      s(:str, "\n"),
      s(:str, "    END {\n"),
      s(:str, "      puts \"e4-2\"\n"),
      s(:str, "    }\n"),
      s(:str, "  }\n"))),
  s(:postexe,
    s(:begin,
      s(:send, nil, :exit),
      s(:send, nil, :puts,
        s(:str, "should not be dumped")),
      s(:postexe,
        s(:send, nil, :puts,
          s(:str, "not reached"))))),
  s(:postexe,
    s(:begin,
      s(:send, nil, :puts,
        s(:gvar, :$global_for_end1)),
      s(:postexe,
        s(:send, nil, :puts,
          s(:str, "e1-1"))))))

s(:begin,
  s(:send, nil, :require_relative,
    s(:str, "rss-testcase")),
  s(:send, nil, :require,
    s(:str, "rss/maker")),
  s(:module,
    s(:const, nil, :RSS),
    s(:class,
      s(:const, nil, :TestSetupMakerAtomEntry),
      s(:const, nil, :TestCase),
      s(:begin,
        s(:def, :setup,
          s(:args),
          s(:begin,
            s(:lvasgn, :t,
              s(:send,
                s(:const, nil, :Time), :iso8601,
                s(:str, "2000-01-01T12:00:05+00:00"))),
            s(:sclass,
              s(:lvar, :t),
              s(:send, nil, :alias_method,
                s(:sym, :to_s),
                s(:sym, :iso8601))),
            s(:ivasgn, :@dc_elems,
              s(:hash,
                s(:pair,
                  s(:sym, :title),
                  s(:str, "hoge")),
                s(:pair,
                  s(:sym, :description),
                  s(:dstr,
                    s(:str, " XML is placing increasingly heavy loads on\n"),
                    s(:str, "          the existing technical infrastructure of the Internet."))),
                s(:pair,
                  s(:sym, :creator),
                  s(:str, "Rael Dornfest (mailto:rael@oreilly.com)")),
                s(:pair,
                  s(:sym, :subject),
                  s(:str, "XML")),
                s(:pair,
                  s(:sym, :publisher),
                  s(:str, "The O'Reilly Network")),
                s(:pair,
                  s(:sym, :contributor),
                  s(:str, "hogehoge")),
                s(:pair,
                  s(:sym, :type),
                  s(:str, "fugafuga")),
                s(:pair,
                  s(:sym, :format),
                  s(:str, "hohoho")),
                s(:pair,
                  s(:sym, :identifier),
                  s(:str, "fufufu")),
                s(:pair,
                  s(:sym, :source),
                  s(:str, "barbar")),
                s(:pair,
                  s(:sym, :language),
                  s(:str, "ja")),
                s(:pair,
                  s(:sym, :relation),
                  s(:str, "cococo")),
                s(:pair,
                  s(:sym, :rights),
                  s(:str, "Copyright (c) 2000 O'Reilly &amp; Associates, Inc.")),
                s(:pair,
                  s(:sym, :date),
                  s(:lvar, :t)))))),
        s(:def, :test_setup_maker_entry,
          s(:args,
            s(:optarg, :with_dc,
              s(:true))),
          s(:begin,
            s(:lvasgn, :authors,
              s(:array,
                s(:hash,
                  s(:pair,
                    s(:sym, :name),
                    s(:str, "Bob")),
                  s(:pair,
                    s(:sym, :uri),
                    s(:str, "http://example.com/~bob/")),
                  s(:pair,
                    s(:sym, :email),
                    s(:str, "bob@example.com"))),
                s(:hash,
                  s(:pair,
                    s(:sym, :name),
                    s(:str, "Alice")),
                  s(:pair,
                    s(:sym, :uri),
                    s(:str, "http://example.com/~alice/")),
                  s(:pair,
                    s(:sym, :email),
                    s(:str, "alice@example.com"))))),
            s(:lvasgn, :categories,
              s(:array,
                s(:hash,
                  s(:pair,
                    s(:sym, :term),
                    s(:str, "music")),
                  s(:pair,
                    s(:sym, :label),
                    s(:str, "Music"))),
                s(:hash,
                  s(:pair,
                    s(:sym, :term),
                    s(:str, "book")),
                  s(:pair,
                    s(:sym, :scheme),
                    s(:str, "http://example.com/category/book/")),
                  s(:pair,
                    s(:sym, :label),
                    s(:str, "Book"))))),
            s(:lvasgn, :contributors,
              s(:array,
                s(:hash,
                  s(:pair,
                    s(:sym, :name),
                    s(:str, "Chris")),
                  s(:pair,
                    s(:sym, :email),
                    s(:str, "chris@example.com"))),
                s(:hash,
                  s(:pair,
                    s(:sym, :name),
                    s(:str, "Eva")),
                  s(:pair,
                    s(:sym, :uri),
                    s(:str, "http://example.com/~eva/"))))),
            s(:lvasgn, :id,
              s(:str, "urn:uuid:8b105336-7e20-45fc-bb78-37fb3e1db25a")),
            s(:lvasgn, :link,
              s(:str, "http://hoge.com")),
            s(:lvasgn, :published,
              s(:send,
                s(:send,
                  s(:const, nil, :Time), :now), :-,
                s(:send,
                  s(:int, 60), :*,
                  s(:int, 3600)))),
            s(:lvasgn, :rights,
              s(:str, "Copyrights (c) 2007 Alice and Bob")),
            s(:lvasgn, :description,
              s(:str, "fugafugafugafuga")),
            s(:lvasgn, :title,
              s(:str, "fugafuga")),
            s(:lvasgn, :updated,
              s(:send,
                s(:const, nil, :Time), :now)),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:block,
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :items), :new_item),
                  s(:args,
                    s(:arg, :item)),
                  s(:begin,
                    s(:block,
                      s(:send,
                        s(:lvar, :authors), :each),
                      s(:args,
                        s(:arg, :author_info)),
                      s(:block,
                        s(:send,
                          s(:send,
                            s(:lvar, :item), :authors), :new_author),
                        s(:args,
                          s(:arg, :author)),
                        s(:block,
                          s(:send,
                            s(:lvar, :author_info), :each),
                          s(:args,
                            s(:arg, :key),
                            s(:arg, :value)),
                          s(:send,
                            s(:lvar, :author), :__send__,
                            s(:dstr,
                              s(:begin,
                                s(:lvar, :key)),
                              s(:str, "=")),
                            s(:lvar, :value))))),
                    s(:block,
                      s(:send,
                        s(:lvar, :categories), :each),
                      s(:args,
                        s(:arg, :category_info)),
                      s(:block,
                        s(:send,
                          s(:send,
                            s(:lvar, :item), :categories), :new_category),
                        s(:args,
                          s(:arg, :category)),
                        s(:block,
                          s(:send,
                            s(:lvar, :category_info), :each),
                          s(:args,
                            s(:arg, :key),
                            s(:arg, :value)),
                          s(:send,
                            s(:lvar, :category), :__send__,
                            s(:dstr,
                              s(:begin,
                                s(:lvar, :key)),
                              s(:str, "=")),
                            s(:lvar, :value))))),
                    s(:block,
                      s(:send,
                        s(:lvar, :contributors), :each),
                      s(:args,
                        s(:arg, :contributor_info)),
                      s(:block,
                        s(:send,
                          s(:send,
                            s(:lvar, :item), :contributors), :new_contributor),
                        s(:args,
                          s(:arg, :contributor)),
                        s(:block,
                          s(:send,
                            s(:lvar, :contributor_info), :each),
                          s(:args,
                            s(:arg, :key),
                            s(:arg, :value)),
                          s(:send,
                            s(:lvar, :contributor), :__send__,
                            s(:dstr,
                              s(:begin,
                                s(:lvar, :key)),
                              s(:str, "=")),
                            s(:lvar, :value))))),
                    s(:send,
                      s(:lvar, :item), :id=,
                      s(:lvar, :id)),
                    s(:send,
                      s(:lvar, :item), :link=,
                      s(:lvar, :link)),
                    s(:send,
                      s(:lvar, :item), :published=,
                      s(:lvar, :published)),
                    s(:send,
                      s(:lvar, :item), :rights=,
                      s(:lvar, :rights)),
                    s(:send,
                      s(:lvar, :item), :description=,
                      s(:lvar, :description)),
                    s(:send,
                      s(:lvar, :item), :title=,
                      s(:lvar, :title)),
                    s(:send,
                      s(:lvar, :item), :updated=,
                      s(:lvar, :updated)),
                    s(:if,
                      s(:lvar, :with_dc),
                      s(:block,
                        s(:send,
                          s(:ivar, :@dc_elems), :each),
                        s(:args,
                          s(:arg, :var),
                          s(:arg, :value)),
                        s(:if,
                          s(:send,
                            s(:lvar, :var), :==,
                            s(:sym, :date)),
                          s(:send,
                            s(:lvar, :item), :new_dc_date,
                            s(:lvar, :value)),
                          s(:send,
                            s(:lvar, :item), :__send__,
                            s(:dstr,
                              s(:str, "dc_"),
                              s(:begin,
                                s(:lvar, :var)),
                              s(:str, "=")),
                            s(:lvar, :value)))), nil))))),
            s(:send, nil, :assert_not_nil,
              s(:lvar, :feed)),
            s(:lvasgn, :new_feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:send,
                  s(:lvar, :feed), :setup_maker,
                  s(:lvar, :maker)))),
            s(:send, nil, :assert_not_nil,
              s(:lvar, :new_feed)),
            s(:lvasgn, :new_authors,
              s(:block,
                s(:send,
                  s(:send,
                    s(:lvar, :new_feed), :authors), :collect),
                s(:args,
                  s(:arg, :author)),
                s(:hash,
                  s(:pair,
                    s(:sym, :name),
                    s(:send,
                      s(:send,
                        s(:lvar, :author), :name), :content)),
                  s(:pair,
                    s(:sym, :uri),
                    s(:send,
                      s(:send,
                        s(:lvar, :author), :uri), :content)),
                  s(:pair,
                    s(:sym, :email),
                    s(:send,
                      s(:send,
                        s(:lvar, :author), :email), :content))))),
            s(:send, nil, :assert_equal,
              s(:lvar, :authors),
              s(:lvar, :new_authors)),
            s(:lvasgn, :new_categories,
              s(:block,
                s(:send,
                  s(:send,
                    s(:lvar, :new_feed), :categories), :collect),
                s(:args,
                  s(:arg, :category)),
                s(:block,
                  s(:send,
                    s(:hash,
                      s(:pair,
                        s(:sym, :term),
                        s(:send,
                          s(:lvar, :category), :term)),
                      s(:pair,
                        s(:sym, :scheme),
                        s(:send,
                          s(:lvar, :category), :scheme)),
                      s(:pair,
                        s(:sym, :label),
                        s(:send,
                          s(:lvar, :category), :label))), :reject),
                  s(:args,
                    s(:arg, :key),
                    s(:arg, :value)),
                  s(:send,
                    s(:lvar, :value), :nil?)))),
            s(:send, nil, :assert_equal,
              s(:lvar, :categories),
              s(:lvar, :new_categories)),
            s(:lvasgn, :new_contributors,
              s(:block,
                s(:send,
                  s(:send,
                    s(:lvar, :new_feed), :contributors), :collect),
                s(:args,
                  s(:arg, :contributor)),
                s(:begin,
                  s(:lvasgn, :info,
                    s(:hash)),
                  s(:send,
                    s(:lvar, :info), :[]=,
                    s(:sym, :name),
                    s(:send,
                      s(:send,
                        s(:lvar, :contributor), :name), :content)),
                  s(:if,
                    s(:send,
                      s(:lvar, :contributor), :uri),
                    s(:send,
                      s(:lvar, :info), :[]=,
                      s(:sym, :uri),
                      s(:send,
                        s(:send,
                          s(:lvar, :contributor), :uri), :content)), nil),
                  s(:if,
                    s(:send,
                      s(:lvar, :contributor), :email),
                    s(:send,
                      s(:lvar, :info), :[]=,
                      s(:sym, :email),
                      s(:send,
                        s(:send,
                          s(:lvar, :contributor), :email), :content)), nil),
                  s(:lvar, :info)))),
            s(:send, nil, :assert_equal,
              s(:lvar, :contributors),
              s(:lvar, :new_contributors)),
            s(:send, nil, :assert_equal,
              s(:lvar, :id),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :id), :content)),
            s(:send, nil, :assert_equal,
              s(:lvar, :link),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :link), :href)),
            s(:send, nil, :assert_equal,
              s(:lvar, :published),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :published), :content)),
            s(:send, nil, :assert_equal,
              s(:lvar, :rights),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :rights), :content)),
            s(:send, nil, :assert_equal,
              s(:lvar, :description),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :summary), :content)),
            s(:send, nil, :assert_equal,
              s(:lvar, :title),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :title), :content)),
            s(:send, nil, :assert_equal,
              s(:lvar, :updated),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :updated), :content)),
            s(:if,
              s(:lvar, :with_dc),
              s(:block,
                s(:send,
                  s(:ivar, :@dc_elems), :each),
                s(:args,
                  s(:arg, :var),
                  s(:arg, :value)),
                s(:if,
                  s(:send,
                    s(:lvar, :var), :==,
                    s(:sym, :date)),
                  s(:send, nil, :assert_equal,
                    s(:array,
                      s(:lvar, :updated),
                      s(:lvar, :value)),
                    s(:block,
                      s(:send,
                        s(:send,
                          s(:lvar, :new_feed), :dc_dates), :collect),
                      s(:args,
                        s(:arg, :date)),
                      s(:send,
                        s(:lvar, :date), :value))),
                  s(:send, nil, :assert_equal,
                    s(:lvar, :value),
                    s(:send,
                      s(:lvar, :new_feed), :__send__,
                      s(:dstr,
                        s(:str, "dc_"),
                        s(:begin,
                          s(:lvar, :var))))))), nil),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :items), :size)))),
        s(:def, :test_setup_maker_entry_without_dc,
          s(:args),
          s(:send, nil, :test_setup_maker_entry,
            s(:false))),
        s(:def, :test_setup_maker_items,
          s(:args,
            s(:optarg, :for_backward_compatibility,
              s(:false))),
          s(:begin,
            s(:lvasgn, :title,
              s(:str, "TITLE")),
            s(:lvasgn, :link,
              s(:str, "http://hoge.com/")),
            s(:lvasgn, :description,
              s(:str, "text hoge fuga")),
            s(:lvasgn, :updated,
              s(:send,
                s(:const, nil, :Time), :now)),
            s(:lvasgn, :item_size,
              s(:int, 5)),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send, nil, :setup_dummy_channel_atom,
                    s(:lvar, :maker)),
                  s(:block,
                    s(:send,
                      s(:lvar, :item_size), :times),
                    s(:args,
                      s(:arg, :i)),
                    s(:block,
                      s(:send,
                        s(:send,
                          s(:lvar, :maker), :items), :new_item),
                      s(:args,
                        s(:arg, :item)),
                      s(:begin,
                        s(:send,
                          s(:lvar, :item), :title=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :title)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:send,
                          s(:lvar, :item), :link=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :link)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:send,
                          s(:lvar, :item), :description=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :description)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:send,
                          s(:lvar, :item), :updated=,
                          s(:send,
                            s(:lvar, :updated), :+,
                            s(:send,
                              s(:lvar, :i), :*,
                              s(:int, 60)))))))))),
            s(:lvasgn, :new_feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:block,
                    s(:send,
                      s(:send,
                        s(:lvar, :feed), :items), :each),
                    s(:args,
                      s(:arg, :item)),
                    s(:if,
                      s(:lvar, :for_backward_compatibility),
                      s(:send,
                        s(:lvar, :item), :setup_maker,
                        s(:lvar, :maker)),
                      s(:send,
                        s(:lvar, :item), :setup_maker,
                        s(:send,
                          s(:lvar, :maker), :items)))),
                  s(:send,
                    s(:send,
                      s(:lvar, :feed), :items), :clear),
                  s(:send,
                    s(:lvar, :feed), :setup_maker,
                    s(:lvar, :maker))))),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :items), :size)),
            s(:block,
              s(:send,
                s(:send,
                  s(:send,
                    s(:lvar, :new_feed), :items), :[],
                  s(:irange,
                    s(:int, 0),
                    s(:int, 1))), :each_with_index),
              s(:args,
                s(:arg, :item),
                s(:arg, :i)),
              s(:begin,
                s(:send, nil, :assert_equal,
                  s(:dstr,
                    s(:begin,
                      s(:lvar, :title)),
                    s(:begin,
                      s(:lvar, :i))),
                  s(:send,
                    s(:send,
                      s(:lvar, :item), :title), :content)),
                s(:send, nil, :assert_equal,
                  s(:dstr,
                    s(:begin,
                      s(:lvar, :link)),
                    s(:begin,
                      s(:lvar, :i))),
                  s(:send,
                    s(:send,
                      s(:lvar, :item), :link), :href)),
                s(:send, nil, :assert_equal,
                  s(:dstr,
                    s(:begin,
                      s(:lvar, :description)),
                    s(:begin,
                      s(:lvar, :i))),
                  s(:send,
                    s(:send,
                      s(:lvar, :item), :summary), :content)),
                s(:send, nil, :assert_equal,
                  s(:send,
                    s(:lvar, :updated), :+,
                    s(:send,
                      s(:lvar, :i), :*,
                      s(:int, 60))),
                  s(:send,
                    s(:send,
                      s(:lvar, :item), :updated), :content)))))),
        s(:def, :test_setup_maker_items_sort,
          s(:args),
          s(:begin,
            s(:lvasgn, :title,
              s(:str, "TITLE")),
            s(:lvasgn, :link,
              s(:str, "http://hoge.com/")),
            s(:lvasgn, :summary,
              s(:str, "text hoge fuga")),
            s(:lvasgn, :updated,
              s(:send,
                s(:const, nil, :Time), :now)),
            s(:lvasgn, :feed_size,
              s(:int, 5)),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send, nil, :setup_dummy_channel_atom,
                    s(:lvar, :maker)),
                  s(:block,
                    s(:send,
                      s(:lvar, :feed_size), :times),
                    s(:args,
                      s(:arg, :i)),
                    s(:begin,
                      s(:lvasgn, :entry_class,
                        s(:const,
                          s(:const,
                            s(:const, nil, :RSS), :Atom), :Entry)),
                      s(:lvasgn, :entry,
                        s(:send,
                          s(:lvar, :entry_class), :new)),
                      s(:send,
                        s(:lvar, :entry), :title=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Title), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :title)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:send,
                          s(:lvar, :entry), :links), :<<,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Link), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :href),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :link)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:lvar, :entry), :summary=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Summary), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :summary)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:lvar, :entry), :updated=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Updated), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:send,
                                s(:lvar, :updated), :+,
                                s(:send,
                                  s(:lvar, :i), :*,
                                  s(:int, 60))))))),
                      s(:send,
                        s(:lvar, :entry), :setup_maker,
                        s(:send,
                          s(:lvar, :maker), :items)))),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :items), :do_sort=,
                    s(:false))))),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :items), :size)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :title)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :title), :content)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :link)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :link), :href)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :summary)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :summary), :content)),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send, nil, :setup_dummy_channel_atom,
                    s(:lvar, :maker)),
                  s(:block,
                    s(:send,
                      s(:lvar, :feed_size), :times),
                    s(:args,
                      s(:arg, :i)),
                    s(:begin,
                      s(:lvasgn, :entry_class,
                        s(:const,
                          s(:const,
                            s(:const, nil, :RSS), :Atom), :Entry)),
                      s(:lvasgn, :entry,
                        s(:send,
                          s(:lvar, :entry_class), :new)),
                      s(:send,
                        s(:lvar, :entry), :title=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Title), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :title)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:send,
                          s(:lvar, :entry), :links), :<<,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Link), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :href),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :link)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:lvar, :entry), :summary=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Summary), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:dstr,
                                s(:begin,
                                  s(:lvar, :summary)),
                                s(:begin,
                                  s(:lvar, :i))))))),
                      s(:send,
                        s(:lvar, :entry), :updated=,
                        s(:send,
                          s(:const,
                            s(:lvar, :entry_class), :Updated), :new,
                          s(:hash,
                            s(:pair,
                              s(:sym, :content),
                              s(:send,
                                s(:lvar, :updated), :+,
                                s(:send,
                                  s(:lvar, :i), :*,
                                  s(:int, 60))))))),
                      s(:send,
                        s(:lvar, :entry), :setup_maker,
                        s(:send,
                          s(:lvar, :maker), :items)))),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :items), :do_sort=,
                    s(:true))))),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :items), :size)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :title)),
                s(:begin,
                  s(:send,
                    s(:lvar, :feed_size), :-,
                    s(:int, 1)))),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :title), :content)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :link)),
                s(:begin,
                  s(:send,
                    s(:lvar, :feed_size), :-,
                    s(:int, 1)))),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :link), :href)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :summary)),
                s(:begin,
                  s(:send,
                    s(:lvar, :feed_size), :-,
                    s(:int, 1)))),
              s(:send,
                s(:send,
                  s(:lvar, :feed), :summary), :content)))),
        s(:def, :test_setup_maker_items_backward_compatibility,
          s(:args),
          s(:send, nil, :test_setup_maker_items,
            s(:true))),
        s(:def, :test_setup_maker,
          s(:args),
          s(:begin,
            s(:lvasgn, :encoding,
              s(:str, "EUC-JP")),
            s(:lvasgn, :standalone,
              s(:true)),
            s(:lvasgn, :href,
              s(:str, "a.xsl")),
            s(:lvasgn, :type,
              s(:str, "text/xsl")),
            s(:lvasgn, :title,
              s(:str, "sample")),
            s(:lvasgn, :media,
              s(:str, "printer")),
            s(:lvasgn, :charset,
              s(:str, "UTF-8")),
            s(:lvasgn, :alternate,
              s(:str, "yes")),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send,
                    s(:lvar, :maker), :encoding=,
                    s(:lvar, :encoding)),
                  s(:send,
                    s(:lvar, :maker), :standalone=,
                    s(:lvar, :standalone)),
                  s(:block,
                    s(:send,
                      s(:send,
                        s(:lvar, :maker), :xml_stylesheets), :new_xml_stylesheet),
                    s(:args,
                      s(:arg, :xss)),
                    s(:begin,
                      s(:send,
                        s(:lvar, :xss), :href=,
                        s(:lvar, :href)),
                      s(:send,
                        s(:lvar, :xss), :type=,
                        s(:lvar, :type)),
                      s(:send,
                        s(:lvar, :xss), :title=,
                        s(:lvar, :title)),
                      s(:send,
                        s(:lvar, :xss), :media=,
                        s(:lvar, :media)),
                      s(:send,
                        s(:lvar, :xss), :charset=,
                        s(:lvar, :charset)),
                      s(:send,
                        s(:lvar, :xss), :alternate=,
                        s(:lvar, :alternate)))),
                  s(:send, nil, :setup_dummy_channel_atom,
                    s(:lvar, :maker)),
                  s(:send, nil, :setup_dummy_item_atom,
                    s(:lvar, :maker))))),
            s(:send, nil, :assert_not_nil,
              s(:lvar, :feed)),
            s(:lvasgn, :new_feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:send,
                  s(:lvar, :feed), :setup_maker,
                  s(:lvar, :maker)))),
            s(:send, nil, :assert_equal,
              s(:array,
                s(:str, "atom"),
                s(:str, "1.0"),
                s(:str, "entry")),
              s(:send,
                s(:lvar, :new_feed), :feed_info)),
            s(:send, nil, :assert_equal,
              s(:lvar, :encoding),
              s(:send,
                s(:lvar, :new_feed), :encoding)),
            s(:send, nil, :assert_equal,
              s(:lvar, :standalone),
              s(:send,
                s(:lvar, :new_feed), :standalone)),
            s(:lvasgn, :xss,
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :xml_stylesheets), :first)),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :xml_stylesheets), :size)),
            s(:send, nil, :assert_equal,
              s(:lvar, :href),
              s(:send,
                s(:lvar, :xss), :href)),
            s(:send, nil, :assert_equal,
              s(:lvar, :type),
              s(:send,
                s(:lvar, :xss), :type)),
            s(:send, nil, :assert_equal,
              s(:lvar, :title),
              s(:send,
                s(:lvar, :xss), :title)),
            s(:send, nil, :assert_equal,
              s(:lvar, :media),
              s(:send,
                s(:lvar, :xss), :media)),
            s(:send, nil, :assert_equal,
              s(:lvar, :charset),
              s(:send,
                s(:lvar, :xss), :charset)),
            s(:send, nil, :assert_equal,
              s(:lvar, :alternate),
              s(:send,
                s(:lvar, :xss), :alternate)))),
        s(:def, :test_setup_maker_full,
          s(:args),
          s(:begin,
            s(:lvasgn, :encoding,
              s(:str, "EUC-JP")),
            s(:lvasgn, :standalone,
              s(:true)),
            s(:lvasgn, :href,
              s(:str, "a.xsl")),
            s(:lvasgn, :type,
              s(:str, "text/xsl")),
            s(:lvasgn, :title,
              s(:str, "sample")),
            s(:lvasgn, :media,
              s(:str, "printer")),
            s(:lvasgn, :charset,
              s(:str, "UTF-8")),
            s(:lvasgn, :alternate,
              s(:str, "yes")),
            s(:lvasgn, :channel_about,
              s(:str, "http://hoge.com")),
            s(:lvasgn, :channel_title,
              s(:str, "fugafuga")),
            s(:lvasgn, :channel_link,
              s(:str, "http://hoge.com")),
            s(:lvasgn, :channel_description,
              s(:str, "fugafugafugafuga")),
            s(:lvasgn, :channel_author,
              s(:str, "Bob")),
            s(:lvasgn, :image_url,
              s(:str, "http://hoge.com/hoge.png")),
            s(:lvasgn, :item_title,
              s(:str, "TITLE")),
            s(:lvasgn, :item_link,
              s(:str, "http://hoge.com/")),
            s(:lvasgn, :item_description,
              s(:str, "text hoge fuga")),
            s(:lvasgn, :entry_size,
              s(:int, 5)),
            s(:lvasgn, :feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send,
                    s(:lvar, :maker), :encoding=,
                    s(:lvar, :encoding)),
                  s(:send,
                    s(:lvar, :maker), :standalone=,
                    s(:lvar, :standalone)),
                  s(:block,
                    s(:send,
                      s(:send,
                        s(:lvar, :maker), :xml_stylesheets), :new_xml_stylesheet),
                    s(:args,
                      s(:arg, :xss)),
                    s(:begin,
                      s(:send,
                        s(:lvar, :xss), :href=,
                        s(:lvar, :href)),
                      s(:send,
                        s(:lvar, :xss), :type=,
                        s(:lvar, :type)),
                      s(:send,
                        s(:lvar, :xss), :title=,
                        s(:lvar, :title)),
                      s(:send,
                        s(:lvar, :xss), :media=,
                        s(:lvar, :media)),
                      s(:send,
                        s(:lvar, :xss), :charset=,
                        s(:lvar, :charset)),
                      s(:send,
                        s(:lvar, :xss), :alternate=,
                        s(:lvar, :alternate)))),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :channel), :about=,
                    s(:lvar, :channel_about)),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :channel), :title=,
                    s(:lvar, :channel_title)),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :channel), :link=,
                    s(:lvar, :channel_link)),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :channel), :description=,
                    s(:lvar, :channel_description)),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :channel), :author=,
                    s(:lvar, :channel_author)),
                  s(:block,
                    s(:send,
                      s(:ivar, :@dc_elems), :each),
                    s(:args,
                      s(:arg, :var),
                      s(:arg, :value)),
                    s(:send,
                      s(:send,
                        s(:lvar, :maker), :channel), :__send__,
                      s(:dstr,
                        s(:str, "dc_"),
                        s(:begin,
                          s(:lvar, :var)),
                        s(:str, "=")),
                      s(:lvar, :value))),
                  s(:send,
                    s(:send,
                      s(:lvar, :maker), :image), :url=,
                    s(:lvar, :image_url)),
                  s(:block,
                    s(:send,
                      s(:lvar, :entry_size), :times),
                    s(:args,
                      s(:arg, :i)),
                    s(:block,
                      s(:send,
                        s(:send,
                          s(:lvar, :maker), :items), :new_item),
                      s(:args,
                        s(:arg, :item)),
                      s(:begin,
                        s(:send,
                          s(:lvar, :item), :title=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :item_title)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:send,
                          s(:lvar, :item), :link=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :item_link)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:send,
                          s(:lvar, :item), :description=,
                          s(:dstr,
                            s(:begin,
                              s(:lvar, :item_description)),
                            s(:begin,
                              s(:lvar, :i)))),
                        s(:block,
                          s(:send,
                            s(:ivar, :@dc_elems), :each),
                          s(:args,
                            s(:arg, :var),
                            s(:arg, :value)),
                          s(:send,
                            s(:lvar, :item), :__send__,
                            s(:dstr,
                              s(:str, "dc_"),
                              s(:begin,
                                s(:lvar, :var)),
                              s(:str, "=")),
                            s(:lvar, :value))))))))),
            s(:lvasgn, :new_feed,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "atom:entry")),
                s(:args,
                  s(:arg, :maker)),
                s(:send,
                  s(:lvar, :feed), :setup_maker,
                  s(:lvar, :maker)))),
            s(:send, nil, :assert_equal,
              s(:array,
                s(:str, "atom"),
                s(:str, "1.0"),
                s(:str, "entry")),
              s(:send,
                s(:lvar, :new_feed), :feed_info)),
            s(:send, nil, :assert_equal,
              s(:lvar, :encoding),
              s(:send,
                s(:lvar, :new_feed), :encoding)),
            s(:send, nil, :assert_equal,
              s(:lvar, :standalone),
              s(:send,
                s(:lvar, :new_feed), :standalone)),
            s(:lvasgn, :xss,
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :xml_stylesheets), :first)),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :xml_stylesheets), :size)),
            s(:send, nil, :assert_equal,
              s(:lvar, :href),
              s(:send,
                s(:lvar, :xss), :href)),
            s(:send, nil, :assert_equal,
              s(:lvar, :type),
              s(:send,
                s(:lvar, :xss), :type)),
            s(:send, nil, :assert_equal,
              s(:lvar, :title),
              s(:send,
                s(:lvar, :xss), :title)),
            s(:send, nil, :assert_equal,
              s(:lvar, :media),
              s(:send,
                s(:lvar, :xss), :media)),
            s(:send, nil, :assert_equal,
              s(:lvar, :charset),
              s(:send,
                s(:lvar, :xss), :charset)),
            s(:send, nil, :assert_equal,
              s(:lvar, :alternate),
              s(:send,
                s(:lvar, :xss), :alternate)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :item_title)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :title), :content)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :item_link)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :link), :href)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :item_description)),
                s(:str, "0")),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :summary), :content)),
            s(:block,
              s(:send,
                s(:ivar, :@dc_elems), :each),
              s(:args,
                s(:arg, :var),
                s(:arg, :value)),
              s(:send, nil, :assert_equal,
                s(:lvar, :value),
                s(:send,
                  s(:lvar, :new_feed), :__send__,
                  s(:dstr,
                    s(:str, "dc_"),
                    s(:begin,
                      s(:lvar, :var)))))),
            s(:send, nil, :assert_equal,
              s(:int, 1),
              s(:send,
                s(:send,
                  s(:lvar, :new_feed), :items), :size))))))))

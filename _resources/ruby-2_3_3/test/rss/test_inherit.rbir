s(:begin,
  s(:send, nil, :require_relative,
    s(:str, "rss-testcase")),
  s(:send, nil, :require,
    s(:str, "rss/1.0")),
  s(:module,
    s(:const, nil, :RSS),
    s(:class,
      s(:const, nil, :TestInherit),
      s(:const, nil, :TestCase),
      s(:begin,
        s(:class,
          s(:const, nil, :InheritedImage),
          s(:const,
            s(:const,
              s(:const, nil, :RSS), :RDF), :Image),
          s(:begin,
            s(:defs,
              s(:self), :indent_size,
              s(:args),
              s(:int, 1)),
            s(:defs,
              s(:self), :tag_name,
              s(:args),
              s(:str, "image")))),
        s(:def, :setup,
          s(:args),
          s(:ivasgn, :@rss,
            s(:send, nil, :make_RDF,
              s(:dstr,
                s(:begin,
                  s(:send, nil, :make_channel)),
                s(:str, "\n"),
                s(:begin,
                  s(:send, nil, :make_image)),
                s(:str, "\n"),
                s(:begin,
                  s(:send, nil, :make_item)),
                s(:str, "\n"),
                s(:begin,
                  s(:send, nil, :make_textinput)),
                s(:str, "\n"))))),
        s(:def, :test_inherit,
          s(:args),
          s(:begin,
            s(:lvasgn, :rss,
              s(:send,
                s(:const,
                  s(:const, nil, :RSS), :Parser), :parse,
                s(:ivar, :@rss))),
            s(:lvasgn, :orig_image,
              s(:send,
                s(:lvar, :rss), :image)),
            s(:lvasgn, :prefix,
              s(:str, "[INHERIT]")),
            s(:lvasgn, :image,
              s(:send,
                s(:const, nil, :InheritedImage), :new,
                s(:dstr,
                  s(:begin,
                    s(:lvar, :prefix)),
                  s(:str, " "),
                  s(:begin,
                    s(:send,
                      s(:lvar, :orig_image), :about))))),
            s(:send,
              s(:lvar, :image), :title=,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :title)))),
            s(:send,
              s(:lvar, :image), :url=,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :url)))),
            s(:send,
              s(:lvar, :image), :link=,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :link)))),
            s(:send,
              s(:lvar, :rss), :image=,
              s(:lvar, :image)),
            s(:lvasgn, :new_rss,
              s(:send,
                s(:const,
                  s(:const, nil, :RSS), :Parser), :parse,
                s(:send,
                  s(:lvar, :rss), :to_s))),
            s(:lvasgn, :new_image,
              s(:send,
                s(:lvar, :new_rss), :image)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :about))),
              s(:send,
                s(:lvar, :new_image), :about)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :title))),
              s(:send,
                s(:lvar, :new_image), :title)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :url))),
              s(:send,
                s(:lvar, :new_image), :url)),
            s(:send, nil, :assert_equal,
              s(:dstr,
                s(:begin,
                  s(:lvar, :prefix)),
                s(:str, " "),
                s(:begin,
                  s(:send,
                    s(:lvar, :orig_image), :link))),
              s(:send,
                s(:lvar, :new_image), :link))))))))

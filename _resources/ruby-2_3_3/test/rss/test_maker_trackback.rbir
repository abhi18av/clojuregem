s(:begin,
  s(:send, nil, :require_relative,
    s(:str, "rss-testcase")),
  s(:send, nil, :require,
    s(:str, "rss/maker")),
  s(:module,
    s(:const, nil, :RSS),
    s(:class,
      s(:const, nil, :TestMakerTrackBack),
      s(:const, nil, :TestCase),
      s(:begin,
        s(:def, :setup,
          s(:args),
          s(:begin,
            s(:ivasgn, :@uri,
              s(:str, "http://madskills.com/public/xml/rss/module/trackback/")),
            s(:ivasgn, :@elements,
              s(:hash,
                s(:pair,
                  s(:sym, :ping),
                  s(:str, "http://bar.com/tb.cgi?tb_id=rssplustrackback")),
                s(:pair,
                  s(:sym, :abouts),
                  s(:array,
                    s(:str, "http://foo.com/trackback/tb.cgi?tb_id=20020923"),
                    s(:str, "http://bar.com/trackback/tb.cgi?tb_id=20041114"))))))),
        s(:def, :test_rss10,
          s(:args),
          s(:begin,
            s(:lvasgn, :rss,
              s(:block,
                s(:send,
                  s(:const,
                    s(:const, nil, :RSS), :Maker), :make,
                  s(:str, "1.0")),
                s(:args,
                  s(:arg, :maker)),
                s(:begin,
                  s(:send, nil, :setup_dummy_channel,
                    s(:lvar, :maker)),
                  s(:send, nil, :setup_dummy_item,
                    s(:lvar, :maker)),
                  s(:lvasgn, :item,
                    s(:send,
                      s(:send,
                        s(:lvar, :maker), :items), :last)),
                  s(:send,
                    s(:lvar, :item), :trackback_ping=,
                    s(:send,
                      s(:ivar, :@elements), :[],
                      s(:sym, :ping))),
                  s(:block,
                    s(:send,
                      s(:send,
                        s(:ivar, :@elements), :[],
                        s(:sym, :abouts)), :each),
                    s(:args,
                      s(:arg, :about)),
                    s(:block,
                      s(:send,
                        s(:send,
                          s(:lvar, :item), :trackback_abouts), :new_about),
                      s(:args,
                        s(:arg, :new_about)),
                      s(:send,
                        s(:lvar, :new_about), :value=,
                        s(:lvar, :about))))))),
            s(:send, nil, :assert_trackback,
              s(:ivar, :@elements),
              s(:send,
                s(:send,
                  s(:lvar, :rss), :items), :last)))),
        s(:send, nil, :private),
        s(:def, :accessor_name,
          s(:args,
            s(:arg, :name)),
          s(:dstr,
            s(:str, "trackback_"),
            s(:begin,
              s(:lvar, :name))))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "scanf.rb")),
  s(:send, nil, :require,
    s(:str, "test/unit")),
  s(:send, nil, :require,
    s(:str, "tempfile")),
  s(:class,
    s(:const, nil, :TestStringScanf),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase), nil),
  s(:class,
    s(:const, nil, :TestIOScanf),
    s(:const,
      s(:const,
        s(:const, nil, :Test), :Unit), :TestCase), nil),
  s(:module,
    s(:const, nil, :ScanfTests),
    s(:begin,
      s(:def, :tests,
        s(:args),
        s(:array,
          s(:array,
            s(:str, "%2[a]"),
            s(:str, "nbc"),
            s(:array)),
          s(:array,
            s(:str, "%*d %*3d %*s"),
            s(:str, "123 +456 abc"),
            s(:array)),
          s(:array,
            s(:str, "%d%c"),
            s(:str, "123 x"),
            s(:array,
              s(:int, 123),
              s(:str, " "))),
          s(:array,
            s(:str, "%d%c"),
            s(:str, "123x"),
            s(:array,
              s(:int, 123),
              s(:str, "x"))),
          s(:array,
            s(:str, "%d %c"),
            s(:str, "123x"),
            s(:array,
              s(:int, 123),
              s(:str, "x"))),
          s(:array,
            s(:str, "%d %c"),
            s(:str, "123 x"),
            s(:array,
              s(:int, 123),
              s(:str, "x"))),
          s(:array,
            s(:str, "%x"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%2x"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%i"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%2i"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%2o"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%d"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%2d"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%3d"),
            s(:str, "+x3"),
            s(:array)),
          s(:array,
            s(:str, "%d%[abc]"),
            s(:str, "eabc"),
            s(:array)),
          s(:array,
            s(:str, "%d\n%[abc]"),
            s(:str, "\neabc"),
            s(:array)),
          s(:array,
            s(:str, "%d%[^abc]"),
            s(:str, "ghiabc"),
            s(:array)),
          s(:array,
            s(:str, "%d%[abc]"),
            s(:str, "abc"),
            s(:array)),
          s(:array,
            s(:str, "%d%s"),
            s(:str, ""),
            s(:array)),
          s(:array,
            s(:str, "%d%s"),
            s(:str, "blah 123 string"),
            s(:array)),
          s(:array,
            s(:str, "%[\n]"),
            s(:str, "abc\n"),
            s(:array)),
          s(:array,
            s(:str, "%f"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%f"),
            s(:str, "z"),
            s(:array)),
          s(:array,
            s(:str, "%f"),
            s(:str, "z3.2534"),
            s(:array)),
          s(:array,
            s(:str, ""),
            s(:str, ""),
            s(:array)),
          s(:array,
            s(:str, ""),
            s(:str, "abc 123"),
            s(:array)),
          s(:array,
            s(:str, "%[^\\w]%c"),
            s(:str, "a...1"),
            s(:array)),
          s(:array,
            s(:str, "%3x"),
            s(:str, "0xz"),
            s(:array,
              s(:int, 0))),
          s(:array,
            s(:str, "%3i"),
            s(:str, "097"),
            s(:array,
              s(:int, 0))),
          s(:array,
            s(:str, "%3i"),
            s(:str, "0xz"),
            s(:array,
              s(:int, 0))),
          s(:array,
            s(:str, "%1i"),
            s(:str, "3"),
            s(:array,
              s(:int, 3))),
          s(:array,
            s(:str, "%2i"),
            s(:str, "07"),
            s(:array,
              s(:int, 7))),
          s(:array,
            s(:str, "%2i"),
            s(:str, "0a"),
            s(:array,
              s(:int, 0))),
          s(:array,
            s(:str, "%3c"),
            s(:str, "abc"),
            s(:array,
              s(:str, "abc"))),
          s(:array,
            s(:str, "%3c"),
            s(:str, "a\nb"),
            s(:array,
              s(:str, "a\nb"))),
          s(:array,
            s(:str, "%3c"),
            s(:str, "a\nbcd"),
            s(:array,
              s(:str, "a\nb"))),
          s(:array,
            s(:str, "%c\n\n"),
            s(:str, "x\n\n"),
            s(:array,
              s(:str, "x"))),
          s(:array,
            s(:str, "%c"),
            s(:str, "\n"),
            s(:array,
              s(:str, "\n"))),
          s(:array,
            s(:str, "%c"),
            s(:str, "x\n"),
            s(:array,
              s(:str, "x"))),
          s(:array,
            s(:str, "%2c"),
            s(:str, " 123"),
            s(:array,
              s(:str, " 1"))),
          s(:array,
            s(:str, " %c"),
            s(:str, " x"),
            s(:array,
              s(:str, "x"))),
          s(:array,
            s(:str, "%c"),
            s(:str, " x"),
            s(:array,
              s(:str, " "))),
          s(:array,
            s(:str, "%c"),
            s(:str, "123"),
            s(:array,
              s(:str, "1"))),
          s(:array,
            s(:str, "%2c"),
            s(:str, "123"),
            s(:array,
              s(:str, "12"))),
          s(:array,
            s(:str, "%5c"),
            s(:str, "a\nb\n\n"),
            s(:array,
              s(:str, "a\nb\n\n"))),
          s(:array,
            s(:str, "%6c"),
            s(:str, "a\nb\n\nx"),
            s(:array,
              s(:str, "a\nb\n\nx"))),
          s(:array,
            s(:str, "%5c"),
            s(:str, "ab\ncd"),
            s(:array,
              s(:str, "ab\ncd"))),
          s(:array,
            s(:str, "%3o"),
            s(:str, "0xz"),
            s(:array,
              s(:int, 0))),
          s(:array,
            s(:str, "%d"),
            s(:str, "\n123"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d"),
            s(:str, "\n\n123"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%1d"),
            s(:str, "2"),
            s(:array,
              s(:int, 2))),
          s(:array,
            s(:str, "%[^\\w]%c"),
            s(:str, "...1"),
            s(:array,
              s(:str, "..."),
              s(:str, "1"))),
          s(:array,
            s(:str, "%[abc\n]%d"),
            s(:str, "a\n\nb\n\nc   123"),
            s(:array,
              s(:str, "a\n\nb\n\nc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%[abc\n]%d"),
            s(:str, "a\n\nb\n\nc \t  123"),
            s(:array,
              s(:str, "a\n\nb\n\nc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%[abc\t]%d"),
            s(:str, "a\t\tb\t\tc   123"),
            s(:array,
              s(:str, "a\t\tb\t\tc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%d%3[abc\n]"),
            s(:str, "123a\nbeaab"),
            s(:array,
              s(:int, 123),
              s(:str, "a\nb"))),
          s(:array,
            s(:str, "%d%20c"),
            s(:str, "42   is the key"),
            s(:array,
              s(:int, 42),
              s(:str, "   is the key"))),
          s(:array,
            s(:str, "%d %20c"),
            s(:str, "42   is the key"),
            s(:array,
              s(:int, 42),
              s(:str, "is the key"))),
          s(:array,
            s(:str, "%d%3[^abc\n]%d"),
            s(:str, "123de\nf123"),
            s(:array,
              s(:int, 123),
              s(:str, "de"))),
          s(:array,
            s(:str, "%d %4c"),
            s(:str, "3abc"),
            s(:array,
              s(:int, 3),
              s(:str, "abc"))),
          s(:array,
            s(:str, "%f%d\n%[abc]"),
            s(:str, "1\neabc"),
            s(:array,
              s(:float, 1.0))),
          s(:array,
            s(:str, "%d%3[abc]"),
            s(:str, "123aaab"),
            s(:array,
              s(:int, 123),
              s(:str, "aaa"))),
          s(:array,
            s(:str, "%d%3[abc]"),
            s(:str, "123 aaab"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d%3[abc]"),
            s(:str, "123aeaab"),
            s(:array,
              s(:int, 123),
              s(:str, "a"))),
          s(:array,
            s(:str, "%d%[^abc]"),
            s(:str, "123defabc"),
            s(:array,
              s(:int, 123),
              s(:str, "def"))),
          s(:array,
            s(:str, "%d%3[^abc]"),
            s(:str, "123defdef"),
            s(:array,
              s(:int, 123),
              s(:str, "def"))),
          s(:array,
            s(:str, "%d%3[^abc] "),
            s(:str, "123defdef   "),
            s(:array,
              s(:int, 123),
              s(:str, "def"))),
          s(:array,
            s(:str, "%d%3[^abc]ghi"),
            s(:str, "123defghi"),
            s(:array,
              s(:int, 123),
              s(:str, "def"))),
          s(:array,
            s(:str, "%d%3[^abc]"),
            s(:str, "123adefdef"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d%3[^abc]"),
            s(:str, "123deafdef"),
            s(:array,
              s(:int, 123),
              s(:str, "de"))),
          s(:array,
            s(:str, "%d%3[^abc\n]"),
            s(:str, "123de\nf"),
            s(:array,
              s(:int, 123),
              s(:str, "de"))),
          s(:array,
            s(:str, "%s%c%c%s"),
            s(:str, "abc\n\ndef"),
            s(:array,
              s(:str, "abc"),
              s(:str, "\n"),
              s(:str, "\n"),
              s(:str, "def"))),
          s(:array,
            s(:str, "%c%d"),
            s(:str, "\n\n123"),
            s(:array,
              s(:str, "\n"),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%c%d"),
            s(:str, "abc\n123"),
            s(:array,
              s(:str, "abc"),
              s(:str, "\n"),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%c%d"),
            s(:str, "abc\n\n123"),
            s(:array,
              s(:str, "abc"),
              s(:str, "\n"),
              s(:int, 123))),
          s(:array,
            s(:str, "%c%d"),
            s(:str, "\t\n123"),
            s(:array,
              s(:str, "\t"),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%c%d"),
            s(:str, "abc\t\n123"),
            s(:array,
              s(:str, "abc"),
              s(:str, "\t"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c%d"),
            s(:str, "abc123"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c\n%d"),
            s(:str, "abc123"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c\n%d"),
            s(:str, "abc 123"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c %d"),
            s(:str, "abc123"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c\t%d"),
            s(:str, "abc \n 123"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c\t%d"),
            s(:str, "abc \n 123   "),
            s(:array,
              s(:str, "abc"),
              s(:int, 123))),
          s(:array,
            s(:str, "%3c%d"),
            s(:str, "a\nb123"),
            s(:array,
              s(:str, "a\nb"),
              s(:int, 123))),
          s(:array,
            s(:str, "%f%3c"),
            s(:str, "1.2x\ny"),
            s(:array,
              s(:float, 1.2),
              s(:str, "x\ny"))),
          s(:array,
            s(:str, "%d\n%d\n%d"),
            s(:str, "123 456 789"),
            s(:array,
              s(:int, 123),
              s(:int, 456),
              s(:int, 789))),
          s(:array,
            s(:str, "%d\n%i%2d%x\n%d"),
            s(:str, "123 0718932"),
            s(:array,
              s(:int, 123),
              s(:int, 57),
              s(:int, 89),
              s(:int, 50))),
          s(:array,
            s(:str, "%c\n%c"),
            s(:str, "x y"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%c\t%c"),
            s(:str, "x y"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%s\n%s"),
            s(:str, "x y"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%s%s\n"),
            s(:str, "x y"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%c\n\n%c"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%s%d%d"),
            s(:str, "abc\n123\n456"),
            s(:array,
              s(:str, "abc"),
              s(:int, 123),
              s(:int, 456))),
          s(:array,
            s(:str, "%3s%c%3c%d"),
            s(:str, "1.2x\n\ny123"),
            s(:array,
              s(:str, "1.2"),
              s(:str, "x"),
              s(:str, "\n\ny"),
              s(:int, 123))),
          s(:array,
            s(:str, "%c\n%c"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%c  %c"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%s\n\n%c"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%s\n\n%s"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%d\n\n%d"),
            s(:str, "23\n\n45"),
            s(:array,
              s(:int, 23),
              s(:int, 45))),
          s(:array,
            s(:str, "%d\n%d"),
            s(:str, "23\n\n45"),
            s(:array,
              s(:int, 23),
              s(:int, 45))),
          s(:array,
            s(:str, "%c\n\n%c"),
            s(:str, "x y"),
            s(:array,
              s(:str, "x"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%c%c"),
            s(:str, "x\n\ny"),
            s(:array,
              s(:str, "x"),
              s(:str, "\n"))),
          s(:array,
            s(:str, "%c%c"),
            s(:str, "x\n"),
            s(:array,
              s(:str, "x"),
              s(:str, "\n"))),
          s(:array,
            s(:str, "%d%c%c%d"),
            s(:str, "345   678"),
            s(:array,
              s(:int, 345),
              s(:str, " "),
              s(:str, " "),
              s(:int, 678))),
          s(:array,
            s(:str, "%d   %c%s"),
            s(:str, "123   x  hello"),
            s(:array,
              s(:int, 123),
              s(:str, "x"),
              s(:str, "hello"))),
          s(:array,
            s(:str, "%d%2c"),
            s(:str, "654 123"),
            s(:array,
              s(:int, 654),
              s(:str, " 1"))),
          s(:array,
            s(:str, "%5c%s"),
            s(:str, "a\nb\n\nxyz"),
            s(:array,
              s(:str, "a\nb\n\n"),
              s(:str, "xyz"))),
          s(:array,
            s(:str, "%s%[ xyz]%d"),
            s(:str, "hello x 32"),
            s(:array,
              s(:str, "hello"),
              s(:str, " x "),
              s(:int, 32))),
          s(:array,
            s(:str, "%5s%8[a-z]%d"),
            s(:str, "helloblahblah 32"),
            s(:array,
              s(:str, "hello"),
              s(:str, "blahblah"),
              s(:int, 32))),
          s(:array,
            s(:str, "%s%[abcde\\s]%d"),
            s(:str, "hello badea 32"),
            s(:array,
              s(:str, "hello"),
              s(:str, " badea "),
              s(:int, 32))),
          s(:array,
            s(:str, "%d%[\\s]%c"),
            s(:str, "123 \n\t X"),
            s(:array,
              s(:int, 123),
              s(:str, " \n\t "),
              s(:str, "X"))),
          s(:array,
            s(:str, "%4s%2c%c"),
            s(:str, "1.2x\n\ny"),
            s(:array,
              s(:str, "1.2x"),
              s(:str, "\n\n"),
              s(:str, "y"))),
          s(:array,
            s(:str, "%f%c %3c%d"),
            s(:str, "1.2x\n\ny123"),
            s(:array,
              s(:float, 1.2),
              s(:str, "x"),
              s(:str, "y12"),
              s(:int, 3))),
          s(:array,
            s(:str, "%s%5c"),
            s(:str, "abc ab\ncd"),
            s(:array,
              s(:str, "abc"),
              s(:str, " ab\nc"))),
          s(:array,
            s(:str, "%5c%f"),
            s(:str, "ab\ncd1.2"),
            s(:array,
              s(:str, "ab\ncd"),
              s(:float, 1.2))),
          s(:array,
            s(:str, "%5c%c"),
            s(:str, "ab\ncd1"),
            s(:array,
              s(:str, "ab\ncd"),
              s(:str, "1"))),
          s(:array,
            s(:str, "%f%c%2c%d"),
            s(:str, "1.2x\ny123"),
            s(:array,
              s(:float, 1.2),
              s(:str, "x"),
              s(:str, "\ny"),
              s(:int, 123))),
          s(:array,
            s(:str, "%f%c%3c"),
            s(:str, "1.2x\ny123"),
            s(:array,
              s(:float, 1.2),
              s(:str, "x"),
              s(:str, "\ny1"))),
          s(:array,
            s(:str, "%s\n%s"),
            s(:str, "blah\n\nand\nmore stuff"),
            s(:array,
              s(:str, "blah"),
              s(:str, "and"))),
          s(:array,
            s(:str, "%o%d%x"),
            s(:str, "21912a3"),
            s(:array,
              s(:send,
                s(:str, "21"), :oct),
              s(:int, 912),
              s(:send,
                s(:str, "a3"), :hex))),
          s(:array,
            s(:str, "%3o%4d%3x"),
            s(:str, "21912a3"),
            s(:array,
              s(:send,
                s(:str, "21"), :oct),
              s(:int, 912),
              s(:send,
                s(:str, "a3"), :hex))),
          s(:array,
            s(:str, "%3o%4d%5x"),
            s(:str, "2191240xa3"),
            s(:array,
              s(:send,
                s(:str, "21"), :oct),
              s(:int, 9124),
              s(:send,
                s(:str, "a3"), :hex))),
          s(:array,
            s(:str, "%3d%3x"),
            s(:str, "12abc"),
            s(:array,
              s(:int, 12),
              s(:send,
                s(:str, "abc"), :hex))),
          s(:array,
            s(:str, "%s%i%d"),
            s(:str, "hello +0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "def"), :hex),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%i%d"),
            s(:str, "hello -0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:send,
                  s(:str, "def"), :hex), :-@),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%i%i%i%i"),
            s(:str, "hello 012 -012 100 1"),
            s(:array,
              s(:str, "hello"),
              s(:int, 10),
              s(:int, -10),
              s(:int, 100),
              s(:int, 1))),
          s(:array,
            s(:str, "%s%i%i%i%i"),
            s(:str, "hello 012 0x12 100 1"),
            s(:array,
              s(:str, "hello"),
              s(:int, 10),
              s(:int, 18),
              s(:int, 100),
              s(:int, 1))),
          s(:array,
            s(:str, "%s%5i%3i%4i"),
            s(:str, "hello 0x123 123 0123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "0x123"), :hex),
              s(:int, 123),
              s(:send,
                s(:str, "0123"), :oct))),
          s(:array,
            s(:str, "%s%3i%4i"),
            s(:str, "hello 1230123"),
            s(:array,
              s(:str, "hello"),
              s(:int, 123),
              s(:send,
                s(:str, "0123"), :oct))),
          s(:array,
            s(:str, "%s%3i"),
            s(:str, "hello 1230"),
            s(:array,
              s(:str, "hello"),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%5x%d"),
            s(:str, "hello 0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "def"), :hex),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%6x%d"),
            s(:str, "hello +0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "def"), :hex),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%6x%d"),
            s(:str, "hello -0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:send,
                  s(:str, "def"), :hex), :-@),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%4x%d"),
            s(:str, "hello -def 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:send,
                  s(:str, "def"), :hex), :-@),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%3x%d"),
            s(:str, "hello def 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "def"), :hex),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%x%d"),
            s(:str, "hello -def 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:send,
                  s(:str, "def"), :hex), :-@),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%x%d"),
            s(:str, "hello -0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:send,
                  s(:str, "def"), :hex), :-@),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%x%d"),
            s(:str, "hello 0xdef 123"),
            s(:array,
              s(:str, "hello"),
              s(:send,
                s(:str, "def"), :hex),
              s(:int, 123))),
          s(:array,
            s(:str, "%s%d%x%s"),
            s(:str, "hello 123 abc def"),
            s(:array,
              s(:str, "hello"),
              s(:int, 123),
              s(:send,
                s(:str, "abc"), :hex),
              s(:str, "def"))),
          s(:array,
            s(:str, "%s%d%o%d"),
            s(:str, "hello 012 012 100"),
            s(:array,
              s(:str, "hello"),
              s(:int, 12),
              s(:int, 10),
              s(:int, 100))),
          s(:array,
            s(:str, "%s%d%o%d"),
            s(:str, "hello 012 -012 100"),
            s(:array,
              s(:str, "hello"),
              s(:int, 12),
              s(:int, -10),
              s(:int, 100))),
          s(:array,
            s(:str, "%s%o%x%d"),
            s(:str, "hello 012 0x12 100"),
            s(:array,
              s(:str, "hello"),
              s(:int, 10),
              s(:int, 18),
              s(:int, 100))),
          s(:array,
            s(:str, "%s%d%o%d"),
            s(:str, "hello 012 +01288"),
            s(:array,
              s(:str, "hello"),
              s(:int, 12),
              s(:int, 10),
              s(:int, 88))),
          s(:array,
            s(:str, "%f %d %s"),
            s(:str, "12.3e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "12.3e23"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%f %d %s"),
            s(:str, "12.3e+23 45 string"),
            s(:array,
              s(:send,
                s(:str, "12.3e23"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%f %d %s"),
            s(:str, "12.3e-23 45 string"),
            s(:array,
              s(:send,
                s(:str, "12.3e-23"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%f %d %s"),
            s(:str, "-12.3e-23 45 string"),
            s(:array,
              s(:send,
                s(:str, "-12.3e-23"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%f %d %s"),
            s(:str, "12.e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "12.e23"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%5f %d %s"),
            s(:str, "1.2e23 string"),
            s(:array,
              s(:send,
                s(:str, "1.2e2"), :to_f),
              s(:int, 3),
              s(:str, "string"))),
          s(:array,
            s(:str, "%5f%d %s"),
            s(:str, "1.2e23 string"),
            s(:array,
              s(:send,
                s(:str, "1.2e2"), :to_f),
              s(:int, 3),
              s(:str, "string"))),
          s(:array,
            s(:str, "%5f%d %d %s"),
            s(:str, "1.2e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "1.2e2"), :to_f),
              s(:int, 3),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%6f %d %d %s"),
            s(:str, "+1.2e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "1.2e2"), :to_f),
              s(:int, 3),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%d %d"),
            s(:str, "123 \n 345"),
            s(:array,
              s(:int, 123),
              s(:int, 345))),
          s(:array,
            s(:str, "%d %*d"),
            s(:str, "123 \n 345"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d %3d789"),
            s(:str, "123 +45789"),
            s(:array,
              s(:int, 123),
              s(:int, 45))),
          s(:array,
            s(:str, "%d %3d%d"),
            s(:str, "123 +456789"),
            s(:array,
              s(:int, 123),
              s(:int, 45),
              s(:int, 6789))),
          s(:array,
            s(:str, "%d %3dabc"),
            s(:str, "123 456abc"),
            s(:array,
              s(:int, 123),
              s(:int, 456))),
          s(:array,
            s(:str, "%d %s"),
            s(:str, "123abc"),
            s(:array,
              s(:int, 123),
              s(:str, "abc"))),
          s(:array,
            s(:str, "%d%s %s"),
            s(:str, "123 abc def"),
            s(:array,
              s(:int, 123),
              s(:str, "abc"),
              s(:str, "def"))),
          s(:array,
            s(:str, "%s%s"),
            s(:str, "abc123 def"),
            s(:array,
              s(:str, "abc123"),
              s(:str, "def"))),
          s(:array,
            s(:str, "%s%s %s"),
            s(:str, "123 abc def"),
            s(:array,
              s(:str, "123"),
              s(:str, "abc"),
              s(:str, "def"))),
          s(:array,
            s(:str, "%s%%%s"),
            s(:str, "abc % def"),
            s(:array,
              s(:str, "abc"),
              s(:str, "def"))),
          s(:array,
            s(:str, "%d %3d %s"),
            s(:str, "+123 456abc"),
            s(:array,
              s(:int, 123),
              s(:int, 456),
              s(:str, "abc"))),
          s(:array,
            s(:str, "%d %3d %s"),
            s(:str, "123 456abc"),
            s(:array,
              s(:int, 123),
              s(:int, 456),
              s(:str, "abc"))),
          s(:array,
            s(:str, "%d %3d %s"),
            s(:str, "123 +456 abc"),
            s(:array,
              s(:int, 123),
              s(:int, 45),
              s(:str, "6"))),
          s(:array,
            s(:str, "%d %3d %s"),
            s(:str, "-123-456abc"),
            s(:array,
              s(:int, -123),
              s(:int, -45),
              s(:str, "6abc"))),
          s(:array,
            s(:str, "%dabc%d"),
            s(:str, "123abc345"),
            s(:array,
              s(:int, 123),
              s(:int, 345))),
          s(:array,
            s(:str, "%d%5s%d"),
            s(:str, "123 abcde12"),
            s(:array,
              s(:int, 123),
              s(:str, "abcde"),
              s(:int, 12))),
          s(:array,
            s(:str, "%5d%5s%5d"),
            s(:str, "12345abcde67890"),
            s(:array,
              s(:int, 12345),
              s(:str, "abcde"),
              s(:int, 67890))),
          s(:array,
            s(:str, "%5d%*5s%5d"),
            s(:str, "12345abcde67890"),
            s(:array,
              s(:int, 12345),
              s(:int, 67890))),
          s(:array,
            s(:str, " 12345%5s%5d"),
            s(:str, "12345abcde67890"),
            s(:array,
              s(:str, "abcde"),
              s(:int, 67890))),
          s(:array,
            s(:str, "%5dabcde%5d"),
            s(:str, "12345abcde67890"),
            s(:array,
              s(:int, 12345),
              s(:int, 67890))),
          s(:array,
            s(:str, "%s%%%*s"),
            s(:str, "abc % def"),
            s(:array,
              s(:str, "abc"))),
          s(:array,
            s(:str, "%*6s %d"),
            s(:str, "string 123"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d %*3d %s"),
            s(:str, "-123-456abc"),
            s(:array,
              s(:int, -123),
              s(:str, "6abc"))),
          s(:array,
            s(:str, "%d%s"),
            s(:str, "123"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%s%d"),
            s(:str, "abc"),
            s(:array,
              s(:str, "abc"))),
          s(:array,
            s(:str, "%f%x"),
            s(:str, "3.2e45x"),
            s(:array,
              s(:send,
                s(:str, "3.2e45x"), :to_f))),
          s(:array,
            s(:str, "%*5f%d %d %s"),
            s(:str, "1.2e23 45 string"),
            s(:array,
              s(:int, 3),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%5f%*d %d %s"),
            s(:str, "1.2e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "1.2e2"), :to_f),
              s(:int, 45),
              s(:str, "string"))),
          s(:array,
            s(:str, "%*5f%*d %*d %s"),
            s(:str, "1.2e23 45 string"),
            s(:array,
              s(:str, "string"))),
          s(:array,
            s(:str, "%f %*d %s"),
            s(:str, "12.e23 45 string"),
            s(:array,
              s(:send,
                s(:str, "12.e23"), :to_f),
              s(:str, "string"))),
          s(:array,
            s(:str, "%s %f %s %d %x%c%c%c%c"),
            s(:str, "float: 1.2e23 dec/hex: 135a23 abc"),
            s(:array,
              s(:str, "float:"),
              s(:send,
                s(:str, "1.2e23"), :to_f),
              s(:str, "dec/hex:"),
              s(:int, 135),
              s(:send,
                s(:str, "a23"), :hex),
              s(:str, " "),
              s(:str, "a"),
              s(:str, "b"),
              s(:str, "c"))),
          s(:array,
            s(:str, "%s\n"),
            s(:str, "blah\n\n\n"),
            s(:array,
              s(:str, "blah"))),
          s(:array,
            s(:str, "%[a\nb]"),
            s(:str, "a\nb"),
            s(:array,
              s(:str, "a\nb"))),
          s(:array,
            s(:str, "%[abc]"),
            s(:str, "acb"),
            s(:array,
              s(:str, "acb"))),
          s(:array,
            s(:str, "%[abc\n]"),
            s(:str, "a\nb"),
            s(:array,
              s(:str, "a\nb"))),
          s(:array,
            s(:str, "%[^abc]"),
            s(:str, "defabc"),
            s(:array,
              s(:str, "def"))),
          s(:array,
            s(:str, "%[-abc]"),
            s(:str, "abc-cba"),
            s(:array,
              s(:str, "abc-cba"))),
          s(:array,
            s(:str, "%[\n]"),
            s(:str, "\n"),
            s(:array,
              s(:str, "\n"))),
          s(:array,
            s(:str, "%[\n]"),
            s(:str, "\nabc"),
            s(:array,
              s(:str, "\n"))),
          s(:array,
            s(:str, "%[\n\t]"),
            s(:str, "\t\n"),
            s(:array,
              s(:str, "\t\n"))),
          s(:array,
            s(:str, "%[a-f]"),
            s(:str, "abczef"),
            s(:array,
              s(:str, "abc"))),
          s(:array,
            s(:str, "%d%3[[:lower:]] %f"),
            s(:str, "123ade1.2"),
            s(:array,
              s(:int, 123),
              s(:str, "ade"),
              s(:float, 1.2))),
          s(:array,
            s(:str, "%d%3[[:lower:]] %f"),
            s(:str, "123ad1.2"),
            s(:array,
              s(:int, 123),
              s(:str, "ad"),
              s(:float, 1.2))),
          s(:array,
            s(:str, "%d%3[[:lower:]] %f"),
            s(:str, "123 ad1.2"),
            s(:array,
              s(:int, 123))),
          s(:array,
            s(:str, "%d%[[:lower:]]"),
            s(:str, "123abcdef1.2"),
            s(:array,
              s(:int, 123),
              s(:str, "abcdef"))),
          s(:array,
            s(:str, "%[[:lower:]]%d"),
            s(:str, "abcdef123"),
            s(:array,
              s(:str, "abcdef"),
              s(:int, 123))),
          s(:array,
            s(:str, "%[[:digit:]]%[[:alpha:]]"),
            s(:str, "123abcdef"),
            s(:array,
              s(:str, "123"),
              s(:str, "abcdef"))),
          s(:array,
            s(:str, "%[[:digit:]]%d"),
            s(:str, "123 123"),
            s(:array,
              s(:str, "123"),
              s(:int, 123))),
          s(:array,
            s(:str, "%[[:upper:]]"),
            s(:str, "ABCdefGHI"),
            s(:array,
              s(:str, "ABC"))),
          s(:array,
            s(:str, "%2f"),
            s(:str, "x"),
            s(:array)),
          s(:array,
            s(:str, "%F"),
            s(:str, "1.23e45"),
            s(:array,
              s(:float, 1.23e+45))),
          s(:array,
            s(:str, "%e"),
            s(:str, "3.25ee"),
            s(:array,
              s(:float, 3.25))),
          s(:array,
            s(:str, "%E"),
            s(:str, "3..25"),
            s(:array,
              s(:float, 3.0))),
          s(:array,
            s(:str, "%g"),
            s(:str, "+3.25"),
            s(:array,
              s(:float, 3.25))),
          s(:array,
            s(:str, "%G"),
            s(:str, "+3.25e2"),
            s(:array,
              s(:float, 325.0))),
          s(:array,
            s(:str, "%f"),
            s(:str, "3.z"),
            s(:array,
              s(:float, 3.0))),
          s(:array,
            s(:str, "%a"),
            s(:str, "0X1P+10"),
            s(:array,
              s(:float, 1024.0))),
          s(:array,
            s(:str, "%A"),
            s(:str, "0x1.deadbeefp+99"),
            s(:array,
              s(:float, 1.1851510441583981e+30))),
          s(:array,
            s(:str, ",%d,%f"),
            s(:str, ",10,1.1"),
            s(:array,
              s(:int, 10),
              s(:float, 1.1))),
          s(:array,
            s(:str, " ,%d,%f"),
            s(:str, " ,10,1.1"),
            s(:array,
              s(:int, 10),
              s(:float, 1.1))),
          s(:array,
            s(:str, "[%d,%f"),
            s(:str, "[10,1.1"),
            s(:array,
              s(:int, 10),
              s(:float, 1.1))),
          s(:array,
            s(:str, " [%d,%f"),
            s(:str, " [10,1.1"),
            s(:array,
              s(:int, 10),
              s(:float, 1.1))))),
      s(:def, :each_test,
        s(:args),
        s(:block,
          s(:send,
            s(:send,
              s(:self), :tests), :each),
          s(:args,
            s(:arg, :test)),
          s(:begin,
            s(:masgn,
              s(:mlhs,
                s(:lvasgn, :format),
                s(:lvasgn, :string)),
              s(:lvar, :test)),
            s(:yield,
              s(:lvar, :test),
              s(:dstr,
                s(:begin,
                  s(:send,
                    s(:lvar, :string), :dump)),
                s(:str, "("),
                s(:begin,
                  s(:send,
                    s(:lvar, :format), :dump)),
                s(:str, ")")))))))),
  s(:class,
    s(:const, nil, :TestStringScanf), nil,
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :Scanf)),
      s(:send, nil, :extend,
        s(:const, nil, :ScanfTests)),
      s(:block,
        s(:send,
          s(:self), :each_test),
        s(:args,
          s(:arg, :test),
          s(:arg, :i)),
        s(:block,
          s(:send, nil, :define_method,
            s(:dstr,
              s(:str, "test_"),
              s(:begin,
                s(:lvar, :i)))),
          s(:args),
          s(:send, nil, :assert_equal,
            s(:send,
              s(:lvar, :test), :[],
              s(:int, 2)),
            s(:send,
              s(:send,
                s(:lvar, :test), :[],
                s(:int, 1)), :scanf,
              s(:send,
                s(:lvar, :test), :[],
                s(:int, 0)))))))),
  s(:class,
    s(:const, nil, :TestIOScanf), nil,
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :Scanf)),
      s(:send, nil, :extend,
        s(:const, nil, :ScanfTests)),
      s(:block,
        s(:send,
          s(:self), :each_test),
        s(:args,
          s(:arg, :test),
          s(:arg, :i)),
        s(:block,
          s(:send, nil, :define_method,
            s(:dstr,
              s(:str, "test_"),
              s(:begin,
                s(:lvar, :i)))),
          s(:args),
          s(:block,
            s(:send,
              s(:const, nil, :Tempfile), :create,
              s(:str, "iotest.dat")),
            s(:args,
              s(:arg, :fh)),
            s(:begin,
              s(:send,
                s(:lvar, :fh), :print,
                s(:send,
                  s(:lvar, :test), :[],
                  s(:int, 1))),
              s(:send,
                s(:lvar, :fh), :rewind),
              s(:send, nil, :assert_equal,
                s(:send,
                  s(:lvar, :test), :[],
                  s(:int, 2)),
                s(:send,
                  s(:lvar, :fh), :scanf,
                  s(:send,
                    s(:lvar, :test), :[],
                    s(:int, 0)))))))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:module,
    s(:const, nil, :TkClipboard),
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :Tk)),
      s(:send, nil, :extend,
        s(:const, nil, :Tk)),
      s(:casgn, nil, :TkCommandNames,
        s(:send,
          s(:array,
            s(:send,
              s(:str, "clipboard"), :freeze)), :freeze)),
      s(:defs,
        s(:self), :clear,
        s(:args,
          s(:optarg, :win,
            s(:nil))),
        s(:if,
          s(:lvar, :win),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "clear"),
            s(:str, "-displayof"),
            s(:lvar, :win)),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "clear")))),
      s(:defs,
        s(:self), :clear_on_display,
        s(:args,
          s(:arg, :win)),
        s(:send, nil, :tk_call_without_enc,
          s(:str, "clipboard"),
          s(:str, "clear"),
          s(:str, "-displayof"),
          s(:lvar, :win))),
      s(:defs,
        s(:self), :get,
        s(:args,
          s(:optarg, :type,
            s(:nil))),
        s(:if,
          s(:lvar, :type),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "get"),
            s(:str, "-type"),
            s(:lvar, :type)),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "get")))),
      s(:defs,
        s(:self), :get_on_display,
        s(:args,
          s(:arg, :win),
          s(:optarg, :type,
            s(:nil))),
        s(:if,
          s(:lvar, :type),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "get"),
            s(:str, "-displayof"),
            s(:lvar, :win),
            s(:str, "-type"),
            s(:lvar, :type)),
          s(:send, nil, :tk_call_without_enc,
            s(:str, "clipboard"),
            s(:str, "get"),
            s(:str, "-displayof"),
            s(:lvar, :win)))),
      s(:defs,
        s(:self), :set,
        s(:args,
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:send, nil, :clear),
          s(:send, nil, :append,
            s(:lvar, :data),
            s(:lvar, :keys)))),
      s(:defs,
        s(:self), :set_on_display,
        s(:args,
          s(:arg, :win),
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:send, nil, :clear,
            s(:lvar, :win)),
          s(:send, nil, :append_on_display,
            s(:lvar, :win),
            s(:lvar, :data),
            s(:lvar, :keys)))),
      s(:defs,
        s(:self), :append,
        s(:args,
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:lvasgn, :args,
            s(:array,
              s(:str, "clipboard"),
              s(:str, "append"))),
          s(:send,
            s(:lvar, :args), :concat,
            s(:send, nil, :hash_kv,
              s(:lvar, :keys))),
          s(:send,
            s(:lvar, :args), :concat,
            s(:array,
              s(:str, "--"),
              s(:lvar, :data))),
          s(:send, nil, :tk_call,
            s(:splat,
              s(:lvar, :args))))),
      s(:defs,
        s(:self), :append_on_display,
        s(:args,
          s(:arg, :win),
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:lvasgn, :args,
            s(:array,
              s(:str, "clipboard"),
              s(:str, "append"),
              s(:str, "-displayof"),
              s(:lvar, :win))),
          s(:send,
            s(:lvar, :args), :concat,
            s(:send, nil, :hash_kv,
              s(:lvar, :keys))),
          s(:send,
            s(:lvar, :args), :concat,
            s(:array,
              s(:str, "--"),
              s(:lvar, :data))),
          s(:send, nil, :tk_call,
            s(:splat,
              s(:lvar, :args))))),
      s(:def, :clear,
        s(:args),
        s(:begin,
          s(:send,
            s(:const, nil, :TkClipboard), :clear_on_display,
            s(:self)),
          s(:self))),
      s(:def, :get,
        s(:args,
          s(:optarg, :type,
            s(:nil))),
        s(:send,
          s(:const, nil, :TkClipboard), :get_on_display,
          s(:self),
          s(:lvar, :type))),
      s(:def, :set,
        s(:args,
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:send,
            s(:const, nil, :TkClipboard), :set_on_display,
            s(:self),
            s(:lvar, :data),
            s(:lvar, :keys)),
          s(:self))),
      s(:def, :append,
        s(:args,
          s(:arg, :data),
          s(:optarg, :keys,
            s(:nil))),
        s(:begin,
          s(:send,
            s(:const, nil, :TkClipboard), :append_on_display,
            s(:self),
            s(:lvar, :data),
            s(:lvar, :keys)),
          s(:self))))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:module,
    s(:const, nil, :TkKinput),
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :Tk)),
      s(:send, nil, :extend,
        s(:const, nil, :Tk)),
      s(:casgn, nil, :TkCommandNames,
        s(:send,
          s(:array,
            s(:send,
              s(:str, "kinput_start"), :freeze),
            s(:send,
              s(:str, "kinput_send_spot"), :freeze),
            s(:send,
              s(:str, "kanjiInput"), :freeze)), :freeze)),
      s(:defs,
        s(:const, nil, :TkKinput), :start,
        s(:args,
          s(:arg, :win),
          s(:optarg, :style,
            s(:const, nil, :None))),
        s(:send, nil, :tk_call,
          s(:str, "kinput_start"),
          s(:lvar, :win),
          s(:lvar, :style))),
      s(:def, :kinput_start,
        s(:args,
          s(:optarg, :style,
            s(:const, nil, :None))),
        s(:send,
          s(:const, nil, :TkKinput), :start,
          s(:self),
          s(:lvar, :style))),
      s(:defs,
        s(:const, nil, :TkKinput), :send_spot,
        s(:args,
          s(:arg, :win)),
        s(:send, nil, :tk_call,
          s(:str, "kinput_send_spot"),
          s(:lvar, :win))),
      s(:def, :kinput_send_spot,
        s(:args),
        s(:send,
          s(:const, nil, :TkKinput), :send_spot,
          s(:self))),
      s(:defs,
        s(:const, nil, :TkKinput), :input_start,
        s(:args,
          s(:arg, :win),
          s(:optarg, :keys,
            s(:nil))),
        s(:send, nil, :tk_call,
          s(:str, "kanjiInput"),
          s(:str, "start"),
          s(:lvar, :win),
          s(:splat,
            s(:send, nil, :hash_kv,
              s(:lvar, :keys))))),
      s(:def, :kanji_input_start,
        s(:args,
          s(:optarg, :keys,
            s(:nil))),
        s(:send,
          s(:const, nil, :TkKinput), :input_start,
          s(:self),
          s(:lvar, :keys))),
      s(:defs,
        s(:const, nil, :TkKinput), :attribute_config,
        s(:args,
          s(:arg, :win),
          s(:arg, :slot),
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:if,
          s(:send,
            s(:lvar, :slot), :kind_of?,
            s(:const, nil, :Hash)),
          s(:send, nil, :tk_call,
            s(:str, "kanjiInput"),
            s(:str, "attribute"),
            s(:lvar, :win),
            s(:splat,
              s(:send, nil, :hash_kv,
                s(:lvar, :slot)))),
          s(:send, nil, :tk_call,
            s(:str, "kanjiInput"),
            s(:str, "attribute"),
            s(:lvar, :win),
            s(:dstr,
              s(:str, "-"),
              s(:begin,
                s(:lvar, :slot))),
            s(:lvar, :value)))),
      s(:def, :kinput_attribute_config,
        s(:args,
          s(:arg, :slot),
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:send,
          s(:const, nil, :TkKinput), :attribute_config,
          s(:self),
          s(:lvar, :slot),
          s(:lvar, :value))),
      s(:defs,
        s(:const, nil, :TkKinput), :attribute_info,
        s(:args,
          s(:arg, :win),
          s(:optarg, :slot,
            s(:nil))),
        s(:if,
          s(:lvar, :slot),
          s(:begin,
            s(:lvasgn, :conf,
              s(:send, nil, :tk_split_list,
                s(:send, nil, :tk_call,
                  s(:str, "kanjiInput"),
                  s(:str, "attribute"),
                  s(:lvar, :win),
                  s(:dstr,
                    s(:str, "-"),
                    s(:begin,
                      s(:lvar, :slot)))))),
            s(:send,
              s(:lvar, :conf), :[]=,
              s(:int, 0),
              s(:send,
                s(:send,
                  s(:lvar, :conf), :[],
                  s(:int, 0)), :[],
                s(:irange,
                  s(:int, 1),
                  s(:int, -1)))),
            s(:lvar, :conf)),
          s(:block,
            s(:send,
              s(:send, nil, :tk_split_list,
                s(:send, nil, :tk_call,
                  s(:str, "kanjiInput"),
                  s(:str, "attribute"),
                  s(:lvar, :win))), :collect),
            s(:args,
              s(:arg, :conf)),
            s(:begin,
              s(:send,
                s(:lvar, :conf), :[]=,
                s(:int, 0),
                s(:send,
                  s(:send,
                    s(:lvar, :conf), :[],
                    s(:int, 0)), :[],
                  s(:irange,
                    s(:int, 1),
                    s(:int, -1)))),
              s(:lvar, :conf))))),
      s(:def, :kinput_attribute_info,
        s(:args,
          s(:optarg, :slot,
            s(:nil))),
        s(:send,
          s(:const, nil, :TkKinput), :attribute_info,
          s(:self),
          s(:lvar, :slot))),
      s(:defs,
        s(:const, nil, :TkKinput), :input_end,
        s(:args,
          s(:arg, :win)),
        s(:send, nil, :tk_call,
          s(:str, "kanjiInput"),
          s(:str, "end"),
          s(:lvar, :win))),
      s(:def, :kanji_input_end,
        s(:args),
        s(:send,
          s(:const, nil, :TkKinput), :input_end,
          s(:self))))))

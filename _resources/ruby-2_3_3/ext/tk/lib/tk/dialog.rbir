s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send, nil, :require,
    s(:str, "tk/variable.rb")),
  s(:class,
    s(:const, nil, :TkDialogObj),
    s(:const, nil, :TkWindow),
    s(:begin,
      s(:send, nil, :extend,
        s(:const, nil, :Tk)),
      s(:casgn, nil, :TkCommandNames,
        s(:send,
          s(:array,
            s(:send,
              s(:str, "tk_dialog"), :freeze)), :freeze)),
      s(:defs,
        s(:self), :show,
        s(:args,
          s(:restarg, :args)),
        s(:begin,
          s(:lvasgn, :dlog,
            s(:send,
              s(:self), :new,
              s(:splat,
                s(:lvar, :args)))),
          s(:send,
            s(:lvar, :dlog), :show),
          s(:lvar, :dlog))),
      s(:def, :_set_button_config,
        s(:args,
          s(:arg, :configs)),
        s(:begin,
          s(:lvasgn, :set_config,
            s(:block,
              s(:send, nil, :proc),
              s(:args,
                s(:arg, :c),
                s(:arg, :i)),
              s(:begin,
                s(:if,
                  s(:and,
                    s(:gvar, :$VERBOSE),
                    s(:begin,
                      s(:or,
                        s(:send,
                          s(:lvar, :c), :has_key?,
                          s(:str, "command")),
                        s(:send,
                          s(:lvar, :c), :has_key?,
                          s(:sym, :command))))),
                  s(:send,
                    s(:const, nil, :STDERR), :print,
                    s(:send,
                      s(:str, "Warning: cannot give a command option "), :+,
                      s(:dstr,
                        s(:str, "to the dialog button"),
                        s(:begin,
                          s(:lvar, :i)),
                        s(:str, ". It was removed.\n")))), nil),
                s(:send,
                  s(:lvar, :c), :delete,
                  s(:str, "command")),
                s(:send,
                  s(:lvar, :c), :delete,
                  s(:sym, :command)),
                s(:send,
                  s(:ivar, :@config), :<<,
                  s(:send,
                    s(:send,
                      s(:send,
                        s(:send,
                          s(:send,
                            s(:ivar, :@path), :+,
                            s(:str, ".button")), :+,
                          s(:send,
                            s(:lvar, :i), :to_s)), :+,
                        s(:str, " configure ")), :+,
                      s(:send, nil, :array2tk_list,
                        s(:send, nil, :hash_kv,
                          s(:lvar, :c)))), :+,
                    s(:str, "; ")))))),
          s(:case,
            s(:lvar, :configs),
            s(:when,
              s(:const, nil, :Proc),
              s(:block,
                s(:send,
                  s(:ivar, :@buttons), :each_index),
                s(:args,
                  s(:arg, :i)),
                s(:if,
                  s(:send,
                    s(:begin,
                      s(:lvasgn, :c,
                        s(:send,
                          s(:lvar, :configs), :call,
                          s(:lvar, :i)))), :kind_of?,
                    s(:const, nil, :Hash)),
                  s(:send,
                    s(:lvar, :set_config), :call,
                    s(:lvar, :c),
                    s(:lvar, :i)), nil))),
            s(:when,
              s(:const, nil, :Array),
              s(:block,
                s(:send,
                  s(:ivar, :@buttons), :each_index),
                s(:args,
                  s(:arg, :i)),
                s(:if,
                  s(:send,
                    s(:begin,
                      s(:lvasgn, :c,
                        s(:send,
                          s(:lvar, :configs), :[],
                          s(:lvar, :i)))), :kind_of?,
                    s(:const, nil, :Hash)),
                  s(:send,
                    s(:lvar, :set_config), :call,
                    s(:lvar, :c),
                    s(:lvar, :i)), nil))),
            s(:when,
              s(:const, nil, :Hash),
              s(:block,
                s(:send,
                  s(:ivar, :@buttons), :each_with_index),
                s(:args,
                  s(:arg, :s),
                  s(:arg, :i)),
                s(:if,
                  s(:send,
                    s(:begin,
                      s(:lvasgn, :c,
                        s(:send,
                          s(:lvar, :configs), :[],
                          s(:lvar, :s)))), :kind_of?,
                    s(:const, nil, :Hash)),
                  s(:send,
                    s(:lvar, :set_config), :call,
                    s(:lvar, :c),
                    s(:lvar, :i)), nil))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@config), :!=,
              s(:str, "")),
            s(:ivasgn, :@config,
              s(:send,
                s(:send, nil, :array2tk_list,
                  s(:array,
                    s(:str, "after"),
                    s(:str, "idle"),
                    s(:ivar, :@config))), :<<,
                s(:str, ";"))), nil))),
      s(:send, nil, :private,
        s(:sym, :_set_button_config)),
      s(:def, :create_self,
        s(:args,
          s(:arg, :keys)),
        s(:begin,
          s(:ivasgn, :@val,
            s(:nil)),
          s(:ivasgn, :@title,
            s(:send, nil, :title)),
          s(:ivasgn, :@message,
            s(:send, nil, :message)),
          s(:ivasgn, :@message_config,
            s(:send, nil, :message_config)),
          s(:ivasgn, :@msgframe_config,
            s(:send, nil, :msgframe_config)),
          s(:ivasgn, :@bitmap,
            s(:send, nil, :bitmap)),
          s(:ivasgn, :@bitmap_config,
            s(:send, nil, :message_config)),
          s(:ivasgn, :@default_button,
            s(:send, nil, :default_button)),
          s(:ivasgn, :@buttons,
            s(:send, nil, :buttons)),
          s(:ivasgn, :@button_configs,
            s(:block,
              s(:send, nil, :proc),
              s(:args,
                s(:arg, :num)),
              s(:send, nil, :button_configs,
                s(:lvar, :num)))),
          s(:ivasgn, :@btnframe_config,
            s(:send, nil, :btnframe_config)),
          s(:ivasgn, :@config,
            s(:str, "")),
          s(:ivasgn, :@command,
            s(:send, nil, :prev_command)),
          s(:if,
            s(:send,
              s(:lvar, :keys), :kind_of?,
              s(:const, nil, :Hash)),
            s(:begin,
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "title")),
                s(:ivasgn, :@title,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "title"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "message")),
                s(:ivasgn, :@message,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "message"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "bitmap")),
                s(:ivasgn, :@bitmap,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "bitmap"))), nil),
              s(:if,
                s(:ivar, :@bitmap), nil,
                s(:ivasgn, :@bitmap,
                  s(:str, ""))),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "default")),
                s(:ivasgn, :@default_button,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "default"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "buttons")),
                s(:ivasgn, :@buttons,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "buttons"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "prev_command")),
                s(:ivasgn, :@command,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "prev_command"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "message_config")),
                s(:ivasgn, :@message_config,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "message_config"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "msgframe_config")),
                s(:ivasgn, :@msgframe_config,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "msgframe_config"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "bitmap_config")),
                s(:ivasgn, :@bitmap_config,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "bitmap_config"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "button_configs")),
                s(:ivasgn, :@button_configs,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "button_configs"))), nil),
              s(:if,
                s(:send,
                  s(:lvar, :keys), :key?,
                  s(:str, "btnframe_config")),
                s(:ivasgn, :@btnframe_config,
                  s(:send,
                    s(:lvar, :keys), :[],
                    s(:str, "btnframe_config"))), nil)), nil),
          s(:if,
            s(:send,
              s(:ivar, :@buttons), :kind_of?,
              s(:const, nil, :Array)),
            s(:begin,
              s(:send, nil, :_set_button_config,
                s(:block,
                  s(:send,
                    s(:ivar, :@buttons), :collect),
                  s(:args,
                    s(:arg, :cfg)),
                  s(:if,
                    s(:begin,
                      s(:send,
                        s(:lvar, :cfg), :kind_of?,
                        s(:const, nil, :Array))),
                    s(:send,
                      s(:lvar, :cfg), :[],
                      s(:int, 1)),
                    s(:nil)))),
              s(:ivasgn, :@buttons,
                s(:block,
                  s(:send,
                    s(:ivar, :@buttons), :collect),
                  s(:args,
                    s(:arg, :cfg)),
                  s(:if,
                    s(:begin,
                      s(:send,
                        s(:lvar, :cfg), :kind_of?,
                        s(:const, nil, :Array))),
                    s(:send,
                      s(:lvar, :cfg), :[],
                      s(:int, 0)),
                    s(:lvar, :cfg))))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@buttons), :kind_of?,
              s(:const, nil, :Hash)),
            s(:begin,
              s(:send, nil, :_set_button_config,
                s(:ivar, :@buttons)),
              s(:ivasgn, :@buttons,
                s(:send,
                  s(:ivar, :@buttons), :keys))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@buttons), :kind_of?,
              s(:const, nil, :String)),
            s(:ivasgn, :@buttons,
              s(:send, nil, :tk_split_simplelist,
                s(:ivar, :@buttons))), nil),
          s(:if,
            s(:ivar, :@buttons), nil,
            s(:ivasgn, :@buttons,
              s(:array))),
          s(:if,
            s(:send,
              s(:ivar, :@message_config), :kind_of?,
              s(:const, nil, :Hash)),
            s(:send,
              s(:ivar, :@config), :<<,
              s(:send,
                s(:send,
                  s(:send,
                    s(:ivar, :@path), :+,
                    s(:str, ".msg configure ")), :+,
                  s(:send, nil, :array2tk_list,
                    s(:send, nil, :hash_kv,
                      s(:ivar, :@message_config)))), :+,
                s(:str, ";"))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@msgframe_config), :kind_of?,
              s(:const, nil, :Hash)),
            s(:send,
              s(:ivar, :@config), :<<,
              s(:send,
                s(:send,
                  s(:send,
                    s(:ivar, :@path), :+,
                    s(:str, ".top configure ")), :+,
                  s(:send, nil, :array2tk_list,
                    s(:send, nil, :hash_kv,
                      s(:ivar, :@msgframe_config)))), :+,
                s(:str, ";"))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@btnframe_config), :kind_of?,
              s(:const, nil, :Hash)),
            s(:send,
              s(:ivar, :@config), :<<,
              s(:send,
                s(:send,
                  s(:send,
                    s(:ivar, :@path), :+,
                    s(:str, ".bot configure ")), :+,
                  s(:send, nil, :array2tk_list,
                    s(:send, nil, :hash_kv,
                      s(:ivar, :@btnframe_config)))), :+,
                s(:str, ";"))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@bitmap_config), :kind_of?,
              s(:const, nil, :Hash)),
            s(:send,
              s(:ivar, :@config), :<<,
              s(:send,
                s(:send,
                  s(:send,
                    s(:ivar, :@path), :+,
                    s(:str, ".bitmap configure ")), :+,
                  s(:send, nil, :array2tk_list,
                    s(:send, nil, :hash_kv,
                      s(:ivar, :@bitmap_config)))), :+,
                s(:str, ";"))), nil),
          s(:if,
            s(:ivar, :@button_configs),
            s(:send, nil, :_set_button_config,
              s(:ivar, :@button_configs)), nil))),
      s(:send, nil, :private,
        s(:sym, :create_self)),
      s(:def, :show,
        s(:args),
        s(:begin,
          s(:if,
            s(:send,
              s(:const, nil, :TkComm), :_callback_entry?,
              s(:ivar, :@command)),
            s(:send,
              s(:ivar, :@command), :call,
              s(:self)), nil),
          s(:if,
            s(:send,
              s(:ivar, :@default_button), :kind_of?,
              s(:const, nil, :String)),
            s(:lvasgn, :default_button,
              s(:send,
                s(:ivar, :@buttons), :index,
                s(:ivar, :@default_button))),
            s(:lvasgn, :default_button,
              s(:ivar, :@default_button))),
          s(:if,
            s(:send,
              s(:lvar, :default_button), :==,
              s(:nil)),
            s(:lvasgn, :default_button,
              s(:str, "")), nil),
          s(:send,
            s(:const, nil, :Tk), :ip_eval,
            s(:ivar, :@config)),
          s(:ivasgn, :@val,
            s(:send,
              s(:send,
                s(:const, nil, :Tk), :ip_eval,
                s(:send, nil, :array2tk_list,
                  s(:send,
                    s(:array,
                      s(:send,
                        s(:const,
                          s(:send,
                            s(:self), :class), :TkCommandNames), :[],
                        s(:int, 0)),
                      s(:ivar, :@path),
                      s(:ivar, :@title),
                      s(:ivar, :@message),
                      s(:ivar, :@bitmap),
                      s(:send, nil, :String,
                        s(:lvar, :default_button))), :concat,
                    s(:ivar, :@buttons)))), :to_i)))),
      s(:def, :value,
        s(:args),
        s(:ivar, :@val)),
      s(:def, :name,
        s(:args),
        s(:if,
          s(:begin,
            s(:ivar, :@val)),
          s(:send,
            s(:ivar, :@buttons), :[],
            s(:ivar, :@val)),
          s(:nil))),
      s(:send, nil, :private),
      s(:def, :title,
        s(:args),
        s(:return,
          s(:str, "DIALOG"))),
      s(:def, :message,
        s(:args),
        s(:return,
          s(:str, "MESSAGE"))),
      s(:def, :message_config,
        s(:args),
        s(:return,
          s(:nil))),
      s(:def, :msgframe_config,
        s(:args),
        s(:return,
          s(:nil))),
      s(:def, :bitmap,
        s(:args),
        s(:return,
          s(:str, "info"))),
      s(:def, :bitmap_config,
        s(:args),
        s(:return,
          s(:nil))),
      s(:def, :default_button,
        s(:args),
        s(:return,
          s(:int, 0))),
      s(:def, :buttons,
        s(:args),
        s(:return,
          s(:array,
            s(:str, "BUTTON1"),
            s(:str, "BUTTON2")))),
      s(:def, :button_configs,
        s(:args,
          s(:arg, :num)),
        s(:return,
          s(:nil))),
      s(:def, :btnframe_config,
        s(:args),
        s(:return,
          s(:nil))),
      s(:def, :prev_command,
        s(:args),
        s(:return,
          s(:nil))))),
  s(:casgn, nil, :TkDialog2,
    s(:const, nil, :TkDialogObj)),
  s(:class,
    s(:const, nil, :TkDialog),
    s(:const, nil, :TkDialogObj),
    s(:begin,
      s(:defs,
        s(:self), :show,
        s(:args,
          s(:restarg, :args)),
        s(:send,
          s(:self), :new,
          s(:splat,
            s(:lvar, :args)))),
      s(:def, :initialize,
        s(:args,
          s(:restarg, :args)),
        s(:begin,
          s(:super,
            s(:splat,
              s(:lvar, :args))),
          s(:send, nil, :show))))),
  s(:class,
    s(:const, nil, :TkWarningObj),
    s(:const, nil, :TkDialogObj),
    s(:begin,
      s(:def, :initialize,
        s(:args,
          s(:optarg, :parent,
            s(:nil)),
          s(:optarg, :mes,
            s(:nil))),
        s(:begin,
          s(:if,
            s(:send,
              s(:lvar, :mes), :!),
            s(:if,
              s(:send,
                s(:lvar, :parent), :kind_of?,
                s(:const, nil, :TkWindow)),
              s(:lvasgn, :mes,
                s(:str, "")),
              s(:begin,
                s(:lvasgn, :mes,
                  s(:send,
                    s(:lvar, :parent), :to_s)),
                s(:lvasgn, :parent,
                  s(:nil)))), nil),
          s(:super,
            s(:lvar, :parent),
            s(:hash,
              s(:pair,
                s(:sym, :message),
                s(:lvar, :mes)))))),
      s(:def, :show,
        s(:args,
          s(:optarg, :mes,
            s(:nil))),
        s(:begin,
          s(:lvasgn, :mes_bup,
            s(:ivar, :@message)),
          s(:if,
            s(:lvar, :mes),
            s(:ivasgn, :@message,
              s(:lvar, :mes)), nil),
          s(:lvasgn, :ret,
            s(:super)),
          s(:ivasgn, :@message,
            s(:lvar, :mes_bup)),
          s(:lvar, :ret))),
      s(:send, nil, :private),
      s(:def, :title,
        s(:args),
        s(:return,
          s(:str, "WARNING"))),
      s(:def, :bitmap,
        s(:args),
        s(:return,
          s(:str, "warning"))),
      s(:def, :default_button,
        s(:args),
        s(:return,
          s(:int, 0))),
      s(:def, :buttons,
        s(:args),
        s(:return,
          s(:str, "OK"))))),
  s(:casgn, nil, :TkWarning2,
    s(:const, nil, :TkWarningObj)),
  s(:class,
    s(:const, nil, :TkWarning),
    s(:const, nil, :TkWarningObj),
    s(:begin,
      s(:defs,
        s(:self), :show,
        s(:args,
          s(:restarg, :args)),
        s(:send,
          s(:self), :new,
          s(:splat,
            s(:lvar, :args)))),
      s(:def, :initialize,
        s(:args,
          s(:restarg, :args)),
        s(:begin,
          s(:super,
            s(:splat,
              s(:lvar, :args))),
          s(:send, nil, :show))))))

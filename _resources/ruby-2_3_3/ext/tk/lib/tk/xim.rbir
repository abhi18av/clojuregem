s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:module,
    s(:const, nil, :TkXIM),
    s(:begin,
      s(:send, nil, :include,
        s(:const, nil, :Tk)),
      s(:send, nil, :extend,
        s(:const, nil, :Tk)),
      s(:casgn, nil, :TkCommandNames,
        s(:send,
          s(:array,
            s(:send,
              s(:str, "imconfigure"), :freeze)), :freeze)),
      s(:defs,
        s(:const, nil, :TkXIM), :useinputmethods,
        s(:args,
          s(:optarg, :value,
            s(:const, nil, :None)),
          s(:optarg, :win,
            s(:nil))),
        s(:if,
          s(:send,
            s(:lvar, :value), :==,
            s(:const, nil, :None)),
          s(:if,
            s(:lvar, :win),
            s(:send, nil, :bool,
              s(:send, nil, :tk_call_without_enc,
                s(:str, "tk"),
                s(:str, "useinputmethods"),
                s(:str, "-displayof"),
                s(:lvar, :win))),
            s(:send, nil, :bool,
              s(:send, nil, :tk_call_without_enc,
                s(:str, "tk"),
                s(:str, "useinputmethods")))),
          s(:if,
            s(:lvar, :win),
            s(:send, nil, :bool,
              s(:send, nil, :tk_call_without_enc,
                s(:str, "tk"),
                s(:str, "useinputmethods"),
                s(:str, "-displayof"),
                s(:lvar, :win),
                s(:lvar, :value))),
            s(:send, nil, :bool,
              s(:send, nil, :tk_call_without_enc,
                s(:str, "tk"),
                s(:str, "useinputmethods"),
                s(:lvar, :value)))))),
      s(:defs,
        s(:const, nil, :TkXIM), :useinputmethods_displayof,
        s(:args,
          s(:arg, :win),
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:send,
          s(:const, nil, :TkXIM), :useinputmethods,
          s(:lvar, :value),
          s(:lvar, :win))),
      s(:defs,
        s(:const, nil, :TkXIM), :caret,
        s(:args,
          s(:arg, :win),
          s(:optarg, :keys,
            s(:nil))),
        s(:if,
          s(:lvar, :keys),
          s(:begin,
            s(:send, nil, :tk_call_without_enc,
              s(:str, "tk"),
              s(:str, "caret"),
              s(:lvar, :win),
              s(:splat,
                s(:send, nil, :hash_kv,
                  s(:lvar, :keys)))),
            s(:self)),
          s(:begin,
            s(:lvasgn, :lst,
              s(:send, nil, :tk_split_list,
                s(:send, nil, :tk_call_without_enc,
                  s(:str, "tk"),
                  s(:str, "caret"),
                  s(:lvar, :win)))),
            s(:lvasgn, :info,
              s(:hash)),
            s(:while,
              s(:lvasgn, :key,
                s(:send,
                  s(:lvar, :lst), :shift)),
              s(:send,
                s(:lvar, :info), :[]=,
                s(:send,
                  s(:lvar, :key), :[],
                  s(:irange,
                    s(:int, 1),
                    s(:int, -1))),
                s(:send,
                  s(:lvar, :lst), :shift))),
            s(:lvar, :info)))),
      s(:defs,
        s(:const, nil, :TkXIM), :configure,
        s(:args,
          s(:arg, :win),
          s(:arg, :slot),
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:kwbegin,
          s(:rescue,
            s(:if,
              s(:and,
                s(:send,
                  s(:regexp,
                    s(:str, "^8\\.*"),
                    s(:regopt)), :===,
                  s(:const,
                    s(:const, nil, :Tk), :TK_VERSION)),
                s(:const, nil, :JAPANIZED_TK)),
              s(:if,
                s(:send,
                  s(:lvar, :slot), :kind_of?,
                  s(:const, nil, :Hash)),
                s(:send, nil, :tk_call,
                  s(:str, "imconfigure"),
                  s(:lvar, :win),
                  s(:splat,
                    s(:send, nil, :hash_kv,
                      s(:lvar, :slot)))),
                s(:send, nil, :tk_call,
                  s(:str, "imconfigure"),
                  s(:lvar, :win),
                  s(:dstr,
                    s(:str, "-"),
                    s(:begin,
                      s(:lvar, :slot))),
                  s(:lvar, :value))), nil),
            s(:resbody, nil, nil, nil), nil))),
      s(:defs,
        s(:const, nil, :TkXIM), :configinfo,
        s(:args,
          s(:arg, :win),
          s(:optarg, :slot,
            s(:nil))),
        s(:if,
          s(:const,
            s(:const, nil, :TkComm), :GET_CONFIGINFOwoRES_AS_ARRAY),
          s(:kwbegin,
            s(:rescue,
              s(:if,
                s(:and,
                  s(:send,
                    s(:regexp,
                      s(:str, "^8\\.*"),
                      s(:regopt)), :===,
                    s(:const,
                      s(:const, nil, :Tk), :TK_VERSION)),
                  s(:const, nil, :JAPANIZED_TK)),
                s(:if,
                  s(:lvar, :slot),
                  s(:begin,
                    s(:lvasgn, :conf,
                      s(:send, nil, :tk_split_list,
                        s(:send, nil, :tk_call,
                          s(:str, "imconfigure"),
                          s(:lvar, :win),
                          s(:dstr,
                            s(:str, "-"),
                            s(:begin,
                              s(:lvar, :slot)))))),
                    s(:send,
                      s(:lvar, :conf), :[]=,
                      s(:int, 0),
                      s(:send,
                        s(:send,
                          s(:lvar, :conf), :[],
                          s(:int, 0)), :[],
                        s(:irange,
                          s(:int, 1),
                          s(:int, -1)))),
                    s(:lvar, :conf)),
                  s(:block,
                    s(:send,
                      s(:send, nil, :tk_split_list,
                        s(:send, nil, :tk_call,
                          s(:str, "imconfigure"),
                          s(:lvar, :win))), :collect),
                    s(:args,
                      s(:arg, :conf)),
                    s(:begin,
                      s(:send,
                        s(:lvar, :conf), :[]=,
                        s(:int, 0),
                        s(:send,
                          s(:send,
                            s(:lvar, :conf), :[],
                            s(:int, 0)), :[],
                          s(:irange,
                            s(:int, 1),
                            s(:int, -1)))),
                      s(:lvar, :conf)))),
                s(:array)),
              s(:resbody, nil, nil,
                s(:array)), nil)),
          s(:send,
            s(:const, nil, :TkXIM), :current_configinfo,
            s(:lvar, :win),
            s(:lvar, :slot)))),
      s(:defs,
        s(:const, nil, :TkXIM), :current_configinfo,
        s(:args,
          s(:arg, :win),
          s(:optarg, :slot,
            s(:nil))),
        s(:kwbegin,
          s(:rescue,
            s(:if,
              s(:and,
                s(:send,
                  s(:regexp,
                    s(:str, "^8\\.*"),
                    s(:regopt)), :===,
                  s(:const,
                    s(:const, nil, :Tk), :TK_VERSION)),
                s(:const, nil, :JAPANIZED_TK)),
              s(:if,
                s(:lvar, :slot),
                s(:begin,
                  s(:lvasgn, :conf,
                    s(:send, nil, :tk_split_list,
                      s(:send, nil, :tk_call,
                        s(:str, "imconfigure"),
                        s(:lvar, :win),
                        s(:dstr,
                          s(:str, "-"),
                          s(:begin,
                            s(:lvar, :slot)))))),
                  s(:hash,
                    s(:pair,
                      s(:send,
                        s(:send,
                          s(:lvar, :conf), :[],
                          s(:int, 0)), :[],
                        s(:irange,
                          s(:int, 1),
                          s(:int, -1))),
                      s(:send,
                        s(:lvar, :conf), :[],
                        s(:int, 1))))),
                s(:begin,
                  s(:lvasgn, :ret,
                    s(:hash)),
                  s(:block,
                    s(:send,
                      s(:send, nil, :tk_split_list,
                        s(:send, nil, :tk_call,
                          s(:str, "imconfigure"),
                          s(:lvar, :win))), :each),
                    s(:args,
                      s(:arg, :conf)),
                    s(:send,
                      s(:lvar, :ret), :[]=,
                      s(:send,
                        s(:send,
                          s(:lvar, :conf), :[],
                          s(:int, 0)), :[],
                        s(:irange,
                          s(:int, 1),
                          s(:int, -1))),
                      s(:send,
                        s(:lvar, :conf), :[],
                        s(:int, 1)))),
                  s(:lvar, :ret))),
              s(:hash)),
            s(:resbody, nil, nil,
              s(:hash)), nil))),
      s(:def, :useinputmethods,
        s(:args,
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:send,
          s(:const, nil, :TkXIM), :useinputmethods,
          s(:lvar, :value),
          s(:self))),
      s(:def, :caret,
        s(:args,
          s(:optarg, :keys,
            s(:nil))),
        s(:send,
          s(:const, nil, :TkXIM), :caret,
          s(:self),
          s(:lvasgn, :keys,
            s(:nil)))),
      s(:def, :imconfigure,
        s(:args,
          s(:arg, :slot),
          s(:optarg, :value,
            s(:const, nil, :None))),
        s(:send,
          s(:const, nil, :TkXIM), :configure,
          s(:self),
          s(:lvar, :slot),
          s(:lvar, :value))),
      s(:def, :imconfiginfo,
        s(:args,
          s(:optarg, :slot,
            s(:nil))),
        s(:send,
          s(:const, nil, :TkXIM), :configinfo,
          s(:self),
          s(:lvar, :slot))))))

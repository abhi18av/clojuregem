s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send, nil, :require,
    s(:str, "tk/frame")),
  s(:send, nil, :require,
    s(:str, "tkextlib/bwidget.rb")),
  s(:send, nil, :require,
    s(:str, "tkextlib/bwidget/progressbar")),
  s(:module,
    s(:const, nil, :Tk),
    s(:module,
      s(:const, nil, :BWidget),
      s(:class,
        s(:const, nil, :MainFrame),
        s(:const, nil, :TkWindow), nil))),
  s(:class,
    s(:const,
      s(:const,
        s(:const, nil, :Tk), :BWidget), :MainFrame), nil,
    s(:begin,
      s(:casgn, nil, :TkCommandNames,
        s(:send,
          s(:array,
            s(:send,
              s(:str, "MainFrame"), :freeze)), :freeze)),
      s(:casgn, nil, :WidgetClassName,
        s(:send,
          s(:str, "MainFrame"), :freeze)),
      s(:or_asgn,
        s(:send,
          s(:const, nil, :WidgetClassNames), :[],
          s(:const, nil, :WidgetClassName)),
        s(:self)),
      s(:def, :__strval_optkeys,
        s(:args),
        s(:send,
          s(:super), :<<,
          s(:str, "progressfg"))),
      s(:send, nil, :private,
        s(:sym, :__strval_optkeys)),
      s(:def, :__tkvariable_optkeys,
        s(:args),
        s(:send,
          s(:super), :<<,
          s(:str, "progressvar"))),
      s(:send, nil, :private,
        s(:sym, :__tkvariable_optkeys)),
      s(:def, :__val2ruby_optkeys,
        s(:args),
        s(:hash,
          s(:pair,
            s(:str, "menu"),
            s(:block,
              s(:send, nil, :proc),
              s(:args,
                s(:arg, :v)),
              s(:block,
                s(:send,
                  s(:send, nil, :simplelist,
                    s(:lvar, :v)), :collect!),
                s(:args,
                  s(:arg, :elem)),
                s(:send, nil, :simplelist,
                  s(:lvar, :v))))))),
      s(:send, nil, :private,
        s(:sym, :__val2ruby_optkeys)),
      s(:def, :add_indicator,
        s(:args,
          s(:optarg, :keys,
            s(:hash)),
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "addindicator"),
                s(:splat,
                  s(:send, nil, :hash_kv,
                    s(:lvar, :keys)))))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :add_toolbar,
        s(:args,
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "addtoolbar")))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :get_frame,
        s(:args,
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "getframe")))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :get_indicator,
        s(:args,
          s(:arg, :idx),
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "getindicator"),
                s(:lvar, :idx)))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :get_menu,
        s(:args,
          s(:arg, :menu_id),
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "getmenu"),
                s(:lvar, :menu_id)))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :get_toolbar,
        s(:args,
          s(:arg, :idx),
          s(:blockarg, :b)),
        s(:begin,
          s(:lvasgn, :win,
            s(:send, nil, :window,
              s(:send, nil, :tk_send,
                s(:str, "gettoolbar"),
                s(:lvar, :idx)))),
          s(:if,
            s(:lvar, :b),
            s(:if,
              s(:const,
                s(:const, nil, :TkCore), :WITH_RUBY_VM),
              s(:send,
                s(:lvar, :win), :instance_exec,
                s(:self),
                s(:block_pass,
                  s(:lvar, :b))),
              s(:send,
                s(:lvar, :win), :instance_eval,
                s(:block_pass,
                  s(:lvar, :b)))), nil),
          s(:lvar, :win))),
      s(:def, :get_menustate,
        s(:args,
          s(:arg, :tag)),
        s(:send, nil, :tk_send,
          s(:str, "getmenustate"),
          s(:lvar, :tag))),
      s(:def, :set_menustate,
        s(:args,
          s(:arg, :tag),
          s(:arg, :state)),
        s(:begin,
          s(:send, nil, :tk_send,
            s(:str, "setmenustate"),
            s(:lvar, :tag),
            s(:lvar, :state)),
          s(:self))),
      s(:def, :show_statusbar,
        s(:args,
          s(:arg, :name)),
        s(:begin,
          s(:send, nil, :tk_send,
            s(:str, "showstatusbar"),
            s(:lvar, :name)),
          s(:self))),
      s(:def, :show_toolbar,
        s(:args,
          s(:arg, :idx),
          s(:arg, :mode)),
        s(:begin,
          s(:send, nil, :tk_send,
            s(:str, "showtoolbar"),
            s(:lvar, :idx),
            s(:lvar, :mode)),
          s(:self))))))

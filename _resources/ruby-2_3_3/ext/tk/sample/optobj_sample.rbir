s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:lvasgn, :optobj,
    s(:send,
      s(:const,
        s(:const, nil, :Tk), :OptionObj), :new,
      s(:hash,
        s(:pair,
          s(:str, "foreground"),
          s(:str, "red")),
        s(:pair,
          s(:str, "background"),
          s(:str, "black"))))),
  s(:lvasgn, :f,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :side),
          s(:sym, :left)),
        s(:pair,
          s(:sym, :anchor),
          s(:sym, :n)),
        s(:pair,
          s(:sym, :padx),
          s(:int, 5)),
        s(:pair,
          s(:sym, :pady),
          s(:int, 30))))),
  s(:lvasgn, :b1,
    s(:send,
      s(:send,
        s(:const, nil, :TkButton), :new,
        s(:lvar, :f),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "AAA")))), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :x))))),
  s(:lvasgn, :b2,
    s(:send,
      s(:send,
        s(:const, nil, :TkButton), :new,
        s(:lvar, :f),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "BBB")))), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :x))))),
  s(:lvasgn, :b3,
    s(:send,
      s(:send,
        s(:const, nil, :TkButton), :new,
        s(:lvar, :f),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "CCC")))), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :x))))),
  s(:send,
    s(:lvar, :optobj), :assign,
    s(:lvar, :b1),
    s(:array,
      s(:lvar, :b2),
      s(:str, "configure"),
      s(:hash,
        s(:pair,
          s(:str, "foreground"),
          s(:str, "background")),
        s(:pair,
          s(:str, "background"),
          s(:str, "foreground")))),
    s(:array,
      s(:lvar, :b3),
      s(:nil),
      s(:hash,
        s(:pair,
          s(:str, "foreground"),
          s(:str, "background")),
        s(:pair,
          s(:str, "activeforeground"),
          s(:nil)),
        s(:pair,
          s(:str, "background"),
          s(:array,
            s(:str, "foreground"),
            s(:str, "activeforeground")))))),
  s(:send,
    s(:lvar, :optobj), :update,
    s(:hash,
      s(:pair,
        s(:str, "activeforeground"),
        s(:str, "yellow")))),
  s(:block,
    s(:send,
      s(:const, nil, :TkButton), :new,
      s(:lvar, :f)),
    s(:args),
    s(:begin,
      s(:send, nil, :configure,
        s(:send,
          s(:send,
            s(:lvar, :optobj), :assign,
            s(:self)), :+,
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "DDD"))))),
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :fill),
            s(:sym, :x)))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkButton), :new,
      s(:lvar, :f)),
    s(:args),
    s(:begin,
      s(:send, nil, :configure,
        s(:send,
          s(:send,
            s(:lvar, :optobj), :assign,
            s(:array,
              s(:self),
              s(:nil),
              s(:hash,
                s(:pair,
                  s(:str, "foreground"),
                  s(:str, "activeforeground")),
                s(:pair,
                  s(:str, "background"),
                  s(:str, "foreground")),
                s(:pair,
                  s(:str, "activeforeground"),
                  s(:str, "background"))))), :+,
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "EEE")),
            s(:pair,
              s(:sym, :relief),
              s(:sym, :groove)),
            s(:pair,
              s(:sym, :borderwidth),
              s(:int, 5))))),
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :fill),
            s(:sym, :x)))))),
  s(:send,
    s(:lvar, :optobj), :notify),
  s(:send,
    s(:send,
      s(:const, nil, :TkButton), :new,
      s(:lvar, :f),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "toggle")),
        s(:pair,
          s(:sym, :command),
          s(:block,
            s(:send, nil, :proc),
            s(:args),
            s(:begin,
              s(:lvasgn, :fg,
                s(:send,
                  s(:lvar, :optobj), :[],
                  s(:str, "foreground"))),
              s(:lvasgn, :bg,
                s(:send,
                  s(:lvar, :optobj), :[],
                  s(:str, "background"))),
              s(:send,
                s(:lvar, :optobj), :configure,
                s(:hash,
                  s(:pair,
                    s(:str, "foreground"),
                    s(:lvar, :bg)),
                  s(:pair,
                    s(:str, "background"),
                    s(:lvar, :fg))))))))), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :fill),
        s(:sym, :x)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 10)))),
  s(:send,
    s(:send,
      s(:const, nil, :TkButton), :new,
      s(:lvar, :f),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "exit")),
        s(:pair,
          s(:sym, :command),
          s(:block,
            s(:send, nil, :proc),
            s(:args),
            s(:send, nil, :exit))))), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :fill),
        s(:sym, :x)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 10)))),
  s(:block,
    s(:send,
      s(:const, nil, :TkFrame), :new),
    s(:args,
      s(:arg, :f)),
    s(:begin,
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :right)),
          s(:pair,
            s(:sym, :expand),
            s(:true)),
          s(:pair,
            s(:sym, :fill),
            s(:sym, :both)))),
      s(:send,
        s(:send,
          s(:const, nil, :TkLabel), :new,
          s(:lvar, :f),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "source::")))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :anchor),
            s(:sym, :w)))),
      s(:block,
        s(:send,
          s(:const, nil, :TkFrame), :new,
          s(:lvar, :f)),
        s(:args,
          s(:arg, :ff)),
        s(:begin,
          s(:block,
            s(:send,
              s(:const, nil, :TkText), :new,
              s(:lvar, :ff)),
            s(:args),
            s(:begin,
              s(:send, nil, :yscrollbar,
                s(:block,
                  s(:send,
                    s(:const, nil, :TkScrollbar), :new,
                    s(:lvar, :ff)),
                  s(:args),
                  s(:send, nil, :pack,
                    s(:hash,
                      s(:pair,
                        s(:sym, :fill),
                        s(:sym, :y)),
                      s(:pair,
                        s(:sym, :side),
                        s(:sym, :right)))))),
              s(:send, nil, :insert,
                s(:str, "end"),
                s(:send,
                  s(:const, nil, :File), :read,
                  s(:str, "(string)"))),
              s(:send, nil, :pack,
                s(:hash,
                  s(:pair,
                    s(:sym, :side),
                    s(:sym, :left)),
                  s(:pair,
                    s(:sym, :expand),
                    s(:true)),
                  s(:pair,
                    s(:sym, :fill),
                    s(:sym, :both)))))),
          s(:send, nil, :pack,
            s(:hash,
              s(:pair,
                s(:sym, :expand),
                s(:true)),
              s(:pair,
                s(:sym, :fill),
                s(:sym, :both)))))))),
  s(:send,
    s(:const, nil, :Tk), :mainloop))

s(:begin,
  s(:if,
    s(:send,
      s(:const, nil, :ARGV), :delete,
      s(:str, "--remote-tk")),
    s(:send, nil, :require,
      s(:str, "remote-tk")), nil),
  s(:if,
    s(:send,
      s(:const, nil, :ARGV), :delete,
      s(:str, "--multi-tk")),
    s(:send, nil, :require,
      s(:str, "multi-tk")), nil),
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:module,
    s(:const, nil, :Tk),
    s(:casgn, nil, :MAINLOOP,
      s(:block,
        s(:send,
          s(:const, nil, :Thread), :new),
        s(:args),
        s(:send, nil, :mainloop)))),
  s(:send, nil, :require,
    s(:str, "irb")),
  s(:if,
    s(:send,
      s(:str, "(string)"), :==,
      s(:gvar, :$0)),
    s(:send,
      s(:const, nil, :IRB), :start,
      s(:str, "(string)")),
    s(:if,
      s(:match_with_lvasgn,
        s(:regexp,
          s(:str, "^-e$"),
          s(:regopt)),
        s(:gvar, :$0)),
      s(:send,
        s(:const, nil, :IRB), :start,
        s(:str, "(string)")),
      s(:send,
        s(:const, nil, :IRB), :setup,
        s(:str, "(string)")))))

s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send,
    s(:const, nil, :TkOptionDB), :readfile,
    s(:send,
      s(:const, nil, :File), :expand_path,
      s(:str, "cmd_resource"),
      s(:send,
        s(:const, nil, :File), :dirname,
        s(:str, "(string)")))),
  s(:lvasgn, :f,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:hash,
          s(:pair,
            s(:sym, :class),
            s(:str, "BtnFrame")))), :pack)),
  s(:lvasgn, :b,
    s(:send,
      s(:send,
        s(:const, nil, :TkButton), :new,
        s(:hash,
          s(:pair,
            s(:sym, :parent),
            s(:lvar, :f)),
          s(:pair,
            s(:sym, :widgetname),
            s(:str, "hello")))), :pack)),
  s(:lvasgn, :cmd1,
    s(:send,
      s(:const, nil, :TkOptionDB), :new_proc_class,
      s(:lvar, :b),
      s(:array,
        s(:sym, :show_msg),
        s(:sym, :bye_msg)),
      s(:int, 3))),
  s(:lvasgn, :cmd2,
    s(:send,
      s(:const, nil, :TkOptionDB), :new_proc_class,
      s(:sym, :ZZZ),
      s(:array,
        s(:sym, :show_msg),
        s(:sym, :bye_msg)),
      s(:int, 3),
      s(:false),
      s(:lvar, :cmd1))),
  s(:lvasgn, :cmd3,
    s(:send,
      s(:const, nil, :TkOptionDB), :new_proc_class,
      s(:sym, :ZZZ),
      s(:array,
        s(:sym, :show_msg),
        s(:sym, :bye_msg)),
      s(:int, 3),
      s(:false),
      s(:lvar, :b))),
  s(:lvasgn, :cmd4,
    s(:block,
      s(:send,
        s(:const, nil, :TkOptionDB), :new_proc_class,
        s(:sym, :BTN_CMD),
        s(:array,
          s(:sym, :show_msg),
          s(:sym, :bye_msg)),
        s(:int, 3)),
      s(:args),
      s(:defs,
        s(:self), :__check_proc_string__,
        s(:args,
          s(:arg, :str)),
        s(:dstr,
          s(:str, "{|arg| print [arg, $SAFE].inspect, ': '; Proc.new"),
          s(:begin,
            s(:lvar, :str)),
          s(:str, ".call(arg)}"))))),
  s(:send,
    s(:lvar, :cmd1), :show_msg,
    s(:str, "cmd1")),
  s(:send,
    s(:lvar, :cmd2), :show_msg,
    s(:str, "cmd2")),
  s(:send,
    s(:lvar, :cmd3), :show_msg,
    s(:str, "cmd3")),
  s(:send,
    s(:lvar, :cmd4), :show_msg,
    s(:str, "cmd4")))

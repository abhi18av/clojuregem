s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$menu84_demo)),
      s(:gvar, :$menu84_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_demo), :destroy),
      s(:gvasgn, :$menu84_demo,
        s(:nil))), nil),
  s(:gvasgn, :$menu84_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "File Selection Dialogs")),
        s(:send, nil, :iconname,
          s(:str, "menu84")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$menu84_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:kwbegin,
    s(:rescue,
      s(:lvasgn, :windowingsystem,
        s(:send,
          s(:const, nil, :Tk), :windowingsystem)),
      s(:resbody, nil, nil,
        s(:lvasgn, :windowingsystem,
          s(:str, ""))), nil)),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame),
        s(:hash,
          s(:pair,
            s(:str, "font"),
            s(:gvar, :$font)),
          s(:pair,
            s(:str, "wraplength"),
            s(:str, "4i")),
          s(:pair,
            s(:str, "justify"),
            s(:str, "left")))),
      s(:args),
      s(:if,
        s(:or,
          s(:or,
            s(:send,
              s(:send,
                s(:gvar, :$tk_platform), :[],
                s(:str, "platform")), :==,
              s(:str, "macintosh")),
            s(:send,
              s(:lvar, :windowingsystem), :==,
              s(:str, "classic"))),
          s(:send,
            s(:lvar, :windowingsystem), :==,
            s(:str, "aqua"))),
        s(:send, nil, :text,
          s(:str, "このウィンドウにはカスケードメニューを持つメニューバーが付けられています。Command+x ('x'はコマンドキーシンボルに続けて表示されている文字です) とタイプすることによっても項目の機能を呼び出すことができます。最後のメニューは、マウスでウィンドウの外にドラッグすることによって、独立したパレットとなるように切り放すことが可能です。")),
        s(:send, nil, :text,
          s(:str, "このウィンドウにはカスケードメニューを持つメニューバーが付けられています。Alt+x ('x'はメニュー上で下線が引かれた文字です) とタイプすることによってもメニューを呼び出すことができます。矢印キーを使って、メニュー間を移動することも可能です。メニューが表示されている時には、現在位置の項目をスペースキーで選択したり、下線が引かれた文字を入力することでその項目を選択したりすることができます。もし項目にアクセラレータの指定がなされていたならば、その指定されたキー入力を行うことで、メニューを表示させることなく直接その項目の機能を呼び出せます。最後のメニューは、メニューの最初の項目を選択することによって、独立したパレットとなるように切り放すことが可能です。")))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")))),
  s(:lvasgn, :menustatus,
    s(:send,
      s(:const, nil, :TkVariable), :new,
      s(:str, "    "))),
  s(:block,
    s(:send,
      s(:const, nil, :TkFrame), :new,
      s(:lvar, :base_frame)),
    s(:args,
      s(:arg, :frame)),
    s(:begin,
      s(:send,
        s(:send,
          s(:const, nil, :TkLabel), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:str, "textvariable"),
              s(:lvar, :menustatus)),
            s(:pair,
              s(:str, "relief"),
              s(:str, "sunken")),
            s(:pair,
              s(:str, "bd"),
              s(:int, 1)),
            s(:pair,
              s(:str, "font"),
              s(:array,
                s(:str, "Helvetica"),
                s(:str, "10"))),
            s(:pair,
              s(:str, "anchor"),
              s(:str, "w")))), :pack,
        s(:hash,
          s(:pair,
            s(:str, "side"),
            s(:str, "left")),
          s(:pair,
            s(:str, "padx"),
            s(:int, 2)),
          s(:pair,
            s(:str, "expand"),
            s(:true)),
          s(:pair,
            s(:str, "fill"),
            s(:str, "both")))),
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:str, "side"),
            s(:str, "bottom")),
          s(:pair,
            s(:str, "fill"),
            s(:str, "x")),
          s(:pair,
            s(:str, "pady"),
            s(:int, 2)))))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "閉じる")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:begin,
                    s(:lvasgn, :tmppath,
                      s(:gvar, :$menu84_demo)),
                    s(:gvasgn, :$menu84_demo,
                      s(:nil)),
                    s(:send,
                      s(:lvar, :tmppath), :destroy)))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))),
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "コード参照")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showCode,
                    s(:str, "menu84")))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "bottom")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")),
      s(:pair,
        s(:str, "pady"),
        s(:str, "2m")))),
  s(:gvasgn, :$menu84_frame,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_demo),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false)))),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "File")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Open...")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"Open...\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "New")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"New\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Save")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"Save\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Save As...")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"Save As...\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "separator")),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Print Setup...")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"Print Setup...\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Print...")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :fail,
                s(:str, "これは単なるデモですから、\"Print...\" 項目の機能は特に定義されてはいません。")))))),
      s(:send, nil, :add,
        s(:str, "separator")),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Dismiss Menus Demo")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:gvar, :$menu84_demo), :destroy))))))),
  s(:if,
    s(:or,
      s(:send,
        s(:send,
          s(:gvar, :$tk_platform), :[],
          s(:str, "platform")), :==,
        s(:str, "macintosh")),
      s(:lvasgn, :windowingsystem,
        s(:or,
          s(:str, "classic"),
          s(:lvasgn, :windowingsystem,
            s(:str, "aqua"))))),
    s(:lvasgn, :modifier,
      s(:str, "Command")),
    s(:if,
      s(:send,
        s(:send,
          s(:gvar, :$tk_platform), :[],
          s(:str, "platform")), :==,
        s(:str, "windows")),
      s(:lvasgn, :modifier,
        s(:str, "Control")),
      s(:lvasgn, :modifier,
        s(:str, "Meta")))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false)))),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Basic")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Long entry that does nothing")))),
      s(:block,
        s(:send,
          s(:array,
            s(:str, "A"),
            s(:str, "B"),
            s(:str, "C"),
            s(:str, "D"),
            s(:str, "E"),
            s(:str, "F"),
            s(:str, "G")), :each),
        s(:args,
          s(:arg, :c)),
        s(:begin,
          s(:send, nil, :add,
            s(:str, "command"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:dstr,
                  s(:str, "Print letter \""),
                  s(:begin,
                    s(:lvar, :c)),
                  s(:str, "\""))),
              s(:pair,
                s(:str, "underline"),
                s(:int, 14)),
              s(:pair,
                s(:str, "accelerator"),
                s(:dstr,
                  s(:str, "Meta+"),
                  s(:begin,
                    s(:lvar, :c)))),
              s(:pair,
                s(:str, "command"),
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :print,
                    s(:lvar, :c),
                    s(:str, "\n")))),
              s(:pair,
                s(:str, "accelerator"),
                s(:dstr,
                  s(:begin,
                    s(:lvar, :modifier)),
                  s(:str, "+"),
                  s(:begin,
                    s(:lvar, :c)))))),
          s(:send,
            s(:gvar, :$menu84_demo), :bind,
            s(:dstr,
              s(:begin,
                s(:lvar, :modifier)),
              s(:str, "-"),
              s(:begin,
                s(:send,
                  s(:lvar, :c), :downcase))),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :print,
                s(:lvar, :c),
                s(:str, "\n")))))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false)))),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Cascades")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Print hello")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :print,
                s(:str, "Hello\n")))),
          s(:pair,
            s(:str, "accelerator"),
            s(:dstr,
              s(:begin,
                s(:lvar, :modifier)),
              s(:str, "+H"))),
          s(:pair,
            s(:str, "underline"),
            s(:int, 6)))),
      s(:send,
        s(:gvar, :$menu84_demo), :bind,
        s(:dstr,
          s(:begin,
            s(:lvar, :modifier)),
          s(:str, "-h")),
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send, nil, :print,
            s(:str, "Hello\n")))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Print goodbye")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send, nil, :print,
                s(:str, "Goodbye\n")))),
          s(:pair,
            s(:str, "accelerator"),
            s(:dstr,
              s(:begin,
                s(:lvar, :modifier)),
              s(:str, "+G"))),
          s(:pair,
            s(:str, "underline"),
            s(:int, 6)))),
      s(:send,
        s(:gvar, :$menu84_demo), :bind,
        s(:dstr,
          s(:begin,
            s(:lvar, :modifier)),
          s(:str, "-g")),
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send, nil, :print,
            s(:str, "Goodbye\n")))),
      s(:block,
        s(:send,
          s(:const, nil, :TkMenu), :new,
          s(:lvar, :m),
          s(:hash,
            s(:pair,
              s(:str, "tearoff"),
              s(:false)))),
        s(:args,
          s(:arg, :cascade_check)),
        s(:begin,
          s(:send,
            s(:lvar, :m), :add,
            s(:str, "cascade"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Check button")),
              s(:pair,
                s(:str, "menu"),
                s(:lvar, :cascade_check)),
              s(:pair,
                s(:str, "underline"),
                s(:int, 0)))),
          s(:lvasgn, :oil,
            s(:send,
              s(:const, nil, :TkVariable), :new,
              s(:int, 0))),
          s(:send, nil, :add,
            s(:str, "check"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "オイル検査")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :oil)))),
          s(:lvasgn, :trans,
            s(:send,
              s(:const, nil, :TkVariable), :new,
              s(:int, 0))),
          s(:send, nil, :add,
            s(:str, "check"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "トランスミッション検査")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :trans)))),
          s(:lvasgn, :brakes,
            s(:send,
              s(:const, nil, :TkVariable), :new,
              s(:int, 0))),
          s(:send, nil, :add,
            s(:str, "check"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "ブレーキ検査")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :brakes)))),
          s(:lvasgn, :lights,
            s(:send,
              s(:const, nil, :TkVariable), :new,
              s(:int, 0))),
          s(:send, nil, :add,
            s(:str, "check"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "ライト検査")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :lights)))),
          s(:send, nil, :add,
            s(:str, "separator")),
          s(:send, nil, :add,
            s(:str, "command"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Show current values")),
              s(:pair,
                s(:str, "command"),
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showVars,
                    s(:gvar, :$menu84_demo),
                    s(:array,
                      s(:str, "オイル"),
                      s(:lvar, :oil)),
                    s(:array,
                      s(:str, "トランスミッション"),
                      s(:lvar, :trans)),
                    s(:array,
                      s(:str, "ブレーキ"),
                      s(:lvar, :brakes)),
                    s(:array,
                      s(:str, "ライト"),
                      s(:lvar, :lights))))))),
          s(:send, nil, :invoke,
            s(:int, 1)),
          s(:send, nil, :invoke,
            s(:int, 3)))),
      s(:block,
        s(:send,
          s(:const, nil, :TkMenu), :new,
          s(:lvar, :m),
          s(:hash,
            s(:pair,
              s(:str, "tearoff"),
              s(:false)))),
        s(:args,
          s(:arg, :cascade_radio)),
        s(:begin,
          s(:send,
            s(:lvar, :m), :add,
            s(:str, "cascade"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Radio buttons")),
              s(:pair,
                s(:str, "menu"),
                s(:lvar, :cascade_radio)),
              s(:pair,
                s(:str, "underline"),
                s(:int, 0)))),
          s(:lvasgn, :pointSize,
            s(:send,
              s(:const, nil, :TkVariable), :new)),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "10 point")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :pointSize)),
              s(:pair,
                s(:str, "value"),
                s(:int, 10)))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "14 point")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :pointSize)),
              s(:pair,
                s(:str, "value"),
                s(:int, 14)))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "18 point")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :pointSize)),
              s(:pair,
                s(:str, "value"),
                s(:int, 18)))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "24 point")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :pointSize)),
              s(:pair,
                s(:str, "value"),
                s(:int, 24)))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "32 point")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :pointSize)),
              s(:pair,
                s(:str, "value"),
                s(:int, 32)))),
          s(:send, nil, :add,
            s(:str, "separator")),
          s(:lvasgn, :style,
            s(:send,
              s(:const, nil, :TkVariable), :new)),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Roman")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :style)),
              s(:pair,
                s(:str, "value"),
                s(:str, "roman")))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Bold")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :style)),
              s(:pair,
                s(:str, "value"),
                s(:str, "bold")))),
          s(:send, nil, :add,
            s(:str, "radio"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "Italic")),
              s(:pair,
                s(:str, "variable"),
                s(:lvar, :style)),
              s(:pair,
                s(:str, "value"),
                s(:str, "italic")))),
          s(:send, nil, :add,
            s(:str, "separator")),
          s(:send, nil, :add,
            s(:str, "command"),
            s(:hash,
              s(:pair,
                s(:str, "label"),
                s(:str, "現在値の表示")),
              s(:pair,
                s(:str, "command"),
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showVars,
                    s(:gvar, :$menu84_demo),
                    s(:array,
                      s(:str, "pointSize"),
                      s(:lvar, :pointSize)),
                    s(:array,
                      s(:str, "style"),
                      s(:lvar, :style))))))),
          s(:send, nil, :invoke,
            s(:int, 1)),
          s(:send, nil, :invoke,
            s(:int, 7)))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false)))),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Icons")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:send, nil, :add,
        s(:str, "command"),
        s(:hash,
          s(:pair,
            s(:str, "hidemargin"),
            s(:int, 1)),
          s(:pair,
            s(:str, "bitmap"),
            s(:send,
              s(:str, "@"), :+,
              s(:send,
                s(:array,
                  s(:gvar, :$demo_dir),
                  s(:str, ".."),
                  s(:str, "images"),
                  s(:str, "pattern.xbm")), :join,
                s(:const,
                  s(:const, nil, :File), :Separator)))),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :TkDialog), :new,
                s(:hash,
                  s(:pair,
                    s(:str, "title"),
                    s(:str, "Bitmap Menu Entry")),
                  s(:pair,
                    s(:str, "text"),
                    s(:str, "あなたが選択したメニュー項目は、文字列の代わりにビットマップイメージで項目を表示したものです。それ以外の点では、ほかのメニュー項目との間で特に違いがあるわけではありません。")),
                  s(:pair,
                    s(:str, "bitmap"),
                    s(:str, "")),
                  s(:pair,
                    s(:str, "default"),
                    s(:int, 0)),
                  s(:pair,
                    s(:str, "buttons"),
                    s(:str, "閉じる")))))))),
      s(:block,
        s(:send,
          s(:array,
            s(:str, "info"),
            s(:str, "questhead"),
            s(:str, "error")), :each),
        s(:args,
          s(:arg, :icon)),
        s(:send, nil, :add,
          s(:str, "command"),
          s(:hash,
            s(:pair,
              s(:str, "bitmap"),
              s(:lvar, :icon)),
            s(:pair,
              s(:str, "hidemargin"),
              s(:int, 1)),
            s(:pair,
              s(:str, "command"),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :print,
                  s(:dstr,
                    s(:str, "You invoked the "),
                    s(:begin,
                      s(:lvar, :icon)),
                    s(:str, " bitmap\n")))))))),
      s(:send, nil, :entryconfigure,
        s(:int, 2),
        s(:hash,
          s(:pair,
            s(:sym, :columnbreak),
            s(:true)))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame),
      s(:hash,
        s(:pair,
          s(:str, "tearoff"),
          s(:false)))),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "More")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:block,
        s(:send,
          s(:array,
            s(:str, "An entry"),
            s(:str, "Another entry"),
            s(:str, "Does nothing"),
            s(:str, "Does almost nothing"),
            s(:str, "Make life meaningful")), :each),
        s(:args,
          s(:arg, :i)),
        s(:send, nil, :add,
          s(:str, "command"),
          s(:hash,
            s(:pair,
              s(:str, "label"),
              s(:lvar, :i)),
            s(:pair,
              s(:str, "command"),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :print,
                  s(:dstr,
                    s(:str, "You invoked \""),
                    s(:begin,
                      s(:lvar, :i)),
                    s(:str, "\"\n")))))))),
      s(:send,
        s(:lvar, :m), :entryconfigure,
        s(:str, "Does almost nothing"),
        s(:hash,
          s(:pair,
            s(:str, "bitmap"),
            s(:str, "questhead")),
          s(:pair,
            s(:str, "compound"),
            s(:str, "left")),
          s(:pair,
            s(:str, "command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :TkDialog), :new,
                s(:hash,
                  s(:pair,
                    s(:str, "title"),
                    s(:str, "Compound Menu Entry")),
                  s(:pair,
                    s(:str, "message"),
                    s(:str, "あなたが選択したメニュー項目は、ビットマップイメージと文字列とを同時に一つの項目に表示するようにしたものです。それ以外の点では、ほかのメニュー項目との間で特に違いがあるわけではありません。")),
                  s(:pair,
                    s(:str, "buttons"),
                    s(:array,
                      s(:str, "了解"))),
                  s(:pair,
                    s(:str, "bitmap"),
                    s(:str, "")))))))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkMenu), :new,
      s(:gvar, :$menu84_frame)),
    s(:args,
      s(:arg, :m)),
    s(:begin,
      s(:send,
        s(:gvar, :$menu84_frame), :add,
        s(:str, "cascade"),
        s(:hash,
          s(:pair,
            s(:str, "label"),
            s(:str, "Colors")),
          s(:pair,
            s(:str, "menu"),
            s(:lvar, :m)),
          s(:pair,
            s(:str, "underline"),
            s(:int, 0)))),
      s(:block,
        s(:send,
          s(:array,
            s(:str, "red"),
            s(:str, "orange"),
            s(:str, "yellow"),
            s(:str, "green"),
            s(:str, "blue")), :each),
        s(:args,
          s(:arg, :c)),
        s(:send, nil, :add,
          s(:str, "command"),
          s(:hash,
            s(:pair,
              s(:str, "label"),
              s(:lvar, :c)),
            s(:pair,
              s(:str, "background"),
              s(:lvar, :c)),
            s(:pair,
              s(:str, "command"),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :print,
                  s(:dstr,
                    s(:str, "You invoked \""),
                    s(:begin,
                      s(:lvar, :c)),
                    s(:str, "\"\n")))))))))),
  s(:send,
    s(:gvar, :$menu84_demo), :menu,
    s(:gvar, :$menu84_frame)),
  s(:send,
    s(:const, nil, :TkMenu), :bind,
    s(:str, "<MenuSelect>"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:kwbegin,
          s(:rescue,
            s(:lvasgn, :label,
              s(:send,
                s(:lvar, :w), :entrycget,
                s(:str, "active"),
                s(:str, "label"))),
            s(:resbody, nil, nil,
              s(:lvasgn, :label,
                s(:str, "    "))), nil)),
        s(:send,
          s(:lvar, :menustatus), :value=,
          s(:lvar, :label)),
        s(:send,
          s(:const, nil, :Tk), :update,
          s(:true)))),
    s(:str, "%W")))

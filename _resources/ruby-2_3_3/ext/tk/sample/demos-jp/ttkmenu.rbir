s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$ttkmenu_demo)),
      s(:gvar, :$ttkmenu_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$ttkmenu_demo), :destroy),
      s(:gvasgn, :$ttkmenu_demo,
        s(:nil))), nil),
  s(:gvasgn, :$ttkmenu_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Ttk Menu Buttons")),
        s(:send, nil, :iconname,
          s(:str, "ttkmenu")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :Frame), :new,
        s(:gvar, :$ttkmenu_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:send,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Label), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :font),
          s(:gvar, :$font)),
        s(:pair,
          s(:sym, :wraplength),
          s(:str, "4i")),
        s(:pair,
          s(:sym, :justify),
          s(:sym, :left)),
        s(:pair,
          s(:sym, :text),
          s(:str, "Ttkとは，テーマ指定可能な新しいウィジェット集合です．\nこれによりテーマに対応することができるようになったウィジェットのひとつに\nメニューボタンがあります．\n以下では，テーマに対応したメニューボタンがいくつか表示されています．\nそれらを使って，現在使用中のテーマを変更することが可能です．\nテーマの選択がメニューボタン自身の見掛けを変化させる様子や，\n中央のメニューボタンだけが異なるスタイル\n(ツールバーでの一般的な表示に適したもの)で表示されている様子に\n注目してください．\nなお，メニューボタンについてはテーマに対応したウィジェットがありますが，\nメニューについてはテーマに対応したウィジェットは含まれていません．\nその理由は，標準のTkのメニューウィジェットが\nすべてのプラットホームで十分に良好な見掛けと操作性を持っている，\n特に，多くの環境でその環境本来の操作体系となるように実装されていると\n判断されたことによります．\n")))), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :side),
        s(:sym, :top)),
      s(:pair,
        s(:sym, :fill),
        s(:sym, :x)))),
  s(:send,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Separator), :new,
      s(:lvar, :base_frame)), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :side),
        s(:sym, :top)),
      s(:pair,
        s(:sym, :fill),
        s(:sym, :x)))),
  s(:block,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Frame), :new,
      s(:gvar, :$ttkmenu_demo)),
    s(:args,
      s(:arg, :frame)),
    s(:begin,
      s(:lvasgn, :sep,
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Separator), :new,
          s(:lvar, :frame))),
      s(:send,
        s(:const, nil, :Tk), :grid,
        s(:lvar, :sep),
        s(:hash,
          s(:pair,
            s(:sym, :columnspan),
            s(:int, 4)),
          s(:pair,
            s(:sym, :row),
            s(:int, 0)),
          s(:pair,
            s(:sym, :sticky),
            s(:str, "ew")),
          s(:pair,
            s(:sym, :pady),
            s(:int, 2)))),
      s(:send, nil, :TkGrid,
        s(:str, "x"),
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Button), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "コード参照")),
            s(:pair,
              s(:sym, :image),
              s(:send,
                s(:gvar, :$image), :[],
                s(:str, "view"))),
            s(:pair,
              s(:sym, :compound),
              s(:sym, :left)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :showCode,
                  s(:str, "ttkmenu")))))),
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Button), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "閉じる")),
            s(:pair,
              s(:sym, :image),
              s(:send,
                s(:gvar, :$image), :[],
                s(:str, "delete"))),
            s(:pair,
              s(:sym, :compound),
              s(:sym, :left)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:begin,
                  s(:send,
                    s(:gvar, :$ttkmenu_demo), :destroy),
                  s(:gvasgn, :$ttkmenu_demo,
                    s(:nil))))))),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:int, 4)),
          s(:pair,
            s(:sym, :pady),
            s(:int, 4)))),
      s(:send, nil, :grid_columnconfigure,
        s(:int, 0),
        s(:hash,
          s(:pair,
            s(:sym, :weight),
            s(:int, 1)))),
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :bottom)),
          s(:pair,
            s(:sym, :fill),
            s(:sym, :x)))))),
  s(:lvasgn, :b1,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Menubutton), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "テーマを選択")),
        s(:pair,
          s(:sym, :direction),
          s(:sym, :above))))),
  s(:lvasgn, :b2,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Menubutton), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "テーマを選択")),
        s(:pair,
          s(:sym, :direction),
          s(:sym, :left))))),
  s(:lvasgn, :b3,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Menubutton), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "テーマを選択")),
        s(:pair,
          s(:sym, :direction),
          s(:sym, :right))))),
  s(:lvasgn, :b4,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Menubutton), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "テーマを選択")),
        s(:pair,
          s(:sym, :direction),
          s(:sym, :flush)),
        s(:pair,
          s(:sym, :style),
          s(:send,
            s(:const,
              s(:const, nil, :Ttk), :Menubutton), :style,
            s(:str, "Toolbutton")))))),
  s(:lvasgn, :b5,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Menubutton), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "テーマを選択")),
        s(:pair,
          s(:sym, :direction),
          s(:sym, :below))))),
  s(:send,
    s(:lvar, :b1), :menu,
    s(:lvasgn, :m1,
      s(:send,
        s(:const,
          s(:const, nil, :Tk), :Menu), :new,
        s(:lvar, :b1),
        s(:hash,
          s(:pair,
            s(:sym, :tearoff),
            s(:false)))))),
  s(:send,
    s(:lvar, :b2), :menu,
    s(:lvasgn, :m2,
      s(:send,
        s(:const,
          s(:const, nil, :Tk), :Menu), :new,
        s(:lvar, :b2),
        s(:hash,
          s(:pair,
            s(:sym, :tearoff),
            s(:false)))))),
  s(:send,
    s(:lvar, :b3), :menu,
    s(:lvasgn, :m3,
      s(:send,
        s(:const,
          s(:const, nil, :Tk), :Menu), :new,
        s(:lvar, :b3),
        s(:hash,
          s(:pair,
            s(:sym, :tearoff),
            s(:false)))))),
  s(:send,
    s(:lvar, :b4), :menu,
    s(:lvasgn, :m4,
      s(:send,
        s(:const,
          s(:const, nil, :Tk), :Menu), :new,
        s(:lvar, :b4),
        s(:hash,
          s(:pair,
            s(:sym, :tearoff),
            s(:false)))))),
  s(:send,
    s(:lvar, :b5), :menu,
    s(:lvasgn, :m5,
      s(:send,
        s(:const,
          s(:const, nil, :Tk), :Menu), :new,
        s(:lvar, :b5),
        s(:hash,
          s(:pair,
            s(:sym, :tearoff),
            s(:false)))))),
  s(:block,
    s(:send,
      s(:send,
        s(:const, nil, :Ttk), :themes), :each),
    s(:args,
      s(:arg, :theme)),
    s(:begin,
      s(:send,
        s(:lvar, :m1), :add,
        s(:sym, :command),
        s(:hash,
          s(:pair,
            s(:sym, :label),
            s(:lvar, :theme)),
          s(:pair,
            s(:sym, :command),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :Ttk), :set_theme,
                s(:lvar, :theme)))))),
      s(:send,
        s(:lvar, :m2), :add,
        s(:sym, :command),
        s(:hash,
          s(:pair,
            s(:sym, :label),
            s(:lvar, :theme)),
          s(:pair,
            s(:sym, :command),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :Ttk), :set_theme,
                s(:lvar, :theme)))))),
      s(:send,
        s(:lvar, :m3), :add,
        s(:sym, :command),
        s(:hash,
          s(:pair,
            s(:sym, :label),
            s(:lvar, :theme)),
          s(:pair,
            s(:sym, :command),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :Ttk), :set_theme,
                s(:lvar, :theme)))))),
      s(:send,
        s(:lvar, :m4), :add,
        s(:sym, :command),
        s(:hash,
          s(:pair,
            s(:sym, :label),
            s(:lvar, :theme)),
          s(:pair,
            s(:sym, :command),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :Ttk), :set_theme,
                s(:lvar, :theme)))))),
      s(:send,
        s(:lvar, :m5), :add,
        s(:sym, :command),
        s(:hash,
          s(:pair,
            s(:sym, :label),
            s(:lvar, :theme)),
          s(:pair,
            s(:sym, :command),
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:const, nil, :Ttk), :set_theme,
                s(:lvar, :theme)))))))),
  s(:lvasgn, :f,
    s(:send,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :Frame), :new,
        s(:lvar, :base_frame)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :x))))),
  s(:lvasgn, :f1,
    s(:send,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :Frame), :new,
        s(:lvar, :base_frame)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:send,
    s(:lvar, :f), :lower),
  s(:send,
    s(:lvar, :f), :grid_anchor,
    s(:sym, :center)),
  s(:send, nil, :TkGrid,
    s(:str, "x"),
    s(:lvar, :b1),
    s(:str, "x"),
    s(:hash,
      s(:pair,
        s(:sym, :in),
        s(:lvar, :f)),
      s(:pair,
        s(:sym, :padx),
        s(:int, 3)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 2)))),
  s(:send, nil, :TkGrid,
    s(:lvar, :b2),
    s(:lvar, :b4),
    s(:lvar, :b3),
    s(:hash,
      s(:pair,
        s(:sym, :in),
        s(:lvar, :f)),
      s(:pair,
        s(:sym, :padx),
        s(:int, 3)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 2)))),
  s(:send, nil, :TkGrid,
    s(:str, "x"),
    s(:lvar, :b5),
    s(:str, "x"),
    s(:hash,
      s(:pair,
        s(:sym, :in),
        s(:lvar, :f)),
      s(:pair,
        s(:sym, :padx),
        s(:int, 3)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 2)))))

s(:begin,
  s(:class,
    s(:const, nil, :TkDialog_Demo2),
    s(:const, nil, :TkDialog),
    s(:begin,
      s(:send, nil, :private),
      s(:def, :title,
        s(:args),
        s(:str, "Dialog with global grab")),
      s(:def, :message,
        s(:args),
        s(:str, "このダイアログボックスはグローバルグラブを使用しています。下のボタンを実行するまで、ディスプレイ上のいかなるものとも対話できません。グローバルグラブを使用することは、まず良い考えではありません。どうしても必要になるまで使おうと思わないで下さい。")),
      s(:def, :bitmap,
        s(:args),
        s(:str, "info")),
      s(:def, :default_button,
        s(:args),
        s(:int, 0)),
      s(:def, :buttons,
        s(:args),
        s(:array,
          s(:str, "了解"),
          s(:str, "キャンセル"),
          s(:str, "コード参照"))))),
  s(:lvasgn, :ret,
    s(:send,
      s(:send,
        s(:const, nil, :TkDialog_Demo2), :new,
        s(:hash,
          s(:pair,
            s(:str, "message_config"),
            s(:hash,
              s(:pair,
                s(:str, "wraplength"),
                s(:str, "4i")))),
          s(:pair,
            s(:str, "prev_command"),
            s(:block,
              s(:send, nil, :proc),
              s(:args,
                s(:arg, :dialog)),
              s(:send,
                s(:const, nil, :Tk), :after,
                s(:int, 100),
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send,
                    s(:lvar, :dialog), :grab,
                    s(:str, "global")))))))), :value)),
  s(:case,
    s(:lvar, :ret),
    s(:when,
      s(:int, 0),
      s(:send, nil, :print,
        s(:str, "あなたは「了解」を押しましたね。\n"))),
    s(:when,
      s(:int, 1),
      s(:send, nil, :print,
        s(:str, "あなたは「キャンセル」を押しましたね。\n"))),
    s(:when,
      s(:int, 2),
      s(:send, nil, :showCode,
        s(:str, "dialog2"))), nil))

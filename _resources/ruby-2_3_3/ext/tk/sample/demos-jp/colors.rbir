s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$colors_demo)),
      s(:gvar, :$colors_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$colors_demo), :destroy),
      s(:gvasgn, :$colors_demo,
        s(:nil))), nil),
  s(:gvasgn, :$colors_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Listbox Demonstration (colors)")),
        s(:send, nil, :iconname,
          s(:str, "colors")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$colors_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:lvasgn, :msg,
    s(:block,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame)),
      s(:args),
      s(:begin,
        s(:send, nil, :font,
          s(:gvar, :$font)),
        s(:send, nil, :wraplength,
          s(:str, "4i")),
        s(:send, nil, :justify,
          s(:str, "left")),
        s(:send, nil, :text,
          s(:str, "下には色の名前が入ったスクロールバー付のリストボックスが表示されています。リストをスクロールさせるのはスクロールバーでもできますし、リストボックスの中でマウスのボタン2(中ボタン)を押したままドラッグしてもできます。ある色をボタン1(左ボタン)でダブルクリックするとアプリケーション全体がその色になります。"))))),
  s(:send,
    s(:lvar, :msg), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "閉じる")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:begin,
                    s(:lvasgn, :tmppath,
                      s(:gvar, :$colors_demo)),
                    s(:gvasgn, :$colors_demo,
                      s(:nil)),
                    s(:send,
                      s(:lvar, :tmppath), :destroy)))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))),
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "コード参照")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showCode,
                    s(:str, "colors")))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "bottom")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")),
      s(:pair,
        s(:str, "pady"),
        s(:str, "2m")))),
  s(:lvasgn, :colors_lbox,
    s(:nil)),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame),
        s(:hash,
          s(:pair,
            s(:str, "borderwidth"),
            s(:int, 10)))),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:lvasgn, :s,
          s(:send,
            s(:const, nil, :TkScrollbar), :new,
            s(:lvar, :w))),
        s(:lvasgn, :colors_lbox,
          s(:block,
            s(:send,
              s(:const, nil, :TkListbox), :new,
              s(:lvar, :w)),
            s(:args),
            s(:begin,
              s(:send, nil, :setgrid,
                s(:int, 1)),
              s(:send, nil, :width,
                s(:int, 10)),
              s(:send, nil, :height,
                s(:int, 12)),
              s(:send, nil, :yscrollcommand,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args,
                    s(:arg, :first),
                    s(:arg, :last)),
                  s(:send,
                    s(:lvar, :s), :set,
                    s(:lvar, :first),
                    s(:lvar, :last))))))),
        s(:send,
          s(:lvar, :s), :command,
          s(:block,
            s(:send, nil, :proc),
            s(:args,
              s(:restarg, :args)),
            s(:send,
              s(:lvar, :colors_lbox), :yview,
              s(:splat,
                s(:lvar, :args))))),
        s(:send,
          s(:lvar, :s), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "right")),
            s(:pair,
              s(:str, "fill"),
              s(:str, "y")))),
        s(:send,
          s(:lvar, :colors_lbox), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:int, 1)),
            s(:pair,
              s(:str, "fill"),
              s(:str, "both")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")),
      s(:pair,
        s(:str, "expand"),
        s(:str, "yes")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "y")))),
  s(:send,
    s(:lvar, :colors_lbox), :bind,
    s(:str, "Double-1"),
    s(:block,
      s(:send, nil, :proc),
      s(:args),
      s(:kwbegin,
        s(:rescue,
          s(:send,
            s(:const, nil, :TkPalette), :setPalette,
            s(:send,
              s(:const, nil, :TkSelection), :get)),
          s(:resbody, nil,
            s(:lvasgn, :e),
            s(:begin,
              s(:send, nil, :p,
                s(:lvar, :e)),
              s(:send,
                s(:const, nil, :Tk), :tk_call_without_enc,
                s(:str, "destroy"),
                s(:str, ".___tk_set_palette")))), nil)))),
  s(:lvasgn, :ins_data,
    s(:array,
      s(:str, "gray60"),
      s(:str, "gray70"),
      s(:str, "gray80"),
      s(:str, "gray85"),
      s(:str, "gray90"),
      s(:str, "gray95"),
      s(:str, "snow1"),
      s(:str, "snow2"),
      s(:str, "snow3"),
      s(:str, "snow4"),
      s(:str, "seashell1"),
      s(:str, "seashell2"),
      s(:str, "seashell3"),
      s(:str, "seashell4"),
      s(:str, "AntiqueWhite1"),
      s(:str, "AntiqueWhite2"),
      s(:str, "AntiqueWhite3"),
      s(:str, "AntiqueWhite4"),
      s(:str, "bisque1"),
      s(:str, "bisque2"),
      s(:str, "bisque3"),
      s(:str, "bisque4"),
      s(:str, "PeachPuff1"),
      s(:str, "PeachPuff2"),
      s(:str, "PeachPuff3"),
      s(:str, "PeachPuff4"),
      s(:str, "NavajoWhite1"),
      s(:str, "NavajoWhite2"),
      s(:str, "NavajoWhite3"),
      s(:str, "NavajoWhite4"),
      s(:str, "LemonChiffon1"),
      s(:str, "LemonChiffon2"),
      s(:str, "LemonChiffon3"),
      s(:str, "LemonChiffon4"),
      s(:str, "cornsilk1"),
      s(:str, "cornsilk2"),
      s(:str, "cornsilk3"),
      s(:str, "cornsilk4"),
      s(:str, "ivory1"),
      s(:str, "ivory2"),
      s(:str, "ivory3"),
      s(:str, "ivory4"),
      s(:str, "honeydew1"),
      s(:str, "honeydew2"),
      s(:str, "honeydew3"),
      s(:str, "honeydew4"),
      s(:str, "LavenderBlush1"),
      s(:str, "LavenderBlush2"),
      s(:str, "LavenderBlush3"),
      s(:str, "LavenderBlush4"),
      s(:str, "MistyRose1"),
      s(:str, "MistyRose2"),
      s(:str, "MistyRose3"),
      s(:str, "MistyRose4"),
      s(:str, "azure1"),
      s(:str, "azure2"),
      s(:str, "azure3"),
      s(:str, "azure4"),
      s(:str, "SlateBlue1"),
      s(:str, "SlateBlue2"),
      s(:str, "SlateBlue3"),
      s(:str, "SlateBlue4"),
      s(:str, "RoyalBlue1"),
      s(:str, "RoyalBlue2"),
      s(:str, "RoyalBlue3"),
      s(:str, "RoyalBlue4"),
      s(:str, "blue1"),
      s(:str, "blue2"),
      s(:str, "blue3"),
      s(:str, "blue4"),
      s(:str, "DodgerBlue1"),
      s(:str, "DodgerBlue2"),
      s(:str, "DodgerBlue3"),
      s(:str, "DodgerBlue4"),
      s(:str, "SteelBlue1"),
      s(:str, "SteelBlue2"),
      s(:str, "SteelBlue3"),
      s(:str, "SteelBlue4"),
      s(:str, "DeepSkyBlue1"),
      s(:str, "DeepSkyBlue2"),
      s(:str, "DeepSkyBlue3"),
      s(:str, "DeepSkyBlue4"),
      s(:str, "SkyBlue1"),
      s(:str, "SkyBlue2"),
      s(:str, "SkyBlue3"),
      s(:str, "SkyBlue4"),
      s(:str, "LightSkyBlue1"),
      s(:str, "LightSkyBlue2"),
      s(:str, "LightSkyBlue3"),
      s(:str, "LightSkyBlue4"),
      s(:str, "SlateGray1"),
      s(:str, "SlateGray2"),
      s(:str, "SlateGray3"),
      s(:str, "SlateGray4"),
      s(:str, "LightSteelBlue1"),
      s(:str, "LightSteelBlue2"),
      s(:str, "LightSteelBlue3"),
      s(:str, "LightSteelBlue4"),
      s(:str, "LightBlue1"),
      s(:str, "LightBlue2"),
      s(:str, "LightBlue3"),
      s(:str, "LightBlue4"),
      s(:str, "LightCyan1"),
      s(:str, "LightCyan2"),
      s(:str, "LightCyan3"),
      s(:str, "LightCyan4"),
      s(:str, "PaleTurquoise1"),
      s(:str, "PaleTurquoise2"),
      s(:str, "PaleTurquoise3"),
      s(:str, "PaleTurquoise4"),
      s(:str, "CadetBlue1"),
      s(:str, "CadetBlue2"),
      s(:str, "CadetBlue3"),
      s(:str, "CadetBlue4"),
      s(:str, "turquoise1"),
      s(:str, "turquoise2"),
      s(:str, "turquoise3"),
      s(:str, "turquoise4"),
      s(:str, "cyan1"),
      s(:str, "cyan2"),
      s(:str, "cyan3"),
      s(:str, "cyan4"),
      s(:str, "DarkSlateGray1"),
      s(:str, "DarkSlateGray2"),
      s(:str, "DarkSlateGray3"),
      s(:str, "DarkSlateGray4"),
      s(:str, "aquamarine1"),
      s(:str, "aquamarine2"),
      s(:str, "aquamarine3"),
      s(:str, "aquamarine4"),
      s(:str, "DarkSeaGreen1"),
      s(:str, "DarkSeaGreen2"),
      s(:str, "DarkSeaGreen3"),
      s(:str, "DarkSeaGreen4"),
      s(:str, "SeaGreen1"),
      s(:str, "SeaGreen2"),
      s(:str, "SeaGreen3"),
      s(:str, "SeaGreen4"),
      s(:str, "PaleGreen1"),
      s(:str, "PaleGreen2"),
      s(:str, "PaleGreen3"),
      s(:str, "PaleGreen4"),
      s(:str, "SpringGreen1"),
      s(:str, "SpringGreen2"),
      s(:str, "SpringGreen3"),
      s(:str, "SpringGreen4"),
      s(:str, "green1"),
      s(:str, "green2"),
      s(:str, "green3"),
      s(:str, "green4"),
      s(:str, "chartreuse1"),
      s(:str, "chartreuse2"),
      s(:str, "chartreuse3"),
      s(:str, "chartreuse4"),
      s(:str, "OliveDrab1"),
      s(:str, "OliveDrab2"),
      s(:str, "OliveDrab3"),
      s(:str, "OliveDrab4"),
      s(:str, "DarkOliveGreen1"),
      s(:str, "DarkOliveGreen2"),
      s(:str, "DarkOliveGreen3"),
      s(:str, "DarkOliveGreen4"),
      s(:str, "khaki1"),
      s(:str, "khaki2"),
      s(:str, "khaki3"),
      s(:str, "khaki4"),
      s(:str, "LightGoldenrod1"),
      s(:str, "LightGoldenrod2"),
      s(:str, "LightGoldenrod3"),
      s(:str, "LightGoldenrod4"),
      s(:str, "LightYellow1"),
      s(:str, "LightYellow2"),
      s(:str, "LightYellow3"),
      s(:str, "LightYellow4"),
      s(:str, "yellow1"),
      s(:str, "yellow2"),
      s(:str, "yellow3"),
      s(:str, "yellow4"),
      s(:str, "gold1"),
      s(:str, "gold2"),
      s(:str, "gold3"),
      s(:str, "gold4"),
      s(:str, "goldenrod1"),
      s(:str, "goldenrod2"),
      s(:str, "goldenrod3"),
      s(:str, "goldenrod4"),
      s(:str, "DarkGoldenrod1"),
      s(:str, "DarkGoldenrod2"),
      s(:str, "DarkGoldenrod3"),
      s(:str, "DarkGoldenrod4"),
      s(:str, "RosyBrown1"),
      s(:str, "RosyBrown2"),
      s(:str, "RosyBrown3"),
      s(:str, "RosyBrown4"),
      s(:str, "IndianRed1"),
      s(:str, "IndianRed2"),
      s(:str, "IndianRed3"),
      s(:str, "IndianRed4"),
      s(:str, "sienna1"),
      s(:str, "sienna2"),
      s(:str, "sienna3"),
      s(:str, "sienna4"),
      s(:str, "burlywood1"),
      s(:str, "burlywood2"),
      s(:str, "burlywood3"),
      s(:str, "burlywood4"),
      s(:str, "wheat1"),
      s(:str, "wheat2"),
      s(:str, "wheat3"),
      s(:str, "wheat4"),
      s(:str, "tan1"),
      s(:str, "tan2"),
      s(:str, "tan3"),
      s(:str, "tan4"),
      s(:str, "chocolate1"),
      s(:str, "chocolate2"),
      s(:str, "chocolate3"),
      s(:str, "chocolate4"),
      s(:str, "firebrick1"),
      s(:str, "firebrick2"),
      s(:str, "firebrick3"),
      s(:str, "firebrick4"),
      s(:str, "brown1"),
      s(:str, "brown2"),
      s(:str, "brown3"),
      s(:str, "brown4"),
      s(:str, "salmon1"),
      s(:str, "salmon2"),
      s(:str, "salmon3"),
      s(:str, "salmon4"),
      s(:str, "LightSalmon1"),
      s(:str, "LightSalmon2"),
      s(:str, "LightSalmon3"),
      s(:str, "LightSalmon4"),
      s(:str, "orange1"),
      s(:str, "orange2"),
      s(:str, "orange3"),
      s(:str, "orange4"),
      s(:str, "DarkOrange1"),
      s(:str, "DarkOrange2"),
      s(:str, "DarkOrange3"),
      s(:str, "DarkOrange4"),
      s(:str, "coral1"),
      s(:str, "coral2"),
      s(:str, "coral3"),
      s(:str, "coral4"),
      s(:str, "tomato1"),
      s(:str, "tomato2"),
      s(:str, "tomato3"),
      s(:str, "tomato4"),
      s(:str, "OrangeRed1"),
      s(:str, "OrangeRed2"),
      s(:str, "OrangeRed3"),
      s(:str, "OrangeRed4"),
      s(:str, "red1"),
      s(:str, "red2"),
      s(:str, "red3"),
      s(:str, "red4"),
      s(:str, "DeepPink1"),
      s(:str, "DeepPink2"),
      s(:str, "DeepPink3"),
      s(:str, "DeepPink4"),
      s(:str, "HotPink1"),
      s(:str, "HotPink2"),
      s(:str, "HotPink3"),
      s(:str, "HotPink4"),
      s(:str, "pink1"),
      s(:str, "pink2"),
      s(:str, "pink3"),
      s(:str, "pink4"),
      s(:str, "LightPink1"),
      s(:str, "LightPink2"),
      s(:str, "LightPink3"),
      s(:str, "LightPink4"),
      s(:str, "PaleVioletRed1"),
      s(:str, "PaleVioletRed2"),
      s(:str, "PaleVioletRed3"),
      s(:str, "PaleVioletRed4"),
      s(:str, "maroon1"),
      s(:str, "maroon2"),
      s(:str, "maroon3"),
      s(:str, "maroon4"),
      s(:str, "VioletRed1"),
      s(:str, "VioletRed2"),
      s(:str, "VioletRed3"),
      s(:str, "VioletRed4"),
      s(:str, "magenta1"),
      s(:str, "magenta2"),
      s(:str, "magenta3"),
      s(:str, "magenta4"),
      s(:str, "orchid1"),
      s(:str, "orchid2"),
      s(:str, "orchid3"),
      s(:str, "orchid4"),
      s(:str, "plum1"),
      s(:str, "plum2"),
      s(:str, "plum3"),
      s(:str, "plum4"),
      s(:str, "MediumOrchid1"),
      s(:str, "MediumOrchid2"),
      s(:str, "MediumOrchid3"),
      s(:str, "MediumOrchid4"),
      s(:str, "DarkOrchid1"),
      s(:str, "DarkOrchid2"),
      s(:str, "DarkOrchid3"),
      s(:str, "DarkOrchid4"),
      s(:str, "purple1"),
      s(:str, "purple2"),
      s(:str, "purple3"),
      s(:str, "purple4"),
      s(:str, "MediumPurple1"),
      s(:str, "MediumPurple2"),
      s(:str, "MediumPurple3"),
      s(:str, "MediumPurple4"),
      s(:str, "thistle1"),
      s(:str, "thistle2"),
      s(:str, "thistle3"),
      s(:str, "thistle4"))),
  s(:send,
    s(:lvar, :colors_lbox), :insert,
    s(:int, 0),
    s(:splat,
      s(:lvar, :ins_data))))

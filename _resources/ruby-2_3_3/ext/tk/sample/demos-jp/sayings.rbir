s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$sayings_demo)),
      s(:gvar, :$sayings_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$sayings_demo), :destroy),
      s(:gvasgn, :$sayings_demo,
        s(:nil))), nil),
  s(:gvasgn, :$sayings_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Listbox Demonstration (well-known sayings)")),
        s(:send, nil, :iconname,
          s(:str, "sayings")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$sayings_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:lvasgn, :msg,
    s(:block,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame)),
      s(:args),
      s(:begin,
        s(:send, nil, :font,
          s(:gvar, :$font)),
        s(:send, nil, :wraplength,
          s(:str, "4i")),
        s(:send, nil, :justify,
          s(:str, "left")),
        s(:send, nil, :text,
          s(:str, "下のリストボックスにはいろいろな格言が入っています。リストをスクロールさせるのはスクロールバーでもできますし、リストボックスの中でマウスのボタン2(中ボタン)を押したままドラッグしてもできます。"))))),
  s(:send,
    s(:lvar, :msg), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "閉じる")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:begin,
                    s(:lvasgn, :tmppath,
                      s(:gvar, :$sayings_demo)),
                    s(:gvasgn, :$sayings_demo,
                      s(:nil)),
                    s(:send,
                      s(:lvar, :tmppath), :destroy)))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))),
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "コード参照")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showCode,
                    s(:str, "sayings")))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "bottom")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")),
      s(:pair,
        s(:str, "pady"),
        s(:str, "2m")))),
  s(:lvasgn, :sayings_lbox,
    s(:nil)),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame),
        s(:hash,
          s(:pair,
            s(:str, "borderwidth"),
            s(:int, 10)))),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:lvasgn, :sv,
          s(:send,
            s(:const, nil, :TkScrollbar), :new,
            s(:lvar, :w))),
        s(:lvasgn, :sh,
          s(:send,
            s(:const, nil, :TkScrollbar), :new,
            s(:lvar, :w),
            s(:hash,
              s(:pair,
                s(:str, "orient"),
                s(:str, "horizontal"))))),
        s(:lvasgn, :sayings_lbox,
          s(:block,
            s(:send,
              s(:const, nil, :TkListbox), :new,
              s(:lvar, :w)),
            s(:args),
            s(:begin,
              s(:send, nil, :setgrid,
                s(:int, 1)),
              s(:send, nil, :width,
                s(:int, 20)),
              s(:send, nil, :height,
                s(:int, 10)),
              s(:send, nil, :yscrollcommand,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args,
                    s(:arg, :first),
                    s(:arg, :last)),
                  s(:send,
                    s(:lvar, :sv), :set,
                    s(:lvar, :first),
                    s(:lvar, :last)))),
              s(:send, nil, :xscrollcommand,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args,
                    s(:arg, :first),
                    s(:arg, :last)),
                  s(:send,
                    s(:lvar, :sh), :set,
                    s(:lvar, :first),
                    s(:lvar, :last))))))),
        s(:send,
          s(:lvar, :sv), :command,
          s(:block,
            s(:send, nil, :proc),
            s(:args,
              s(:restarg, :args)),
            s(:send,
              s(:lvar, :sayings_lbox), :yview,
              s(:splat,
                s(:lvar, :args))))),
        s(:send,
          s(:lvar, :sh), :command,
          s(:block,
            s(:send, nil, :proc),
            s(:args,
              s(:restarg, :args)),
            s(:send,
              s(:lvar, :sayings_lbox), :xview,
              s(:splat,
                s(:lvar, :args))))),
        s(:if,
          s(:send,
            s(:gvar, :$tk_version), :=~,
            s(:regexp,
              s(:str, "^4\\.[01]"),
              s(:regopt))),
          s(:begin,
            s(:send,
              s(:lvar, :sv), :pack,
              s(:hash,
                s(:pair,
                  s(:str, "side"),
                  s(:str, "right")),
                s(:pair,
                  s(:str, "fill"),
                  s(:str, "y")))),
            s(:send,
              s(:lvar, :sh), :pack,
              s(:hash,
                s(:pair,
                  s(:str, "side"),
                  s(:str, "bottom")),
                s(:pair,
                  s(:str, "fill"),
                  s(:str, "x")))),
            s(:send,
              s(:lvar, :sayings_lbox), :pack,
              s(:hash,
                s(:pair,
                  s(:str, "expand"),
                  s(:str, "yes")),
                s(:pair,
                  s(:str, "fill"),
                  s(:str, "y"))))),
          s(:begin,
            s(:send,
              s(:lvar, :sayings_lbox), :grid,
              s(:hash,
                s(:pair,
                  s(:str, "row"),
                  s(:int, 0)),
                s(:pair,
                  s(:str, "column"),
                  s(:int, 0)),
                s(:pair,
                  s(:str, "rowspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "columnspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "sticky"),
                  s(:str, "news")))),
            s(:send,
              s(:lvar, :sv), :grid,
              s(:hash,
                s(:pair,
                  s(:str, "row"),
                  s(:int, 0)),
                s(:pair,
                  s(:str, "column"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "rowspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "columnspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "sticky"),
                  s(:str, "news")))),
            s(:send,
              s(:lvar, :sh), :grid,
              s(:hash,
                s(:pair,
                  s(:str, "row"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "column"),
                  s(:int, 0)),
                s(:pair,
                  s(:str, "rowspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "columnspan"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "sticky"),
                  s(:str, "news")))),
            s(:send,
              s(:const, nil, :TkGrid), :rowconfigure,
              s(:lvar, :w),
              s(:int, 0),
              s(:hash,
                s(:pair,
                  s(:str, "weight"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "minsize"),
                  s(:int, 0)))),
            s(:send,
              s(:const, nil, :TkGrid), :columnconfigure,
              s(:lvar, :w),
              s(:int, 0),
              s(:hash,
                s(:pair,
                  s(:str, "weight"),
                  s(:int, 1)),
                s(:pair,
                  s(:str, "minsize"),
                  s(:int, 0)))))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")),
      s(:pair,
        s(:str, "expand"),
        s(:str, "yes")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "y")))),
  s(:send,
    s(:lvar, :sayings_lbox), :insert,
    s(:int, 0),
    s(:str, "Waste not, want not"),
    s(:str, "Early to bed and early to rise makes a man healthy, wealthy, and wise"),
    s(:str, "Ask not what your country can do for you, ask what you can do for your country"),
    s(:str, "I shall return"),
    s(:str, "NOT"),
    s(:str, "A picture is worth a thousand words"),
    s(:str, "User interfaces are hard to build"),
    s(:str, "Thou shalt not steal"),
    s(:str, "A penny for your thoughts"),
    s(:str, "Fool me once, shame on you;  fool me twice, shame on me"),
    s(:str, "Every cloud has a silver lining"),
    s(:str, "Where there's smoke there's fire"),
    s(:str, "It takes one to know one"),
    s(:str, "Curiosity killed the cat"),
    s(:str, "Take this job and shove it"),
    s(:str, "Up a creek without a paddle"),
    s(:str, "I'm mad as hell and I'm not going to take it any more"),
    s(:str, "An apple a day keeps the doctor away"),
    s(:str, "Don't look a gift horse in the mouth")))

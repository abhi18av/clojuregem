s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$items_demo)),
      s(:gvar, :$items_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$items_demo), :destroy),
      s(:gvasgn, :$items_demo,
        s(:nil))), nil),
  s(:gvasgn, :$items_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Canvas Item Demonstration")),
        s(:send, nil, :iconname,
          s(:str, "Items")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$items_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame)),
      s(:args),
      s(:begin,
        s(:send, nil, :font,
          s(:gvar, :$font)),
        s(:send, nil, :wraplength,
          s(:str, "5i")),
        s(:send, nil, :justify,
          s(:str, "left")),
        s(:send, nil, :text,
          s(:str, "このウィンドウにはキャンバス widget が入っており、その中にはキャンバス widget がサポートする様々なタイプのアイテムの例が入っています。次のような操作ができます。\n  ボタン-1 ドラッグ:\tアイテムを動かす。\n  ボタン-2 ドラッグ:\t見えている部分をずらす。\n  ボタン-3 ドラッグ:\t領域を囲う。\n  コントロール-F:\t領域の下のアイテムを表示する。")))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "閉じる")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:begin,
                    s(:lvasgn, :tmppath,
                      s(:gvar, :$items_demo)),
                    s(:gvasgn, :$items_demo,
                      s(:nil)),
                    s(:send,
                      s(:lvar, :tmppath), :destroy)))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))),
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "コード参照")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showCode,
                    s(:str, "items")))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "bottom")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")),
      s(:pair,
        s(:str, "pady"),
        s(:str, "2m")))),
  s(:lvasgn, :cvs,
    s(:nil)),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :cf)),
      s(:lvasgn, :cvs,
        s(:block,
          s(:send,
            s(:const, nil, :TkCanvas), :new,
            s(:lvar, :cf)),
          s(:args,
            s(:arg, :c)),
          s(:begin,
            s(:send, nil, :focus),
            s(:send, nil, :scrollregion,
              s(:str, "0c 0c 30c 24c")),
            s(:send, nil, :width,
              s(:str, "15c")),
            s(:send, nil, :height,
              s(:str, "10c")),
            s(:send, nil, :relief,
              s(:str, "sunken")),
            s(:send, nil, :borderwidth,
              s(:int, 2)),
            s(:lvasgn, :hs,
              s(:block,
                s(:send,
                  s(:const, nil, :TkScrollbar), :new,
                  s(:lvar, :cf)),
                s(:args,
                  s(:arg, :s)),
                s(:begin,
                  s(:send, nil, :orient,
                    s(:str, "horizontal")),
                  s(:send, nil, :command,
                    s(:block,
                      s(:send, nil, :proc),
                      s(:args,
                        s(:restarg, :args)),
                      s(:send,
                        s(:lvar, :c), :xview,
                        s(:splat,
                          s(:lvar, :args))))),
                  s(:send,
                    s(:lvar, :c), :xscrollcommand,
                    s(:block,
                      s(:send, nil, :proc),
                      s(:args,
                        s(:arg, :first),
                        s(:arg, :last)),
                      s(:send,
                        s(:lvar, :s), :set,
                        s(:lvar, :first),
                        s(:lvar, :last))))))),
            s(:lvasgn, :vs,
              s(:block,
                s(:send,
                  s(:const, nil, :TkScrollbar), :new,
                  s(:lvar, :cf)),
                s(:args,
                  s(:arg, :s)),
                s(:begin,
                  s(:send, nil, :command,
                    s(:block,
                      s(:send, nil, :proc),
                      s(:args,
                        s(:restarg, :args)),
                      s(:send,
                        s(:lvar, :c), :yview,
                        s(:splat,
                          s(:lvar, :args))))),
                  s(:send,
                    s(:lvar, :c), :yscrollcommand,
                    s(:block,
                      s(:send, nil, :proc),
                      s(:args,
                        s(:arg, :first),
                        s(:arg, :last)),
                      s(:send,
                        s(:lvar, :s), :set,
                        s(:lvar, :first),
                        s(:lvar, :last))))))),
            s(:if,
              s(:send,
                s(:gvar, :$tk_version), :=~,
                s(:regexp,
                  s(:str, "^4\\.[01]"),
                  s(:regopt))),
              s(:begin,
                s(:send,
                  s(:lvar, :hs), :pack,
                  s(:hash,
                    s(:pair,
                      s(:str, "side"),
                      s(:str, "bottom")),
                    s(:pair,
                      s(:str, "fill"),
                      s(:str, "x")))),
                s(:send,
                  s(:lvar, :vs), :pack,
                  s(:hash,
                    s(:pair,
                      s(:str, "side"),
                      s(:str, "right")),
                    s(:pair,
                      s(:str, "fill"),
                      s(:str, "y")))),
                s(:send,
                  s(:lvar, :c), :pack,
                  s(:hash,
                    s(:pair,
                      s(:str, "in"),
                      s(:lvar, :cf)),
                    s(:pair,
                      s(:str, "expand"),
                      s(:str, "yes")),
                    s(:pair,
                      s(:str, "fill"),
                      s(:str, "both"))))),
              s(:begin,
                s(:send,
                  s(:lvar, :c), :grid,
                  s(:hash,
                    s(:pair,
                      s(:str, "in"),
                      s(:lvar, :cf)),
                    s(:pair,
                      s(:str, "row"),
                      s(:int, 0)),
                    s(:pair,
                      s(:str, "column"),
                      s(:int, 0)),
                    s(:pair,
                      s(:str, "rowspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "columnspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "sticky"),
                      s(:str, "news")))),
                s(:send,
                  s(:lvar, :vs), :grid,
                  s(:hash,
                    s(:pair,
                      s(:str, "row"),
                      s(:int, 0)),
                    s(:pair,
                      s(:str, "column"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "rowspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "columnspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "sticky"),
                      s(:str, "news")))),
                s(:send,
                  s(:lvar, :hs), :grid,
                  s(:hash,
                    s(:pair,
                      s(:str, "row"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "column"),
                      s(:int, 0)),
                    s(:pair,
                      s(:str, "rowspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "columnspan"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "sticky"),
                      s(:str, "news")))),
                s(:send,
                  s(:const, nil, :TkGrid), :rowconfigure,
                  s(:lvar, :cf),
                  s(:int, 0),
                  s(:hash,
                    s(:pair,
                      s(:str, "weight"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "minsize"),
                      s(:int, 0)))),
                s(:send,
                  s(:const, nil, :TkGrid), :columnconfigure,
                  s(:lvar, :cf),
                  s(:int, 0),
                  s(:hash,
                    s(:pair,
                      s(:str, "weight"),
                      s(:int, 1)),
                    s(:pair,
                      s(:str, "minsize"),
                      s(:int, 0)))))))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "both")),
      s(:pair,
        s(:str, "expand"),
        s(:str, "yes")))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "0c"),
    s(:str, "0c"),
    s(:str, "30c"),
    s(:str, "24c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "0c"),
    s(:str, "8c"),
    s(:str, "30c"),
    s(:str, "8c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "0c"),
    s(:str, "16c"),
    s(:str, "30c"),
    s(:str, "16c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "10c"),
    s(:str, "0c"),
    s(:str, "10c"),
    s(:str, "24c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "20c"),
    s(:str, "0c"),
    s(:str, "20c"),
    s(:str, "24c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)))),
  s(:if,
    s(:send,
      s(:gvar, :$tk_version), :=~,
      s(:regexp,
        s(:str, "^4.*"),
        s(:regopt))),
    s(:begin,
      s(:lvasgn, :font1,
        s(:str, "-Adobe-Helvetica-Medium-R-Normal--*-120-*-*-*-*-*-*")),
      s(:lvasgn, :font2,
        s(:str, "-Adobe-Helvetica-Bold-R-Normal--*-240-*-*-*-*-*-*"))),
    s(:begin,
      s(:lvasgn, :font1,
        s(:str, "Helvetica 12")),
      s(:lvasgn, :font2,
        s(:str, "Helvetica 24 bold")))),
  s(:if,
    s(:send,
      s(:send,
        s(:send,
          s(:const, nil, :TkWinfo), :depth,
          s(:gvar, :$root)), :to_i), :>,
      s(:int, 1)),
    s(:begin,
      s(:lvasgn, :blue,
        s(:str, "DeepSkyBlue3")),
      s(:lvasgn, :red,
        s(:str, "red")),
      s(:lvasgn, :bisque,
        s(:str, "bisque3")),
      s(:lvasgn, :green,
        s(:str, "SeaGreen3"))),
    s(:begin,
      s(:lvasgn, :blue,
        s(:str, "black")),
      s(:lvasgn, :red,
        s(:str, "black")),
      s(:lvasgn, :bisque,
        s(:str, "black")),
      s(:lvasgn, :green,
        s(:str, "black")))),
  s(:gvasgn, :$tag_item,
    s(:send,
      s(:const, nil, :TkcGroup), :new,
      s(:lvar, :cvs))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "5c"),
    s(:str, ".2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "ライン")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "1c"),
    s(:str, "1c"),
    s(:str, "3c"),
    s(:str, "1c"),
    s(:str, "1c"),
    s(:str, "4c"),
    s(:str, "3c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 2)),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "capstyle"),
        s(:str, "butt")),
      s(:pair,
        s(:str, "join"),
        s(:str, "miter")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "4.67c"),
    s(:str, "1c"),
    s(:str, "4.67c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "arrow"),
        s(:str, "last")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "6.33c"),
    s(:str, "1c"),
    s(:str, "6.33c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "arrow"),
        s(:str, "both")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "5c"),
    s(:str, "6c"),
    s(:str, "9c"),
    s(:str, "6c"),
    s(:str, "9c"),
    s(:str, "1c"),
    s(:str, "8c"),
    s(:str, "1c"),
    s(:str, "8c"),
    s(:str, "4.8c"),
    s(:str, "8.8c"),
    s(:str, "4.8c"),
    s(:str, "8.8c"),
    s(:str, "1.2c"),
    s(:str, "8.2c"),
    s(:str, "1.2c"),
    s(:str, "8.2c"),
    s(:str, "4.6c"),
    s(:str, "8.6c"),
    s(:str, "4.6c"),
    s(:str, "8.6c"),
    s(:str, "1.4c"),
    s(:str, "8.4c"),
    s(:str, "1.4c"),
    s(:str, "8.4c"),
    s(:str, "4.4c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:int, 3)),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "1c"),
    s(:str, "5c"),
    s(:str, "7c"),
    s(:str, "5c"),
    s(:str, "7c"),
    s(:str, "7c"),
    s(:str, "9c"),
    s(:str, "7c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:str, ".5c")),
      s(:pair,
        s(:str, "stipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "arrow"),
        s(:str, "both")),
      s(:pair,
        s(:str, "arrowshape"),
        s(:str, "15 15 7")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "1c"),
    s(:str, "7c"),
    s(:str, "1.75c"),
    s(:str, "5.8c"),
    s(:str, "2.5c"),
    s(:str, "7c"),
    s(:str, "3.25c"),
    s(:str, "5.8c"),
    s(:str, "4c"),
    s(:str, "7c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:str, ".5c")),
      s(:pair,
        s(:str, "capstyle"),
        s(:str, "round")),
      s(:pair,
        s(:str, "join"),
        s(:str, "round")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "15c"),
    s(:str, ".2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "曲線 (滑らかにつないだ直線)")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "11c"),
    s(:str, "4c"),
    s(:str, "11.5c"),
    s(:str, "1c"),
    s(:str, "13.5c"),
    s(:str, "1c"),
    s(:str, "14c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "smooth"),
        s(:str, "on")),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "15.5c"),
    s(:str, "1c"),
    s(:str, "19.5c"),
    s(:str, "1.5c"),
    s(:str, "15.5c"),
    s(:str, "4.5c"),
    s(:str, "19.5c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "smooth"),
        s(:str, "on")),
      s(:pair,
        s(:str, "arrow"),
        s(:str, "both")),
      s(:pair,
        s(:str, "width"),
        s(:int, 3)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcLine), :new,
    s(:lvar, :cvs),
    s(:str, "12c"),
    s(:str, "6c"),
    s(:str, "13.5c"),
    s(:str, "4.5c"),
    s(:str, "16.5c"),
    s(:str, "7.5c"),
    s(:str, "18c"),
    s(:str, "6c"),
    s(:str, "16.5c"),
    s(:str, "4.5c"),
    s(:str, "13.5c"),
    s(:str, "7.5c"),
    s(:str, "12c"),
    s(:str, "6c"),
    s(:hash,
      s(:pair,
        s(:str, "smooth"),
        s(:str, "on")),
      s(:pair,
        s(:str, "width"),
        s(:str, "3m")),
      s(:pair,
        s(:str, "capstyle"),
        s(:str, "round")),
      s(:pair,
        s(:str, "stipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "25c"),
    s(:str, ".2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "多角形")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcPolygon), :new,
    s(:lvar, :cvs),
    s(:str, "21c"),
    s(:str, "1.0c"),
    s(:str, "22.5c"),
    s(:str, "1.75c"),
    s(:str, "24c"),
    s(:str, "1.0c"),
    s(:str, "23.25c"),
    s(:str, "2.5c"),
    s(:str, "24c"),
    s(:str, "4.0c"),
    s(:str, "22.5c"),
    s(:str, "3.25c"),
    s(:str, "21c"),
    s(:str, "4.0c"),
    s(:str, "21.75c"),
    s(:str, "2.5c"),
    s(:hash,
      s(:pair,
        s(:str, "fill"),
        s(:str, "green")),
      s(:pair,
        s(:str, "outline"),
        s(:str, "black")),
      s(:pair,
        s(:str, "width"),
        s(:int, 4)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcPolygon), :new,
    s(:lvar, :cvs),
    s(:str, "25c"),
    s(:str, "4c"),
    s(:str, "25c"),
    s(:str, "4c"),
    s(:str, "25c"),
    s(:str, "1c"),
    s(:str, "26c"),
    s(:str, "1c"),
    s(:str, "27c"),
    s(:str, "4c"),
    s(:str, "28c"),
    s(:str, "1c"),
    s(:str, "29c"),
    s(:str, "1c"),
    s(:str, "29c"),
    s(:str, "4c"),
    s(:str, "29c"),
    s(:str, "4c"),
    s(:hash,
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "smooth"),
        s(:str, "on")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcPolygon), :new,
    s(:lvar, :cvs),
    s(:str, "22c"),
    s(:str, "4.5c"),
    s(:str, "25c"),
    s(:str, "4.5c"),
    s(:str, "25c"),
    s(:str, "6.75c"),
    s(:str, "28c"),
    s(:str, "6.75c"),
    s(:str, "28c"),
    s(:str, "5.25c"),
    s(:str, "24c"),
    s(:str, "5.25c"),
    s(:str, "24c"),
    s(:str, "6.0c"),
    s(:str, "26c"),
    s(:str, "6c"),
    s(:str, "26c"),
    s(:str, "7.5c"),
    s(:str, "22c"),
    s(:str, "7.5c"),
    s(:hash,
      s(:pair,
        s(:str, "stipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "outline"),
        s(:str, "black")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "5c"),
    s(:str, "8.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "矩形")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "1c"),
    s(:str, "9.5c"),
    s(:str, "4c"),
    s(:str, "12.5c"),
    s(:hash,
      s(:pair,
        s(:str, "outline"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "width"),
        s(:str, "3m")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "0.5c"),
    s(:str, "13.5c"),
    s(:str, "4.5c"),
    s(:str, "15.5c"),
    s(:hash,
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :green)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "6c"),
    s(:str, "10c"),
    s(:str, "9c"),
    s(:str, "15c"),
    s(:hash,
      s(:pair,
        s(:str, "outline"),
        s(:str, "")),
      s(:pair,
        s(:str, "stipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "15c"),
    s(:str, "8.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "楕円")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcOval), :new,
    s(:lvar, :cvs),
    s(:str, "11c"),
    s(:str, "9.5c"),
    s(:str, "14c"),
    s(:str, "12.5c"),
    s(:hash,
      s(:pair,
        s(:str, "outline"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "width"),
        s(:str, "3m")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcOval), :new,
    s(:lvar, :cvs),
    s(:str, "10.5c"),
    s(:str, "13.5c"),
    s(:str, "14.5c"),
    s(:str, "15.5c"),
    s(:hash,
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :green)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcOval), :new,
    s(:lvar, :cvs),
    s(:str, "16c"),
    s(:str, "10c"),
    s(:str, "19c"),
    s(:str, "15c"),
    s(:hash,
      s(:pair,
        s(:str, "outline"),
        s(:str, "")),
      s(:pair,
        s(:str, "stipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "25c"),
    s(:str, "8.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "テキスト")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "22.4c"),
    s(:str, "8.9c"),
    s(:str, "22.6c"),
    s(:str, "9.1c")),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "22.5c"),
    s(:str, "9c"),
    s(:hash,
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")),
      s(:pair,
        s(:str, "font"),
        s(:lvar, :font1)),
      s(:pair,
        s(:str, "width"),
        s(:str, "4c")),
      s(:pair,
        s(:str, "text"),
        s(:str, "短いテキスト。ワードラップ、左揃え、アンカーは北(上)。□は各テキストのアンカーポイントを示す。")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "25.4c"),
    s(:str, "10.9c"),
    s(:str, "25.6c"),
    s(:str, "11.1c")),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "25.5c"),
    s(:str, "11c"),
    s(:hash,
      s(:pair,
        s(:str, "anchor"),
        s(:str, "w")),
      s(:pair,
        s(:str, "font"),
        s(:lvar, :font1)),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "text"),
        s(:str, "いくつかの行。\nそれぞれ独立に\n行揃え。\n全て左端がアンカーされている。")),
      s(:pair,
        s(:str, "justify"),
        s(:str, "center")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcRectangle), :new,
    s(:lvar, :cvs),
    s(:str, "24.9c"),
    s(:str, "13.9c"),
    s(:str, "25.1c"),
    s(:str, "14.1c")),
  s(:if,
    s(:send,
      s(:gvar, :$tk_version), :=~,
      s(:regexp,
        s(:str, "^4\\.[01]"),
        s(:regopt))),
    s(:send,
      s(:const, nil, :TkcText), :new,
      s(:lvar, :cvs),
      s(:str, "25c"),
      s(:str, "14c"),
      s(:hash,
        s(:pair,
          s(:str, "anchor"),
          s(:str, "c")),
        s(:pair,
          s(:str, "font"),
          s(:lvar, :font2)),
        s(:pair,
          s(:str, "fill"),
          s(:lvar, :red)),
        s(:pair,
          s(:str, "stipple"),
          s(:send,
            s(:str, "@"), :+,
            s(:send,
              s(:array,
                s(:gvar, :$demo_dir),
                s(:str, ".."),
                s(:str, "images"),
                s(:str, "grey.5")), :join,
              s(:const,
                s(:const, nil, :File), :Separator)))),
        s(:pair,
          s(:str, "text"),
          s(:str, "Stippled characters")),
        s(:pair,
          s(:str, "tags"),
          s(:gvar, :$tag_item)))),
    s(:send,
      s(:const, nil, :TkcText), :new,
      s(:lvar, :cvs),
      s(:str, "25c"),
      s(:str, "14c"),
      s(:hash,
        s(:pair,
          s(:str, "anchor"),
          s(:str, "c")),
        s(:pair,
          s(:str, "font"),
          s(:lvar, :font2)),
        s(:pair,
          s(:str, "fill"),
          s(:lvar, :red)),
        s(:pair,
          s(:str, "stipple"),
          s(:str, "gray50")),
        s(:pair,
          s(:str, "text"),
          s(:str, "Stippled characters")),
        s(:pair,
          s(:str, "tags"),
          s(:gvar, :$tag_item))))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "5c"),
    s(:str, "16.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "弧")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcArc), :new,
    s(:lvar, :cvs),
    s(:str, "0.5c"),
    s(:str, "17c"),
    s(:str, "7c"),
    s(:str, "20c"),
    s(:hash,
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :green)),
      s(:pair,
        s(:str, "outline"),
        s(:str, "black")),
      s(:pair,
        s(:str, "start"),
        s(:int, 45)),
      s(:pair,
        s(:str, "extent"),
        s(:int, 270)),
      s(:pair,
        s(:str, "style"),
        s(:str, "pieslice")),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcArc), :new,
    s(:lvar, :cvs),
    s(:str, "6.5c"),
    s(:str, "17c"),
    s(:str, "9.5c"),
    s(:str, "20c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:str, "4m")),
      s(:pair,
        s(:str, "style"),
        s(:str, "arc")),
      s(:pair,
        s(:str, "outline"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "start"),
        s(:int, 135)),
      s(:pair,
        s(:str, "extent"),
        s(:int, 270)),
      s(:pair,
        s(:str, "outlinestipple"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "gray25.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcArc), :new,
    s(:lvar, :cvs),
    s(:str, "0.5c"),
    s(:str, "20c"),
    s(:str, "9.5c"),
    s(:str, "24c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:str, "4m")),
      s(:pair,
        s(:str, "style"),
        s(:str, "pieslice")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "")),
      s(:pair,
        s(:str, "outline"),
        s(:lvar, :red)),
      s(:pair,
        s(:str, "start"),
        s(:int, 225)),
      s(:pair,
        s(:str, "extent"),
        s(:int, 90)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcArc), :new,
    s(:lvar, :cvs),
    s(:str, "5.5c"),
    s(:str, "20.5c"),
    s(:str, "9.5c"),
    s(:str, "23.5c"),
    s(:hash,
      s(:pair,
        s(:str, "width"),
        s(:str, "4m")),
      s(:pair,
        s(:str, "style"),
        s(:str, "chord")),
      s(:pair,
        s(:str, "fill"),
        s(:lvar, :blue)),
      s(:pair,
        s(:str, "outline"),
        s(:str, "")),
      s(:pair,
        s(:str, "start"),
        s(:int, 45)),
      s(:pair,
        s(:str, "extent"),
        s(:int, 270)),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "15c"),
    s(:str, "16.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "ビットマップ")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:send,
    s(:const, nil, :TkcBitmap), :new,
    s(:lvar, :cvs),
    s(:str, "13c"),
    s(:str, "20c"),
    s(:hash,
      s(:pair,
        s(:str, "bitmap"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "face.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcBitmap), :new,
    s(:lvar, :cvs),
    s(:str, "17c"),
    s(:str, "18.5c"),
    s(:hash,
      s(:pair,
        s(:str, "bitmap"),
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "noletter.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:pair,
        s(:str, "tags"),
        s(:gvar, :$tag_item)))),
  s(:block,
    s(:send,
      s(:const, nil, :TkcBitmap), :new,
      s(:lvar, :cvs),
      s(:str, "17c"),
      s(:str, "21.5c")),
    s(:args),
    s(:begin,
      s(:send, nil, :bitmap,
        s(:send,
          s(:str, "@"), :+,
          s(:send,
            s(:array,
              s(:gvar, :$demo_dir),
              s(:str, ".."),
              s(:str, "images"),
              s(:str, "letters.xbm")), :join,
            s(:const,
              s(:const, nil, :File), :Separator)))),
      s(:send, nil, :tags,
        s(:gvar, :$tag_item)))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "25c"),
    s(:str, "16.2c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "ウィンドウ")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "n")))),
  s(:block,
    s(:send,
      s(:const, nil, :TkButton), :new,
      s(:lvar, :cvs)),
    s(:args,
      s(:arg, :b)),
    s(:begin,
      s(:send, nil, :text,
        s(:str, "押してね")),
      s(:send, nil, :command,
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send, nil, :butPress,
            s(:lvar, :cvs),
            s(:lvar, :red)))),
      s(:send,
        s(:const, nil, :TkcWindow), :new,
        s(:lvar, :cvs),
        s(:str, "21c"),
        s(:str, "18c"),
        s(:hash,
          s(:pair,
            s(:str, "window"),
            s(:lvar, :b)),
          s(:pair,
            s(:str, "anchor"),
            s(:str, "nw")),
          s(:pair,
            s(:str, "tags"),
            s(:gvar, :$tag_item)))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkEntry), :new,
      s(:lvar, :cvs),
      s(:hash,
        s(:pair,
          s(:str, "width"),
          s(:int, 20)),
        s(:pair,
          s(:str, "relief"),
          s(:str, "sunken")))),
    s(:args,
      s(:arg, :e)),
    s(:begin,
      s(:send, nil, :insert,
        s(:str, "end"),
        s(:str, "編集してね")),
      s(:send,
        s(:const, nil, :TkcWindow), :new,
        s(:lvar, :cvs),
        s(:str, "21c"),
        s(:str, "21c"),
        s(:hash,
          s(:pair,
            s(:str, "window"),
            s(:lvar, :e)),
          s(:pair,
            s(:str, "anchor"),
            s(:str, "nw")),
          s(:pair,
            s(:str, "tags"),
            s(:gvar, :$tag_item)))))),
  s(:block,
    s(:send,
      s(:const, nil, :TkScale), :new,
      s(:lvar, :cvs),
      s(:hash,
        s(:pair,
          s(:str, "from"),
          s(:int, 0)),
        s(:pair,
          s(:str, "to"),
          s(:int, 100)),
        s(:pair,
          s(:str, "length"),
          s(:str, "6c")),
        s(:pair,
          s(:str, "sliderlength"),
          s(:str, ".4c")),
        s(:pair,
          s(:str, "width"),
          s(:str, ".5c")),
        s(:pair,
          s(:str, "tickinterval"),
          s(:int, 0)))),
    s(:args,
      s(:arg, :scl)),
    s(:send,
      s(:const, nil, :TkcWindow), :new,
      s(:lvar, :cvs),
      s(:str, "28.5c"),
      s(:str, "17.5c"),
      s(:hash,
        s(:pair,
          s(:str, "window"),
          s(:lvar, :scl)),
        s(:pair,
          s(:str, "anchor"),
          s(:str, "n")),
        s(:pair,
          s(:str, "tags"),
          s(:gvar, :$tag_item))))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "21c"),
    s(:str, "17.9c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "ボタン:")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "sw")))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "21c"),
    s(:str, "20.9c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "エントリ:")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "sw")))),
  s(:send,
    s(:const, nil, :TkcText), :new,
    s(:lvar, :cvs),
    s(:str, "28.5c"),
    s(:str, "17.4c"),
    s(:hash,
      s(:pair,
        s(:str, "text"),
        s(:str, "スケール:")),
      s(:pair,
        s(:str, "anchor"),
        s(:str, "s")))),
  s(:send,
    s(:lvar, :cvs), :itembind,
    s(:gvar, :$tag_item),
    s(:str, "Any-Enter"),
    s(:block,
      s(:send, nil, :proc),
      s(:args),
      s(:send, nil, :itemEnter,
        s(:lvar, :cvs)))),
  s(:send,
    s(:lvar, :cvs), :itembind,
    s(:gvar, :$tag_item),
    s(:str, "Any-Leave"),
    s(:block,
      s(:send, nil, :proc),
      s(:args),
      s(:send, nil, :itemLeave,
        s(:lvar, :cvs)))),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "2"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send,
        s(:lvar, :cvs), :scan_mark,
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "B2-Motion"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send,
        s(:lvar, :cvs), :scan_dragto,
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "3"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send, nil, :itemMark,
        s(:lvar, :cvs),
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "B3-Motion"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send, nil, :itemStroke,
        s(:lvar, :cvs),
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "Control-f"),
    s(:block,
      s(:send, nil, :proc),
      s(:args),
      s(:send, nil, :itemsUnderArea,
        s(:lvar, :cvs)))),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "1"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send, nil, :itemStartDrag,
        s(:lvar, :cvs),
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:send,
    s(:lvar, :cvs), :bind,
    s(:str, "B1-Motion"),
    s(:block,
      s(:send, nil, :proc),
      s(:args,
        s(:arg, :x),
        s(:arg, :y)),
      s(:send, nil, :itemDrag,
        s(:lvar, :cvs),
        s(:lvar, :x),
        s(:lvar, :y))),
    s(:str, "%x %y")),
  s(:gvasgn, :$restoreCmd,
    s(:nil)),
  s(:def, :itemEnter,
    s(:args,
      s(:arg, :c)),
    s(:begin,
      s(:if,
        s(:send,
          s(:send,
            s(:send,
              s(:const, nil, :TkWinfo), :depth,
              s(:lvar, :c)), :to_i), :==,
          s(:int, 1)),
        s(:begin,
          s(:gvasgn, :$restoreCmd,
            s(:nil)),
          s(:return)), nil),
      s(:lvasgn, :type,
        s(:send,
          s(:lvar, :c), :itemtype,
          s(:str, "current"))),
      s(:if,
        s(:send,
          s(:lvar, :type), :==,
          s(:const, nil, :TkcWindow)),
        s(:begin,
          s(:gvasgn, :$restoreCmd,
            s(:nil)),
          s(:return)), nil),
      s(:if,
        s(:send,
          s(:lvar, :type), :==,
          s(:const, nil, :TkcBitmap)),
        s(:begin,
          s(:lvasgn, :bg,
            s(:send,
              s(:begin,
                s(:send,
                  s(:lvar, :c), :itemconfiginfo,
                  s(:str, "current"),
                  s(:str, "background"))), :[],
              s(:int, 4))),
          s(:gvasgn, :$restoreCmd,
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:lvar, :c), :itemconfigure,
                s(:str, "current"),
                s(:str, "background"),
                s(:lvar, :bg)))),
          s(:send,
            s(:lvar, :c), :itemconfigure,
            s(:str, "current"),
            s(:str, "background"),
            s(:str, "SteelBlue2")),
          s(:return)), nil),
      s(:lvasgn, :fill,
        s(:send,
          s(:begin,
            s(:send,
              s(:lvar, :c), :itemconfiginfo,
              s(:str, "current"),
              s(:str, "fill"))), :[],
          s(:int, 4))),
      s(:if,
        s(:and,
          s(:begin,
            s(:or,
              s(:or,
                s(:send,
                  s(:lvar, :type), :==,
                  s(:const, nil, :TkcRectangle)),
                s(:send,
                  s(:lvar, :type), :==,
                  s(:const, nil, :TkcOval))),
              s(:send,
                s(:lvar, :type), :==,
                s(:const, nil, :TkcArc)))),
          s(:send,
            s(:lvar, :fill), :==,
            s(:array))),
        s(:begin,
          s(:lvasgn, :outline,
            s(:send,
              s(:begin,
                s(:send,
                  s(:lvar, :c), :itemconfiginfo,
                  s(:str, "current"),
                  s(:str, "outline"))), :[],
              s(:int, 4))),
          s(:gvasgn, :$restoreCmd,
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:lvar, :c), :itemconfigure,
                s(:str, "current"),
                s(:str, "outline"),
                s(:lvar, :outline)))),
          s(:send,
            s(:lvar, :c), :itemconfigure,
            s(:str, "current"),
            s(:str, "outline"),
            s(:str, "SteelBlue2"))),
        s(:begin,
          s(:gvasgn, :$restoreCmd,
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:send,
                s(:lvar, :c), :itemconfigure,
                s(:str, "current"),
                s(:str, "fill"),
                s(:lvar, :fill)))),
          s(:send,
            s(:lvar, :c), :itemconfigure,
            s(:str, "current"),
            s(:str, "fill"),
            s(:str, "SteelBlue2")))))),
  s(:def, :itemLeave,
    s(:args,
      s(:arg, :c)),
    s(:if,
      s(:gvar, :$restoreCmd),
      s(:send,
        s(:gvar, :$restoreCmd), :call), nil)),
  s(:def, :itemMark,
    s(:args,
      s(:arg, :c),
      s(:arg, :x),
      s(:arg, :y)),
    s(:begin,
      s(:gvasgn, :$areaX1,
        s(:send,
          s(:lvar, :c), :canvasx,
          s(:lvar, :x))),
      s(:gvasgn, :$areaY1,
        s(:send,
          s(:lvar, :c), :canvasy,
          s(:lvar, :y))),
      s(:send,
        s(:lvar, :c), :delete,
        s(:str, "area")))),
  s(:def, :itemStroke,
    s(:args,
      s(:arg, :c),
      s(:arg, :x),
      s(:arg, :y)),
    s(:begin,
      s(:lvasgn, :x,
        s(:send,
          s(:lvar, :c), :canvasx,
          s(:lvar, :x))),
      s(:lvasgn, :y,
        s(:send,
          s(:lvar, :c), :canvasy,
          s(:lvar, :y))),
      s(:if,
        s(:and,
          s(:send,
            s(:gvar, :$areaX1), :!=,
            s(:lvar, :x)),
          s(:send,
            s(:gvar, :$areaY1), :!=,
            s(:lvar, :y))),
        s(:begin,
          s(:send,
            s(:lvar, :c), :delete,
            s(:str, "area")),
          s(:send,
            s(:lvar, :c), :addtag_withtag,
            s(:str, "area"),
            s(:send,
              s(:const, nil, :TkcRectangle), :new,
              s(:lvar, :c),
              s(:gvar, :$areaX1),
              s(:gvar, :$areaY1),
              s(:lvar, :x),
              s(:lvar, :y),
              s(:str, "-outline"),
              s(:str, "black"))),
          s(:gvasgn, :$areaX2,
            s(:lvar, :x)),
          s(:gvasgn, :$areaY2,
            s(:lvar, :y))), nil))),
  s(:def, :itemsUnderArea,
    s(:args,
      s(:arg, :c)),
    s(:begin,
      s(:lvasgn, :area,
        s(:send,
          s(:lvar, :c), :find_withtag,
          s(:str, "area"))),
      s(:lvasgn, :items,
        s(:array)),
      s(:block,
        s(:send,
          s(:send,
            s(:lvar, :c), :find_enclosed,
            s(:gvar, :$areaX1),
            s(:gvar, :$areaY1),
            s(:gvar, :$areaX2),
            s(:gvar, :$areaY2)), :each),
        s(:args,
          s(:arg, :i)),
        s(:if,
          s(:send,
            s(:send,
              s(:lvar, :i), :gettags), :include?,
            s(:gvar, :$tag_item)),
          s(:send,
            s(:lvar, :items), :push,
            s(:lvar, :i)), nil)),
      s(:send, nil, :print,
        s(:dstr,
          s(:str, "Items enclosed by area: "),
          s(:begin,
            s(:send,
              s(:lvar, :items), :inspect)),
          s(:str, "\n"))),
      s(:send,
        s(:const, nil, :STDOUT), :flush),
      s(:send,
        s(:lvar, :items), :clear),
      s(:block,
        s(:send,
          s(:send,
            s(:lvar, :c), :find_overlapping,
            s(:gvar, :$areaX1),
            s(:gvar, :$areaY1),
            s(:gvar, :$areaX2),
            s(:gvar, :$areaY2)), :each),
        s(:args,
          s(:arg, :i)),
        s(:if,
          s(:send,
            s(:send,
              s(:lvar, :i), :gettags), :include?,
            s(:gvar, :$tag_item)),
          s(:send,
            s(:lvar, :items), :push,
            s(:lvar, :i)), nil)),
      s(:send, nil, :print,
        s(:dstr,
          s(:str, "Items overlapping area: "),
          s(:begin,
            s(:send,
              s(:lvar, :items), :inspect)),
          s(:str, "\n"))),
      s(:send,
        s(:const, nil, :STDOUT), :flush))),
  s(:gvasgn, :$areaX1,
    s(:int, 0)),
  s(:gvasgn, :$areaY1,
    s(:int, 0)),
  s(:gvasgn, :$areaX2,
    s(:int, 0)),
  s(:gvasgn, :$areaY2,
    s(:int, 0)),
  s(:def, :itemStartDrag,
    s(:args,
      s(:arg, :c),
      s(:arg, :x),
      s(:arg, :y)),
    s(:begin,
      s(:gvasgn, :$lastX,
        s(:send,
          s(:lvar, :c), :canvasx,
          s(:lvar, :x))),
      s(:gvasgn, :$lastY,
        s(:send,
          s(:lvar, :c), :canvasy,
          s(:lvar, :y))))),
  s(:def, :itemDrag,
    s(:args,
      s(:arg, :c),
      s(:arg, :x),
      s(:arg, :y)),
    s(:begin,
      s(:lvasgn, :x,
        s(:send,
          s(:lvar, :c), :canvasx,
          s(:lvar, :x))),
      s(:lvasgn, :y,
        s(:send,
          s(:lvar, :c), :canvasy,
          s(:lvar, :y))),
      s(:send,
        s(:lvar, :c), :move,
        s(:str, "current"),
        s(:send,
          s(:lvar, :x), :-,
          s(:gvar, :$lastX)),
        s(:send,
          s(:lvar, :y), :-,
          s(:gvar, :$lastY))),
      s(:gvasgn, :$lastX,
        s(:lvar, :x)),
      s(:gvasgn, :$lastY,
        s(:lvar, :y)))),
  s(:def, :butPress,
    s(:args,
      s(:arg, :w),
      s(:arg, :color)),
    s(:begin,
      s(:lvasgn, :i,
        s(:send,
          s(:const, nil, :TkcText), :new,
          s(:lvar, :w),
          s(:str, "25c"),
          s(:str, "18.1c"),
          s(:hash,
            s(:pair,
              s(:str, "text"),
              s(:str, "いてて!!")),
            s(:pair,
              s(:str, "fill"),
              s(:lvar, :color)),
            s(:pair,
              s(:str, "anchor"),
              s(:str, "n"))))),
      s(:send,
        s(:const, nil, :Tk), :after,
        s(:int, 500),
        s(:block,
          s(:send, nil, :proc),
          s(:args),
          s(:send,
            s(:lvar, :w), :delete,
            s(:lvar, :i)))))))

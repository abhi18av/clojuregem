s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send, nil, :require,
    s(:str, "tkextlib/blt")),
  s(:lvasgn, :file,
    s(:send,
      s(:const, nil, :File), :join,
      s(:send,
        s(:const, nil, :File), :dirname,
        s(:send,
          s(:const, nil, :File), :expand_path,
          s(:str, "(string)"))),
      s(:str, "images"),
      s(:str, "buckskin.gif"))),
  s(:lvasgn, :bgTexture,
    s(:send,
      s(:const, nil, :TkPhotoImage), :new,
      s(:hash,
        s(:pair,
          s(:sym, :file),
          s(:lvar, :file))))),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Graph.Tile"),
    s(:lvar, :bgTexture)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Label.Tile"),
    s(:lvar, :bgTexture)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Frame.Tile"),
    s(:lvar, :bgTexture)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Htext.Tile"),
    s(:lvar, :bgTexture)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*TileOffset"),
    s(:int, 0)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*HighlightThickness"),
    s(:int, 0)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Element.ScaleSybols"),
    s(:false)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Element.Smooth"),
    s(:sym, :linear)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*activeLine.Color"),
    s(:str, "yellow4")),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*activeLine.Fill"),
    s(:str, "yellow")),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*activeLine.LineWidth"),
    s(:int, 0)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Element.Pixels"),
    s(:int, 3)),
  s(:send,
    s(:const, nil, :TkOption), :add,
    s(:str, "*Graph.halo"),
    s(:str, "7i")),
  s(:if,
    s(:send,
      s(:send,
        s(:send,
          s(:const, nil, :Tk), :root), :winfo_screenvisual), :!=,
      s(:str, "staticgray")),
    s(:begin,
      s(:send,
        s(:const, nil, :TkOption), :add,
        s(:str, "*print.background"),
        s(:str, "yellow")),
      s(:send,
        s(:const, nil, :TkOption), :add,
        s(:str, "*quit.background"),
        s(:str, "red"))), nil),
  s(:lvasgn, :length,
    s(:int, 250000)),
  s(:lvasgn, :graph,
    s(:send,
      s(:const,
        s(:const,
          s(:const, nil, :Tk), :BLT), :Graph), :new,
      s(:hash,
        s(:pair,
          s(:sym, :title),
          s(:dstr,
            s(:str, "Scatter Plot\n"),
            s(:begin,
              s(:lvar, :length)),
            s(:str, " points")))))),
  s(:send,
    s(:lvar, :graph), :xaxis_configure,
    s(:hash,
      s(:pair,
        s(:sym, :loose),
        s(:false)),
      s(:pair,
        s(:sym, :title),
        s(:str, "X Axis Label")))),
  s(:send,
    s(:lvar, :graph), :yaxis_configure,
    s(:hash,
      s(:pair,
        s(:sym, :title),
        s(:str, "Y Axis Label")))),
  s(:send,
    s(:lvar, :graph), :legend_configure,
    s(:hash,
      s(:pair,
        s(:sym, :activerelief),
        s(:sym, :sunken)),
      s(:pair,
        s(:sym, :background),
        s(:str, "")))),
  s(:send,
    s(:const,
      s(:const,
        s(:const, nil, :Tk), :BLT), :Table), :add,
    s(:send,
      s(:const, nil, :Tk), :root),
    s(:lvar, :graph),
    s(:array,
      s(:int, 0),
      s(:int, 0)),
    s(:hash,
      s(:pair,
        s(:sym, :fill),
        s(:sym, :both)))),
  s(:lvasgn, :v_x,
    s(:send,
      s(:const,
        s(:const,
          s(:const, nil, :Tk), :BLT), :Vector), :new,
      s(:lvar, :length))),
  s(:lvasgn, :v_y,
    s(:send,
      s(:const,
        s(:const,
          s(:const, nil, :Tk), :BLT), :Vector), :new,
      s(:lvar, :length))),
  s(:send,
    s(:lvar, :v_x), :expr,
    s(:dstr,
      s(:str, "random("),
      s(:begin,
        s(:lvar, :v_x)),
      s(:str, ")"))),
  s(:send,
    s(:lvar, :v_y), :expr,
    s(:dstr,
      s(:str, "random("),
      s(:begin,
        s(:lvar, :v_y)),
      s(:str, ")"))),
  s(:send,
    s(:lvar, :v_x), :sort,
    s(:lvar, :v_y)),
  s(:lvasgn, :plot,
    s(:send,
      s(:const,
        s(:const,
          s(:const,
            s(:const, nil, :Tk), :BLT), :PlotComponent), :Element), :new,
      s(:lvar, :graph),
      s(:hash,
        s(:pair,
          s(:sym, :symbol),
          s(:sym, :square)),
        s(:pair,
          s(:sym, :color),
          s(:str, "green4")),
        s(:pair,
          s(:sym, :fill),
          s(:str, "green2")),
        s(:pair,
          s(:sym, :linewidth),
          s(:int, 0)),
        s(:pair,
          s(:sym, :outlinewidth),
          s(:int, 1)),
        s(:pair,
          s(:sym, :pixels),
          s(:int, 4)),
        s(:pair,
          s(:sym, :label),
          s(:str, "plot")),
        s(:pair,
          s(:sym, :xdata),
          s(:lvar, :v_x)),
        s(:pair,
          s(:sym, :ydata),
          s(:lvar, :v_y))))),
  s(:send,
    s(:send,
      s(:const, nil, :Tk), :root), :minsize,
    s(:int, 0),
    s(:int, 0)),
  s(:send,
    s(:const,
      s(:const, nil, :Tk), :BLT), :zoom_stack,
    s(:lvar, :graph)),
  s(:send,
    s(:const,
      s(:const, nil, :Tk), :BLT), :crosshairs,
    s(:lvar, :graph)),
  s(:send,
    s(:const,
      s(:const, nil, :Tk), :BLT), :active_legend,
    s(:lvar, :graph)),
  s(:send,
    s(:const,
      s(:const, nil, :Tk), :BLT), :closest_point,
    s(:lvar, :graph)),
  s(:send,
    s(:const,
      s(:const,
        s(:const, nil, :Tk), :BLT), :Busy), :hold,
    s(:lvar, :graph)),
  s(:send,
    s(:const, nil, :Tk), :update),
  s(:send,
    s(:const,
      s(:const,
        s(:const, nil, :Tk), :BLT), :Busy), :release,
    s(:lvar, :graph)),
  s(:send,
    s(:const, nil, :Tk), :mainloop))

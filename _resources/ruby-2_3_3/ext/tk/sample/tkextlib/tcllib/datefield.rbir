s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send, nil, :require,
    s(:str, "tkextlib/tcllib/datefield")),
  s(:send, nil, :require,
    s(:str, "parsedate")),
  s(:send,
    s(:send,
      s(:const, nil, :Tk), :root), :title,
    s(:str, "Datefield example")),
  s(:lvasgn, :my_date1,
    s(:send,
      s(:const, nil, :TkVariable), :new)),
  s(:lvasgn, :my_date2,
    s(:send,
      s(:const, nil, :TkVariable), :new)),
  s(:block,
    s(:send,
      s(:lvar, :my_date1), :trace,
      s(:str, "w")),
    s(:args),
    s(:kwbegin,
      s(:rescue,
        s(:begin,
          s(:lvasgn, :t,
            s(:send,
              s(:const, nil, :Time), :local,
              s(:splat,
                s(:begin,
                  s(:send,
                    s(:const, nil, :ParseDate), :parsedate,
                    s(:send,
                      s(:lvar, :my_date1), :value)))))),
          s(:send,
            s(:lvar, :my_date2), :value=,
            s(:send,
              s(:lvar, :t), :strftime,
              s(:str, "%A")))),
        s(:resbody, nil, nil, nil), nil))),
  s(:lvasgn, :df,
    s(:send,
      s(:const,
        s(:const,
          s(:const, nil, :Tk), :Tcllib), :Datefield), :new,
      s(:hash,
        s(:pair,
          s(:sym, :textvariable),
          s(:lvar, :my_date1))))),
  s(:send,
    s(:const, nil, :Tk), :grid,
    s(:send,
      s(:const, nil, :TkLabel), :new,
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "Enter a date:")),
        s(:pair,
          s(:sym, :anchor),
          s(:sym, :e)))),
    s(:lvar, :df),
    s(:hash,
      s(:pair,
        s(:sym, :sticky),
        s(:sym, :ew)))),
  s(:send,
    s(:const, nil, :Tk), :grid,
    s(:send,
      s(:const, nil, :TkLabel), :new,
      s(:hash,
        s(:pair,
          s(:sym, :text),
          s(:str, "That date ia a:")),
        s(:pair,
          s(:sym, :anchor),
          s(:sym, :e)))),
    s(:send,
      s(:const, nil, :TkLabel), :new,
      s(:hash,
        s(:pair,
          s(:sym, :textvariable),
          s(:lvar, :my_date2)),
        s(:pair,
          s(:sym, :relief),
          s(:sym, :sunken)),
        s(:pair,
          s(:sym, :width),
          s(:int, 12)))),
    s(:hash,
      s(:pair,
        s(:sym, :sticky),
        s(:sym, :ew)))),
  s(:send,
    s(:lvar, :df), :set_focus),
  s(:send,
    s(:const, nil, :Tk), :mainloop))

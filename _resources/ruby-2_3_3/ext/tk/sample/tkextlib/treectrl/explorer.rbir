s(:begin,
  s(:def, :demoExplorerAux,
    s(:args,
      s(:arg, :t),
      s(:arg, :dir_proc),
      s(:arg, :file_proc)),
    s(:begin,
      s(:lvasgn, :base_dir,
        s(:send,
          s(:const, nil, :File), :dirname,
          s(:send,
            s(:const, nil, :File), :dirname,
            s(:ivar, :@ScriptDir)))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:lvasgn, :globDirs,
        s(:block,
          s(:send,
            s(:send,
              s(:const, nil, :Dir), :glob,
              s(:send,
                s(:const, nil, :File), :join,
                s(:lvar, :base_dir),
                s(:str, "*"))), :find_all),
          s(:args,
            s(:arg, :file)),
          s(:send,
            s(:const, nil, :FileTest), :directory?,
            s(:lvar, :file)))),
      s(:lvasgn, :clickGlobDirs,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:lvasgn, :list,
        s(:send,
          s(:lvar, :globDirs), :sort)),
      s(:lvasgn, :clickSortDirs,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:block,
        s(:send,
          s(:lvar, :list), :each),
        s(:args,
          s(:arg, :file)),
        s(:send,
          s(:lvar, :dir_proc), :call,
          s(:lvar, :file))),
      s(:lvasgn, :clickAddDirs,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:lvasgn, :globFiles,
        s(:block,
          s(:send,
            s(:send,
              s(:const, nil, :Dir), :glob,
              s(:send,
                s(:const, nil, :File), :join,
                s(:lvar, :base_dir),
                s(:str, "*"))), :find_all),
          s(:args,
            s(:arg, :file)),
          s(:send,
            s(:const, nil, :FileTest), :file?,
            s(:lvar, :file)))),
      s(:lvasgn, :clickGlobFiles,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:lvasgn, :list,
        s(:send,
          s(:lvar, :globFiles), :sort)),
      s(:lvasgn, :clickSortFiles,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :clicks,
        s(:send,
          s(:const,
            s(:const, nil, :Tk), :Clock), :clicks)),
      s(:block,
        s(:send,
          s(:lvar, :list), :each),
        s(:args,
          s(:arg, :file)),
        s(:send,
          s(:lvar, :file_proc), :call,
          s(:lvar, :file))),
      s(:lvasgn, :clickAddFiles,
        s(:send,
          s(:send,
            s(:const,
              s(:const, nil, :Tk), :Clock), :clicks), :-,
          s(:lvar, :clicks))),
      s(:lvasgn, :gd,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickGlobDirs), :/,
              s(:float, 1000000.0))))),
      s(:lvasgn, :sd,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickSortDirs), :/,
              s(:float, 1000000.0))))),
      s(:lvasgn, :ad,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickAddDirs), :/,
              s(:float, 1000000.0))))),
      s(:lvasgn, :gf,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickGlobFiles), :/,
              s(:float, 1000000.0))))),
      s(:lvasgn, :sf,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickSortFiles), :/,
              s(:float, 1000000.0))))),
      s(:lvasgn, :af,
        s(:send,
          s(:str, "%.2g"), :%,
          s(:begin,
            s(:send,
              s(:lvar, :clickAddFiles), :/,
              s(:float, 1000000.0))))),
      s(:send, nil, :puts,
        s(:dstr,
          s(:str, "dirs("),
          s(:begin,
            s(:send,
              s(:lvar, :globDirs), :length)),
          s(:str, ") glob/sort/add "),
          s(:begin,
            s(:lvar, :gd)),
          s(:str, "/"),
          s(:begin,
            s(:lvar, :sd)),
          s(:str, "/"),
          s(:begin,
            s(:lvar, :ad)),
          s(:str, "    files("),
          s(:begin,
            s(:send,
              s(:lvar, :globFiles), :length)),
          s(:str, ") glob/sort/add "),
          s(:begin,
            s(:lvar, :gf)),
          s(:str, "/"),
          s(:begin,
            s(:lvar, :sf)),
          s(:str, "/"),
          s(:begin,
            s(:lvar, :af)))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :DirCnt),
        s(:lvar, :t),
        s(:send,
          s(:lvar, :globDirs), :length)))),
  s(:def, :demoExplorerDetails,
    s(:args,
      s(:arg, :t)),
    s(:begin,
      s(:lvasgn, :height,
        s(:send,
          s(:send,
            s(:lvar, :t), :font), :metrics,
          s(:sym, :linespace))),
      s(:if,
        s(:send,
          s(:lvar, :height), :<,
          s(:int, 18)),
        s(:lvasgn, :height,
          s(:int, 18)), nil),
      s(:send,
        s(:lvar, :t), :configure,
        s(:hash,
          s(:pair,
            s(:sym, :showroot),
            s(:false)),
          s(:pair,
            s(:sym, :showbuttons),
            s(:false)),
          s(:pair,
            s(:sym, :showlines),
            s(:false)),
          s(:pair,
            s(:sym, :itemheight),
            s(:lvar, :height)),
          s(:pair,
            s(:sym, :selectmode),
            s(:sym, :extended)),
          s(:pair,
            s(:sym, :xscrollincrement),
            s(:int, 20)),
          s(:pair,
            s(:sym, :scrollmargin),
            s(:int, 16)),
          s(:pair,
            s(:sym, :xscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))),
          s(:pair,
            s(:sym, :yscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))))),
      s(:send, nil, :init_pics,
        s(:str, "small-*")),
      s(:if,
        s(:gvar, :$HasColumnCreate),
        s(:begin,
          s(:send,
            s(:lvar, :t), :column_create,
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Name")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "name")),
              s(:pair,
                s(:sym, :width),
                s(:int, 200)),
              s(:pair,
                s(:sym, :arrow),
                s(:sym, :up)),
              s(:pair,
                s(:sym, :arrowpad),
                s(:int, 6)))),
          s(:send,
            s(:lvar, :t), :column_create,
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Size")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "size")),
              s(:pair,
                s(:sym, :justify),
                s(:sym, :right)),
              s(:pair,
                s(:sym, :width),
                s(:int, 60)),
              s(:pair,
                s(:sym, :arrowside),
                s(:sym, :left)),
              s(:pair,
                s(:sym, :arrowgravity),
                s(:sym, :right)))),
          s(:send,
            s(:lvar, :t), :column_create,
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Type")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "type")),
              s(:pair,
                s(:sym, :width),
                s(:int, 120)))),
          s(:send,
            s(:lvar, :t), :column_create,
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Modified")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "modified")),
              s(:pair,
                s(:sym, :width),
                s(:int, 130))))),
        s(:begin,
          s(:send,
            s(:lvar, :t), :column_configure,
            s(:int, 0),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Name")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "name")),
              s(:pair,
                s(:sym, :width),
                s(:int, 200)),
              s(:pair,
                s(:sym, :arrow),
                s(:sym, :up)),
              s(:pair,
                s(:sym, :arrowpad),
                s(:int, 6)))),
          s(:send,
            s(:lvar, :t), :column_configure,
            s(:int, 1),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Size")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "size")),
              s(:pair,
                s(:sym, :justify),
                s(:sym, :right)),
              s(:pair,
                s(:sym, :width),
                s(:int, 60)),
              s(:pair,
                s(:sym, :arrowside),
                s(:sym, :left)),
              s(:pair,
                s(:sym, :arrowgravity),
                s(:sym, :right)))),
          s(:send,
            s(:lvar, :t), :column_configure,
            s(:int, 2),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Type")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "type")),
              s(:pair,
                s(:sym, :width),
                s(:int, 120)))),
          s(:send,
            s(:lvar, :t), :column_configure,
            s(:int, 3),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:str, "Modified")),
              s(:pair,
                s(:sym, :tag),
                s(:str, "modified")),
              s(:pair,
                s(:sym, :width),
                s(:int, 130)))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "e1"),
        s(:sym, :image),
        s(:hash,
          s(:pair,
            s(:sym, :image),
            s(:array,
              s(:send,
                s(:ivar, :@sel_images), :[],
                s(:str, "small-folder")),
              s(:array,
                s(:str, "selected")),
              s(:send,
                s(:ivar, :@images), :[],
                s(:str, "small-folder")),
              s(:array))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "e2"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlightText),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "txtType"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "txtSize"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :datatype),
            s(:sym, :integer)),
          s(:pair,
            s(:sym, :format),
            s(:str, "%dKB")))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "txtDate"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :datatype),
            s(:sym, :time)),
          s(:pair,
            s(:sym, :format),
            s(:str, "%d/%m/%y %I:%M %p")))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "e4"),
        s(:sym, :rect),
        s(:hash,
          s(:pair,
            s(:sym, :showfocus),
            s(:true)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlight),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")),
              s(:str, "gray"),
              s(:array,
                s(:str, "selected"),
                s(:str, "!focus")))))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "styName"),
          s(:hash,
            s(:pair,
              s(:sym, :orient),
              s(:sym, :horizontal))))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "e4"),
          s(:str, "e1"),
          s(:str, "e2"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "e1"),
        s(:hash,
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "e2"),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 2),
              s(:int, 0))),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "e4"),
        s(:hash,
          s(:pair,
            s(:sym, :union),
            s(:array,
              s(:str, "e2"))),
          s(:pair,
            s(:sym, :iexpand),
            s(:sym, :ns)),
          s(:pair,
            s(:sym, :ipadx),
            s(:int, 2)))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "stySize"))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "txtSize"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "txtSize"),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:int, 6)),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "styType"))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "txtType"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "txtType"),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:int, 6)),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "styDate"))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "txtDate"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "txtDate"),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:int, 6)),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :edit),
        s(:lvar, :t),
        s(:array,
          s(:str, "e2"))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :sensitive),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:str, "name"),
            s(:str, "styName"),
            s(:str, "e1"),
            s(:str, "e2")))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :dragimage),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:str, "name"),
            s(:str, "styName"),
            s(:str, "e1"),
            s(:str, "e2")))),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "Edit-accept"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :i),
            s(:arg, :tt)),
          s(:send,
            s(:lvar, :w), :item_text,
            s(:lvar, :i),
            s(:int, 0),
            s(:lvar, :tt))),
        s(:str, "%T %I %t")),
      s(:lvasgn, :dir_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "styName"),
              s(:int, 2),
              s(:str, "styType"),
              s(:int, 3),
              s(:str, "styDate")),
            s(:send,
              s(:lvar, :t), :item_complex,
              s(:lvar, :item),
              s(:array,
                s(:array,
                  s(:str, "e2"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:send,
                        s(:const, nil, :File), :basename,
                        s(:lvar, :file)))))),
              s(:array),
              s(:array,
                s(:array,
                  s(:str, "txtType"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:str, "Folder"))))),
              s(:array,
                s(:array,
                  s(:str, "txtDate"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :data),
                      s(:send,
                        s(:send,
                          s(:const, nil, :File), :mtime,
                          s(:lvar, :file)), :tv_sec)))))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:lvasgn, :file_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "styName"),
              s(:int, 1),
              s(:str, "stySize"),
              s(:int, 2),
              s(:str, "styType"),
              s(:int, 3),
              s(:str, "styDate")),
            s(:lvasgn, :ext,
              s(:send,
                s(:const, nil, :File), :extname,
                s(:lvar, :file))),
            s(:case,
              s(:lvar, :ext),
              s(:when,
                s(:str, ".dll"),
                s(:lvasgn, :img,
                  s(:str, "small-dll"))),
              s(:when,
                s(:str, ".exe"),
                s(:lvasgn, :img,
                  s(:str, "small-exe"))),
              s(:when,
                s(:str, ".txt"),
                s(:lvasgn, :img,
                  s(:str, "small-txt"))),
              s(:lvasgn, :img,
                s(:str, "small-file"))),
            s(:lvasgn, :type,
              s(:send,
                s(:lvar, :ext), :upcase)),
            s(:if,
              s(:send,
                s(:lvar, :type), :empty?), nil,
              s(:lvasgn, :type,
                s(:send,
                  s(:send,
                    s(:lvar, :type), :[],
                    s(:irange,
                      s(:int, 1),
                      s(:int, -1))), :<<,
                  s(:str, " ")))),
            s(:send,
              s(:lvar, :type), :<<,
              s(:str, "File")),
            s(:send,
              s(:lvar, :t), :item_complex,
              s(:lvar, :item),
              s(:array,
                s(:array,
                  s(:str, "e1"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :image),
                      s(:array,
                        s(:send,
                          s(:ivar, :@sel_images), :[],
                          s(:lvar, :img)),
                        s(:array,
                          s(:str, "selected")),
                        s(:send,
                          s(:ivar, :@images), :[],
                          s(:lvar, :img)),
                        s(:array))))),
                s(:array,
                  s(:str, "e2"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:send,
                        s(:const, nil, :File), :basename,
                        s(:lvar, :file)))))),
              s(:array,
                s(:array,
                  s(:str, "txtSize"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :data),
                      s(:send,
                        s(:send,
                          s(:send,
                            s(:const, nil, :File), :size,
                            s(:lvar, :file)), :/,
                          s(:int, 1024)), :+,
                        s(:int, 1)))))),
              s(:array,
                s(:array,
                  s(:str, "txtType"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:lvar, :type))))),
              s(:array,
                s(:array,
                  s(:str, "txtDate"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :data),
                      s(:send,
                        s(:send,
                          s(:const, nil, :File), :mtime,
                          s(:lvar, :file)), :tv_sec)))))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:send, nil, :demoExplorerAux,
        s(:lvar, :t),
        s(:lvar, :dir_proc),
        s(:lvar, :file_proc)),
      s(:ivasgn, :@SortColumn,
        s(:int, 0)),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "Header-invoke"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :c)),
          s(:send, nil, :explorerHeaderInvoke,
            s(:lvar, :t),
            s(:lvar, :w),
            s(:lvar, :c))),
        s(:str, "%T %C")),
      s(:send,
        s(:lvar, :t), :bindtags=,
        s(:array,
          s(:lvar, :t),
          s(:str, "TreeCtrlFileList"),
          s(:const,
            s(:const, nil, :Tk), :TreeCtrl),
          s(:send,
            s(:lvar, :t), :winfo_toplevel),
          s(:sym, :all))))),
  s(:def, :explorerHeaderInvoke,
    s(:args,
      s(:arg, :t),
      s(:arg, :w),
      s(:arg, :c)),
    s(:begin,
      s(:if,
        s(:begin,
          s(:send,
            s(:lvar, :c), :==,
            s(:ivar, :@SortColumn))),
        s(:if,
          s(:send,
            s(:send,
              s(:lvar, :t), :column_cget,
              s(:ivar, :@SortColumn),
              s(:sym, :arrow)), :==,
            s(:str, "down")),
          s(:begin,
            s(:lvasgn, :order,
              s(:sym, :increasing)),
            s(:lvasgn, :arrow,
              s(:sym, :up))),
          s(:begin,
            s(:lvasgn, :order,
              s(:sym, :decreasing)),
            s(:lvasgn, :arrow,
              s(:sym, :down)))),
        s(:begin,
          s(:if,
            s(:send,
              s(:send,
                s(:lvar, :t), :column_cget,
                s(:ivar, :@SortColumn),
                s(:sym, :arrow)), :==,
              s(:str, "down")),
            s(:begin,
              s(:lvasgn, :order,
                s(:sym, :decreasing)),
              s(:lvasgn, :arrow,
                s(:sym, :down))),
            s(:begin,
              s(:lvasgn, :order,
                s(:sym, :increasing)),
              s(:lvasgn, :arrow,
                s(:sym, :up)))),
          s(:send,
            s(:lvar, :t), :column_configure,
            s(:ivar, :@SortColumn),
            s(:hash,
              s(:pair,
                s(:sym, :arrow),
                s(:sym, :none)))),
          s(:ivasgn, :@SortColumn,
            s(:lvar, :c)))),
      s(:send,
        s(:lvar, :t), :column_configure,
        s(:lvar, :c),
        s(:hash,
          s(:pair,
            s(:sym, :arrow),
            s(:lvar, :arrow)))),
      s(:lvasgn, :dirCount,
        s(:send,
          s(:const, nil, :TkComm), :number,
          s(:send,
            s(:ivar, :@Priv), :[],
            s(:sym, :DirCnt),
            s(:lvar, :t)))),
      s(:lvasgn, :lastDir,
        s(:send,
          s(:lvar, :dirCount), :-,
          s(:int, 1))),
      s(:case,
        s(:send,
          s(:lvar, :t), :column_cget,
          s(:lvar, :c),
          s(:sym, :tag)),
        s(:when,
          s(:str, "name"),
          s(:begin,
            s(:if,
              s(:send,
                s(:lvar, :dirCount), :>,
                s(:int, 0)),
              s(:send,
                s(:lvar, :t), :item_sort,
                s(:sym, :root),
                s(:lvar, :order),
                s(:hash,
                  s(:pair,
                    s(:sym, :last),
                    s(:dstr,
                      s(:str, "root child "),
                      s(:begin,
                        s(:lvar, :lastDir))))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:lvar, :c)),
                  s(:pair,
                    s(:sym, :dictionary),
                    s(:true)))), nil),
            s(:if,
              s(:send,
                s(:lvar, :dirCount), :<,
                s(:send,
                  s(:send,
                    s(:lvar, :t), :numitems), :-,
                  s(:int, 1))),
              s(:send,
                s(:lvar, :t), :item_sort,
                s(:sym, :root),
                s(:lvar, :order),
                s(:hash,
                  s(:pair,
                    s(:sym, :first),
                    s(:dstr,
                      s(:str, "root child "),
                      s(:begin,
                        s(:lvar, :dirCount))))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:lvar, :c)),
                  s(:pair,
                    s(:sym, :dictionary),
                    s(:true)))), nil))),
        s(:when,
          s(:str, "size"),
          s(:if,
            s(:send,
              s(:lvar, :dirCount), :<,
              s(:send,
                s(:send,
                  s(:lvar, :t), :numitems), :-,
                s(:int, 1))),
            s(:send,
              s(:lvar, :t), :item_sort,
              s(:sym, :root),
              s(:lvar, :order),
              s(:hash,
                s(:pair,
                  s(:sym, :first),
                  s(:dstr,
                    s(:str, "root child "),
                    s(:begin,
                      s(:lvar, :dirCount))))),
              s(:hash,
                s(:pair,
                  s(:sym, :column),
                  s(:lvar, :c)),
                s(:pair,
                  s(:sym, :integer),
                  s(:true))),
              s(:hash,
                s(:pair,
                  s(:sym, :column),
                  s(:str, "name")),
                s(:pair,
                  s(:sym, :dictionary),
                  s(:true)))), nil)),
        s(:when,
          s(:str, "type"),
          s(:if,
            s(:send,
              s(:lvar, :dirCount), :<,
              s(:send,
                s(:send,
                  s(:lvar, :t), :numitems), :-,
                s(:int, 1))),
            s(:send,
              s(:lvar, :t), :item_sort,
              s(:sym, :root),
              s(:lvar, :order),
              s(:hash,
                s(:pair,
                  s(:sym, :first),
                  s(:dstr,
                    s(:str, "root child "),
                    s(:begin,
                      s(:lvar, :dirCount))))),
              s(:hash,
                s(:pair,
                  s(:sym, :column),
                  s(:lvar, :c)),
                s(:pair,
                  s(:sym, :dictionary),
                  s(:true))),
              s(:hash,
                s(:pair,
                  s(:sym, :column),
                  s(:str, "name")),
                s(:pair,
                  s(:sym, :dictionary),
                  s(:true)))), nil)),
        s(:when,
          s(:str, "modified"),
          s(:begin,
            s(:if,
              s(:send,
                s(:lvar, :dirCount), :>,
                s(:int, 0)),
              s(:send,
                s(:lvar, :t), :item_sort,
                s(:sym, :root),
                s(:lvar, :order),
                s(:hash,
                  s(:pair,
                    s(:sym, :last),
                    s(:dstr,
                      s(:str, "root child "),
                      s(:begin,
                        s(:lvar, :lastDir))))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:lvar, :c)),
                  s(:pair,
                    s(:sym, :integer),
                    s(:true))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:str, "name")),
                  s(:pair,
                    s(:sym, :dictionary),
                    s(:true)))), nil),
            s(:if,
              s(:send,
                s(:lvar, :dirCount), :<,
                s(:send,
                  s(:send,
                    s(:lvar, :t), :numitems), :-,
                  s(:int, 1))),
              s(:send,
                s(:lvar, :t), :item_sort,
                s(:sym, :root),
                s(:lvar, :order),
                s(:hash,
                  s(:pair,
                    s(:sym, :first),
                    s(:dstr,
                      s(:str, "root child "),
                      s(:begin,
                        s(:lvar, :dirCount))))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:lvar, :c)),
                  s(:pair,
                    s(:sym, :integer),
                    s(:true))),
                s(:hash,
                  s(:pair,
                    s(:sym, :column),
                    s(:str, "name")),
                  s(:pair,
                    s(:sym, :dictionary),
                    s(:true)))), nil))), nil))),
  s(:def, :demoExplorerLargeIcons,
    s(:args,
      s(:arg, :t)),
    s(:begin,
      s(:lvasgn, :itemHeight,
        s(:send,
          s(:send,
            s(:int, 32), :+,
            s(:int, 4)), :+,
          s(:send,
            s(:send,
              s(:send,
                s(:lvar, :t), :font), :metrics,
              s(:sym, :linespace)), :*,
            s(:int, 3)))),
      s(:send,
        s(:lvar, :t), :configure,
        s(:hash,
          s(:pair,
            s(:sym, :showroot),
            s(:false)),
          s(:pair,
            s(:sym, :showbuttons),
            s(:false)),
          s(:pair,
            s(:sym, :showlines),
            s(:false)),
          s(:pair,
            s(:sym, :selectmode),
            s(:sym, :extended)),
          s(:pair,
            s(:sym, :wrap),
            s(:sym, :window)),
          s(:pair,
            s(:sym, :orient),
            s(:sym, :horizontal)),
          s(:pair,
            s(:sym, :itemheight),
            s(:lvar, :itemHeight)),
          s(:pair,
            s(:sym, :showheader),
            s(:false)),
          s(:pair,
            s(:sym, :scrollmargin),
            s(:int, 16)),
          s(:pair,
            s(:sym, :xscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))),
          s(:pair,
            s(:sym, :yscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))))),
      s(:send, nil, :init_pics,
        s(:str, "big-*")),
      s(:if,
        s(:gvar, :$HasColumnCreate),
        s(:send,
          s(:lvar, :t), :column_create,
          s(:hash,
            s(:pair,
              s(:sym, :width),
              s(:int, 75)))),
        s(:send,
          s(:lvar, :t), :column_configure,
          s(:int, 0),
          s(:hash,
            s(:pair,
              s(:sym, :width),
              s(:int, 75))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemImg"),
        s(:sym, :image),
        s(:hash,
          s(:pair,
            s(:sym, :image),
            s(:array,
              s(:send,
                s(:ivar, :@sel_images), :[],
                s(:str, "big-folder")),
              s(:array,
                s(:str, "selected")),
              s(:send,
                s(:ivar, :@images), :[],
                s(:str, "big-folder")),
              s(:array))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemTxt"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :justify),
            s(:sym, :center)),
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :width),
            s(:int, 71)),
          s(:pair,
            s(:sym, :wrap),
            s(:sym, :word)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlightText),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemSel"),
        s(:sym, :rect),
        s(:hash,
          s(:pair,
            s(:sym, :showfocus),
            s(:true)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlight),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")),
              s(:str, "gray"),
              s(:array,
                s(:str, "selected")))))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "STYLE"),
          s(:hash,
            s(:pair,
              s(:sym, :orient),
              s(:sym, :vertical))))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "elemSel"),
          s(:str, "elemImg"),
          s(:str, "elemTxt"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemImg"),
        s(:hash,
          s(:pair,
            s(:sym, :expand),
            s(:sym, :we)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemTxt"),
        s(:hash,
          s(:pair,
            s(:sym, :pady),
            s(:array,
              s(:int, 4),
              s(:int, 0))),
          s(:pair,
            s(:sym, :padx),
            s(:int, 2)),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :we)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemSel"),
        s(:hash,
          s(:pair,
            s(:sym, :union),
            s(:array,
              s(:str, "elemTxt"))))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :edit),
        s(:lvar, :t),
        s(:array,
          s(:str, "elemTxt"))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :sensitive),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:int, 0),
            s(:str, "STYLE"),
            s(:str, "elemImg"),
            s(:str, "elemTxt")))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :dragimage),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:int, 0),
            s(:str, "STYLE"),
            s(:str, "elemImg"),
            s(:str, "elemTxt")))),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "Edit-accept"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :i),
            s(:arg, :tt)),
          s(:send,
            s(:lvar, :w), :item_text,
            s(:lvar, :i),
            s(:int, 0),
            s(:lvar, :tt))),
        s(:str, "%T %I %t")),
      s(:lvasgn, :dir_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "STYLE")),
            s(:send,
              s(:lvar, :t), :item_text,
              s(:lvar, :item),
              s(:int, 0),
              s(:send,
                s(:const, nil, :File), :basename,
                s(:lvar, :file))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:lvasgn, :file_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "STYLE")),
            s(:lvasgn, :ext,
              s(:send,
                s(:const, nil, :File), :extname,
                s(:lvar, :file))),
            s(:case,
              s(:lvar, :ext),
              s(:when,
                s(:str, ".dll"),
                s(:lvasgn, :img,
                  s(:str, "big-dll"))),
              s(:when,
                s(:str, ".exe"),
                s(:lvasgn, :img,
                  s(:str, "big-exe"))),
              s(:when,
                s(:str, ".txt"),
                s(:lvasgn, :img,
                  s(:str, "big-txt"))),
              s(:lvasgn, :img,
                s(:str, "big-file"))),
            s(:lvasgn, :type,
              s(:send,
                s(:lvar, :ext), :upcase)),
            s(:if,
              s(:send,
                s(:lvar, :type), :empty?), nil,
              s(:lvasgn, :type,
                s(:send,
                  s(:send,
                    s(:lvar, :type), :[],
                    s(:irange,
                      s(:int, 1),
                      s(:int, -1))), :<<,
                  s(:str, " ")))),
            s(:send,
              s(:lvar, :type), :<<,
              s(:str, "File")),
            s(:send,
              s(:lvar, :t), :item_complex,
              s(:lvar, :item),
              s(:array,
                s(:array,
                  s(:str, "elemImg"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :image),
                      s(:array,
                        s(:send,
                          s(:ivar, :@sel_images), :[],
                          s(:lvar, :img)),
                        s(:array,
                          s(:str, "selected")),
                        s(:send,
                          s(:ivar, :@images), :[],
                          s(:lvar, :img)),
                        s(:array))))),
                s(:array,
                  s(:str, "elemTxt"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:send,
                        s(:const, nil, :File), :basename,
                        s(:lvar, :file))))))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:send, nil, :demoExplorerAux,
        s(:lvar, :t),
        s(:lvar, :dir_proc),
        s(:lvar, :file_proc)),
      s(:send,
        s(:lvar, :t), :activate,
        s(:send,
          s(:lvar, :t), :index,
          s(:str, "root firstchild"))),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "ActiveItem"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :a),
            s(:arg, :c)),
          s(:begin,
            s(:send,
              s(:lvar, :w), :item_element_configure,
              s(:lvar, :a),
              s(:int, 0),
              s(:str, "elemTxt"),
              s(:hash,
                s(:pair,
                  s(:sym, :lines),
                  s(:str, "")))),
            s(:send,
              s(:lvar, :w), :item_element_configure,
              s(:lvar, :c),
              s(:int, 0),
              s(:str, "elemTxt"),
              s(:hash,
                s(:pair,
                  s(:sym, :lines),
                  s(:int, 3)))))),
        s(:str, "%T %p %c")),
      s(:send,
        s(:lvar, :t), :bindtags=,
        s(:array,
          s(:lvar, :t),
          s(:str, "TreeCtrlFileList"),
          s(:const,
            s(:const, nil, :Tk), :TreeCtrl),
          s(:send,
            s(:lvar, :t), :winfo_toplevel),
          s(:sym, :all))))),
  s(:def, :demoExplorerSmallIcons,
    s(:args,
      s(:arg, :t)),
    s(:begin,
      s(:send, nil, :demoExplorerList,
        s(:lvar, :t)),
      s(:send,
        s(:lvar, :t), :configure,
        s(:hash,
          s(:pair,
            s(:sym, :orient),
            s(:sym, :horizontal)),
          s(:pair,
            s(:sym, :xscrollincrement),
            s(:int, 0)))),
      s(:send,
        s(:lvar, :t), :column_configure,
        s(:int, 0),
        s(:hash,
          s(:pair,
            s(:sym, :width),
            s(:str, "")),
          s(:pair,
            s(:sym, :stepwidth),
            s(:int, 110)),
          s(:pair,
            s(:sym, :widthhack),
            s(:false)))))),
  s(:def, :demoExplorerList,
    s(:args,
      s(:arg, :t)),
    s(:begin,
      s(:lvasgn, :height,
        s(:send,
          s(:send,
            s(:send,
              s(:lvar, :t), :font), :metrics,
            s(:sym, :linespace)), :+,
          s(:int, 2))),
      s(:if,
        s(:send,
          s(:lvar, :height), :<,
          s(:int, 18)),
        s(:lvasgn, :height,
          s(:int, 18)), nil),
      s(:send,
        s(:lvar, :t), :configure,
        s(:hash,
          s(:pair,
            s(:sym, :showroot),
            s(:false)),
          s(:pair,
            s(:sym, :showbuttons),
            s(:false)),
          s(:pair,
            s(:sym, :showlines),
            s(:false)),
          s(:pair,
            s(:sym, :itemheight),
            s(:lvar, :height)),
          s(:pair,
            s(:sym, :selectmode),
            s(:sym, :extended)),
          s(:pair,
            s(:sym, :wrap),
            s(:sym, :window)),
          s(:pair,
            s(:sym, :showheader),
            s(:false)),
          s(:pair,
            s(:sym, :scrollmargin),
            s(:int, 16)),
          s(:pair,
            s(:sym, :xscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))),
          s(:pair,
            s(:sym, :yscrolldelay),
            s(:array,
              s(:int, 500),
              s(:int, 50))))),
      s(:send, nil, :init_pics,
        s(:str, "small-*")),
      s(:if,
        s(:gvar, :$HasColumnCreate),
        s(:send,
          s(:lvar, :t), :column_create,
          s(:hash,
            s(:pair,
              s(:sym, :widthhack),
              s(:true)))),
        s(:send,
          s(:lvar, :t), :column_configure,
          s(:int, 0),
          s(:hash,
            s(:pair,
              s(:sym, :widthhack),
              s(:true))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemImg"),
        s(:sym, :image),
        s(:hash,
          s(:pair,
            s(:sym, :image),
            s(:array,
              s(:send,
                s(:ivar, :@sel_images), :[],
                s(:str, "small-folder")),
              s(:array,
                s(:str, "selected")),
              s(:send,
                s(:ivar, :@images), :[],
                s(:str, "small-folder")),
              s(:array))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemTxt"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlightText),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemSel"),
        s(:sym, :rect),
        s(:hash,
          s(:pair,
            s(:sym, :showfocus),
            s(:true)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:ivar, :@SystemHighlight),
              s(:array,
                s(:str, "selected"),
                s(:str, "focus")),
              s(:str, "gray"),
              s(:array,
                s(:str, "selected"),
                s(:str, "!focus")))))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "STYLE"))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "elemSel"),
          s(:str, "elemImg"),
          s(:str, "elemTxt"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemImg"),
        s(:hash,
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemTxt"),
        s(:hash,
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :expand),
            s(:sym, :ns)),
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 2),
              s(:int, 0))))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemSel"),
        s(:hash,
          s(:pair,
            s(:sym, :union),
            s(:array,
              s(:str, "elemTxt"))),
          s(:pair,
            s(:sym, :iexpand),
            s(:sym, :ns)),
          s(:pair,
            s(:sym, :ipadx),
            s(:int, 2)))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :edit),
        s(:lvar, :t),
        s(:array,
          s(:str, "elemTxt"))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :sensitive),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:int, 0),
            s(:str, "STYLE"),
            s(:str, "elemImg"),
            s(:str, "elemTxt")))),
      s(:send,
        s(:ivar, :@Priv), :[]=,
        s(:sym, :dragimage),
        s(:lvar, :t),
        s(:array,
          s(:array,
            s(:int, 0),
            s(:str, "STYLE"),
            s(:str, "elemImg"),
            s(:str, "elemTxt")))),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "Edit-accept"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :i),
            s(:arg, :tt)),
          s(:send,
            s(:lvar, :w), :item_text,
            s(:lvar, :i),
            s(:int, 0),
            s(:lvar, :tt))),
        s(:str, "%T %I %t")),
      s(:lvasgn, :dir_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "STYLE")),
            s(:send,
              s(:lvar, :t), :item_text,
              s(:lvar, :item),
              s(:int, 0),
              s(:send,
                s(:const, nil, :File), :basename,
                s(:lvar, :file))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:lvasgn, :file_proc,
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :file)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:send,
              s(:lvar, :t), :item_style_set,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "STYLE")),
            s(:lvasgn, :ext,
              s(:send,
                s(:const, nil, :File), :extname,
                s(:lvar, :file))),
            s(:case,
              s(:lvar, :ext),
              s(:when,
                s(:str, ".dll"),
                s(:lvasgn, :img,
                  s(:str, "small-dll"))),
              s(:when,
                s(:str, ".exe"),
                s(:lvasgn, :img,
                  s(:str, "small-exe"))),
              s(:when,
                s(:str, ".txt"),
                s(:lvasgn, :img,
                  s(:str, "small-txt"))),
              s(:lvasgn, :img,
                s(:str, "small-file"))),
            s(:lvasgn, :type,
              s(:send,
                s(:lvar, :ext), :upcase)),
            s(:if,
              s(:send,
                s(:lvar, :type), :empty?), nil,
              s(:lvasgn, :type,
                s(:send,
                  s(:send,
                    s(:lvar, :type), :[],
                    s(:irange,
                      s(:int, 1),
                      s(:int, -1))), :<<,
                  s(:str, " ")))),
            s(:send,
              s(:lvar, :type), :<<,
              s(:str, "File")),
            s(:send,
              s(:lvar, :t), :item_complex,
              s(:lvar, :item),
              s(:array,
                s(:array,
                  s(:str, "elemImg"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :image),
                      s(:array,
                        s(:send,
                          s(:ivar, :@sel_images), :[],
                          s(:lvar, :img)),
                        s(:array,
                          s(:str, "selected")),
                        s(:send,
                          s(:ivar, :@images), :[],
                          s(:lvar, :img)),
                        s(:array))))),
                s(:array,
                  s(:str, "elemTxt"),
                  s(:hash,
                    s(:pair,
                      s(:sym, :text),
                      s(:send,
                        s(:const, nil, :File), :basename,
                        s(:lvar, :file))))))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:send, nil, :demoExplorerAux,
        s(:lvar, :t),
        s(:lvar, :dir_proc),
        s(:lvar, :file_proc)),
      s(:send,
        s(:lvar, :t), :activate,
        s(:send,
          s(:lvar, :t), :item_firstchild,
          s(:sym, :root))),
      s(:send,
        s(:lvar, :t), :bindtags=,
        s(:array,
          s(:lvar, :t),
          s(:str, "TreeCtrlFileList"),
          s(:const,
            s(:const, nil, :Tk), :TreeCtrl),
          s(:send,
            s(:lvar, :t), :winfo_toplevel),
          s(:sym, :all))))))

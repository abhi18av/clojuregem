s(:begin,
  s(:def, :demoIMovie,
    s(:args,
      s(:arg, :t)),
    s(:begin,
      s(:send,
        s(:lvar, :t), :configure,
        s(:hash,
          s(:pair,
            s(:sym, :showroot),
            s(:false)),
          s(:pair,
            s(:sym, :showbuttons),
            s(:false)),
          s(:pair,
            s(:sym, :showlines),
            s(:false)),
          s(:pair,
            s(:sym, :selectmode),
            s(:sym, :browse)),
          s(:pair,
            s(:sym, :orient),
            s(:sym, :horizontal)),
          s(:pair,
            s(:sym, :wrap),
            s(:sym, :window)),
          s(:pair,
            s(:sym, :showheader),
            s(:false)),
          s(:pair,
            s(:sym, :background),
            s(:str, "#dcdcdc")))),
      s(:if,
        s(:gvar, :$HasColumnCreate),
        s(:send,
          s(:lvar, :t), :column_create), nil),
      s(:send, nil, :init_pics,
        s(:str, "imovie-*")),
      s(:case,
        s(:ivar, :@thisPlatform),
        s(:when,
          s(:str, "macintosh"),
          s(:str, "macosx"),
          s(:begin,
            s(:lvasgn, :font1,
              s(:send,
                s(:const, nil, :TkFont), :new,
                s(:array,
                  s(:str, "Geneva"),
                  s(:int, 9)))),
            s(:lvasgn, :font2,
              s(:send,
                s(:const, nil, :TkFont), :new,
                s(:array,
                  s(:str, "Geneva"),
                  s(:int, 10)))))),
        s(:when,
          s(:str, "unix"),
          s(:begin,
            s(:lvasgn, :font1,
              s(:send,
                s(:const, nil, :TkFont), :new,
                s(:array,
                  s(:str, "Helvetica"),
                  s(:int, -12)))),
            s(:lvasgn, :font2,
              s(:send,
                s(:const, nil, :TkFont), :new,
                s(:array,
                  s(:str, "Helvetica"),
                  s(:int, -14)))))),
        s(:begin,
          s(:lvasgn, :font1,
            s(:send,
              s(:const, nil, :TkFont), :new,
              s(:array,
                s(:str, "Helvetica"),
                s(:int, 8)))),
          s(:lvasgn, :font2,
            s(:send,
              s(:const, nil, :TkFont), :new,
              s(:array,
                s(:str, "Helvetica"),
                s(:int, 10)))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemTime"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :font),
            s(:lvar, :font1)))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemName"),
        s(:sym, :text),
        s(:hash,
          s(:pair,
            s(:sym, :font),
            s(:lvar, :font2)),
          s(:pair,
            s(:sym, :lines),
            s(:int, 1)),
          s(:pair,
            s(:sym, :width),
            s(:int, 80)))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemRect"),
        s(:sym, :rect),
        s(:hash,
          s(:pair,
            s(:sym, :outline),
            s(:str, "#827878")),
          s(:pair,
            s(:sym, :outlinewidth),
            s(:int, 1)),
          s(:pair,
            s(:sym, :fill),
            s(:array,
              s(:str, "#ffdc5a"),
              s(:array,
                s(:str, "selected")),
              s(:str, "white"),
              s(:array))))),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemImg"),
        s(:sym, :image)),
      s(:send,
        s(:lvar, :t), :element_create,
        s(:str, "elemShadow"),
        s(:sym, :rect),
        s(:hash,
          s(:pair,
            s(:sym, :outline),
            s(:str, "gray")),
          s(:pair,
            s(:sym, :outlinewidth),
            s(:int, 1)),
          s(:pair,
            s(:sym, :open),
            s(:sym, :wn)))),
      s(:lvasgn, :s,
        s(:send,
          s(:lvar, :t), :style_create,
          s(:str, "STYLE"),
          s(:hash,
            s(:pair,
              s(:sym, :orient),
              s(:sym, :vertical))))),
      s(:send,
        s(:lvar, :t), :style_elements,
        s(:lvar, :s),
        s(:array,
          s(:str, "elemShadow"),
          s(:str, "elemRect"),
          s(:str, "elemTime"),
          s(:str, "elemImg"),
          s(:str, "elemName"))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemShadow"),
        s(:hash,
          s(:pair,
            s(:sym, :detach),
            s(:true)),
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 1),
              s(:int, 2))),
          s(:pair,
            s(:sym, :pady),
            s(:array,
              s(:int, 1),
              s(:int, 2))),
          s(:pair,
            s(:sym, :iexpand),
            s(:sym, :es)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemTime"),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 2),
              s(:int, 0))))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemImg"),
        s(:hash,
          s(:pair,
            s(:sym, :pady),
            s(:array,
              s(:int, 0),
              s(:int, 1))))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemName"),
        s(:hash,
          s(:pair,
            s(:sym, :expand),
            s(:sym, :we)),
          s(:pair,
            s(:sym, :ipady),
            s(:array,
              s(:int, 0),
              s(:int, 2))),
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 0),
              s(:int, 3))),
          s(:pair,
            s(:sym, :squeeze),
            s(:sym, :x)))),
      s(:send,
        s(:lvar, :t), :style_layout,
        s(:lvar, :s),
        s(:str, "elemRect"),
        s(:hash,
          s(:pair,
            s(:sym, :union),
            s(:array,
              s(:str, "elemTime"),
              s(:str, "elemImg"),
              s(:str, "elemName"))),
          s(:pair,
            s(:sym, :ipadx),
            s(:int, 6)),
          s(:pair,
            s(:sym, :padx),
            s(:array,
              s(:int, 0),
              s(:int, 3))),
          s(:pair,
            s(:sym, :pady),
            s(:array,
              s(:int, 0),
              s(:int, 3))))),
      s(:if,
        s(:gvar, :$Version_1_1_OrLater),
        s(:send,
          s(:lvar, :t), :defaultstyle,
          s(:array,
            s(:lvar, :s))), nil),
      s(:block,
        s(:send,
          s(:begin,
            s(:irange,
              s(:int, 0),
              s(:int, 4))), :each),
        s(:args,
          s(:arg, :i)),
        s(:block,
          s(:send,
            s(:array,
              s(:array,
                s(:str, "15:20"),
                s(:str, "Clip 1"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-01"))),
              s(:array,
                s(:str, "19:18"),
                s(:str, "Clip 2"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-02"))),
              s(:array,
                s(:str, "07:20"),
                s(:str, "Clip 3"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-03"))),
              s(:array,
                s(:str, "07:20"),
                s(:str, "Clip 4"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-04"))),
              s(:array,
                s(:str, "07:20"),
                s(:str, "Clip 5"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-05"))),
              s(:array,
                s(:str, "07:20"),
                s(:str, "Clip 6"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-06"))),
              s(:array,
                s(:str, "07:20"),
                s(:str, "Clip 7"),
                s(:send,
                  s(:ivar, :@images), :[],
                  s(:str, "imovie-07")))), :each),
          s(:args,
            s(:arg, :time),
            s(:arg, :name),
            s(:arg, :image)),
          s(:begin,
            s(:lvasgn, :item,
              s(:send,
                s(:lvar, :t), :item_create)),
            s(:if,
              s(:gvar, :$Version_1_1_OrLater), nil,
              s(:send,
                s(:lvar, :t), :item_style_set,
                s(:lvar, :item),
                s(:int, 0),
                s(:lvar, :s))),
            s(:send,
              s(:lvar, :t), :item_element_configure,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "elemTime"),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:lvar, :time)))),
            s(:send,
              s(:lvar, :t), :item_element_configure,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "elemName"),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:lvar, :name)))),
            s(:send,
              s(:lvar, :t), :item_element_configure,
              s(:lvar, :item),
              s(:int, 0),
              s(:str, "elemImg"),
              s(:hash,
                s(:pair,
                  s(:sym, :image),
                  s(:lvar, :image)))),
            s(:send,
              s(:lvar, :t), :item_lastchild,
              s(:sym, :root),
              s(:lvar, :item))))),
      s(:send,
        s(:lvar, :t), :notify_bind,
        s(:lvar, :t),
        s(:str, "Edit-accept"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :i),
            s(:arg, :c),
            s(:arg, :e),
            s(:arg, :tt)),
          s(:send,
            s(:lvar, :w), :item_element_configure,
            s(:lvar, :i),
            s(:lvar, :c),
            s(:lvar, :e),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:lvar, :tt))))),
        s(:str, "%T %I %C %E %t")),
      s(:lvasgn, :iMovie,
        s(:send,
          s(:const, nil, :TkBindTag), :new)),
      s(:send,
        s(:lvar, :iMovie), :bind,
        s(:str, "ButtonPress-1"),
        s(:block,
          s(:send, nil, :proc),
          s(:args,
            s(:arg, :w),
            s(:arg, :x),
            s(:arg, :y)),
          s(:send, nil, :iMovieButton1,
            s(:lvar, :w),
            s(:lvar, :x),
            s(:lvar, :y))),
        s(:str, "%W %x %y")),
      s(:send,
        s(:lvar, :t), :bindtags=,
        s(:array,
          s(:lvar, :t),
          s(:lvar, :iMovie),
          s(:const,
            s(:const, nil, :Tk), :TreeCtrl),
          s(:send,
            s(:lvar, :t), :winfo_toplevel),
          s(:const,
            s(:const, nil, :TkBindTag), :ALL))))),
  s(:def, :iMovieButton1,
    s(:args,
      s(:arg, :w),
      s(:arg, :x),
      s(:arg, :y)),
    s(:begin,
      s(:send,
        s(:lvar, :w), :set_focus),
      s(:lvasgn, :id,
        s(:send,
          s(:lvar, :w), :identify,
          s(:lvar, :x),
          s(:lvar, :y))),
      s(:if,
        s(:send,
          s(:lvar, :id), :empty?), nil,
        s(:if,
          s(:send,
            s(:send,
              s(:lvar, :id), :[],
              s(:int, 0)), :==,
            s(:str, "header")),
          s(:send,
            s(:const,
              s(:const,
                s(:const, nil, :Tk), :TreeCtrl), :BindCallback), :buttonPress1,
            s(:lvar, :w),
            s(:lvar, :x),
            s(:lvar, :y)),
          s(:if,
            s(:send,
              s(:send,
                s(:lvar, :id), :[],
                s(:int, 0)), :==,
              s(:str, "item")),
            s(:begin,
              s(:send,
                s(:const,
                  s(:const,
                    s(:const, nil, :Tk), :TreeCtrl), :BindCallback), :buttonPress1,
                s(:lvar, :w),
                s(:lvar, :x),
                s(:lvar, :y)),
              s(:send,
                s(:const, nil, :Tk), :update),
              s(:masgn,
                s(:mlhs,
                  s(:lvasgn, :where),
                  s(:lvasgn, :item),
                  s(:lvasgn, :arg1),
                  s(:lvasgn, :arg2),
                  s(:lvasgn, :arg3),
                  s(:lvasgn, :arg4)),
                s(:lvar, :id)),
              s(:case,
                s(:lvar, :arg1),
                s(:when,
                  s(:str, "column"),
                  s(:begin,
                    s(:lvasgn, :i,
                      s(:send,
                        s(:lvar, :id), :[],
                        s(:int, 1))),
                    s(:if,
                      s(:send,
                        s(:send,
                          s(:lvar, :id), :length), :==,
                        s(:int, 6)),
                      s(:begin,
                        s(:lvasgn, :e,
                          s(:send,
                            s(:lvar, :id), :[],
                            s(:int, -1))),
                        s(:if,
                          s(:send,
                            s(:lvar, :e), :==,
                            s(:str, "elemName")),
                          s(:begin,
                            s(:lvasgn, :exists,
                              s(:send,
                                s(:const, nil, :TkWinfo), :exist?,
                                s(:send,
                                  s(:send,
                                    s(:lvar, :w), :path), :+,
                                  s(:str, ".entry")))),
                            s(:send,
                              s(:const,
                                s(:const,
                                  s(:const, nil, :Tk), :TreeCtrl), :BindCallback), :entryOpen,
                              s(:lvar, :w),
                              s(:lvar, :i),
                              s(:int, 0),
                              s(:lvar, :e)),
                            s(:lvasgn, :ent,
                              s(:send,
                                s(:const, nil, :TkComm), :window,
                                s(:send,
                                  s(:send,
                                    s(:lvar, :w), :path), :+,
                                  s(:str, ".entry")))),
                            s(:if,
                              s(:lvar, :exists), nil,
                              s(:begin,
                                s(:send,
                                  s(:lvar, :ent), :configure,
                                  s(:hash,
                                    s(:pair,
                                      s(:sym, :borderwidth),
                                      s(:int, 0)),
                                    s(:pair,
                                      s(:sym, :justify),
                                      s(:sym, :center)),
                                    s(:pair,
                                      s(:sym, :background),
                                      s(:str, "#ffdc5a")))),
                                s(:masgn,
                                  s(:mlhs,
                                    s(:lvasgn, :x1),
                                    s(:lvasgn, :y1),
                                    s(:lvasgn, :x2),
                                    s(:lvasgn, :y2)),
                                  s(:send,
                                    s(:lvar, :w), :item_bbox,
                                    s(:lvar, :i),
                                    s(:int, 0),
                                    s(:lvar, :e))),
                                s(:send,
                                  s(:lvar, :ent), :place,
                                  s(:hash,
                                    s(:pair,
                                      s(:sym, :y),
                                      s(:send,
                                        s(:lvar, :y1), :-,
                                        s(:int, 1))))))),
                            s(:send,
                              s(:lvar, :ent), :selection_clear),
                            s(:masgn,
                              s(:mlhs,
                                s(:lvasgn, :x1),
                                s(:lvasgn, :y1),
                                s(:lvasgn, :x2),
                                s(:lvasgn, :y2)),
                              s(:send,
                                s(:lvar, :w), :item_bbox,
                                s(:lvar, :i))),
                            s(:send,
                              s(:lvar, :ent), :place,
                              s(:hash,
                                s(:pair,
                                  s(:sym, :x),
                                  s(:send,
                                    s(:lvar, :x1), :+,
                                    s(:int, 1))),
                                s(:pair,
                                  s(:sym, :width),
                                  s(:send,
                                    s(:send,
                                      s(:lvar, :x2), :-,
                                      s(:lvar, :x1)), :-,
                                    s(:int, 5))))),
                            s(:send, nil, :puts,
                              s(:dstr,
                                s(:str, "@"),
                                s(:begin,
                                  s(:send,
                                    s(:lvar, :x), :-,
                                    s(:begin,
                                      s(:send,
                                        s(:lvar, :x1), :+,
                                        s(:int, 1))))))),
                            s(:send,
                              s(:lvar, :ent), :icursor=,
                              s(:send,
                                s(:lvar, :ent), :index,
                                s(:send,
                                  s(:const, nil, :TkComm), :_at,
                                  s(:send,
                                    s(:lvar, :x), :-,
                                    s(:begin,
                                      s(:send,
                                        s(:lvar, :x1), :+,
                                        s(:int, 1)))))))), nil)), nil))), nil)), nil))),
      s(:send,
        s(:const, nil, :Tk), :callback_break))))

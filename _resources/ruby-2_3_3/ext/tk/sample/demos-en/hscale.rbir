s(:begin,
  s(:send, nil, :require,
    s(:str, "tkcanvas")),
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$hscale_demo)),
      s(:gvar, :$hscale_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$hscale_demo), :destroy),
      s(:gvasgn, :$hscale_demo,
        s(:nil))), nil),
  s(:gvasgn, :$hscale_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Horizontal Scale Demonstration")),
        s(:send, nil, :iconname,
          s(:str, "hscale"))))),
  s(:send, nil, :positionWindow,
    s(:gvar, :$hscale_demo)),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$hscale_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:lvasgn, :msg,
    s(:block,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame)),
      s(:args),
      s(:begin,
        s(:send, nil, :font,
          s(:gvar, :$font)),
        s(:send, nil, :wraplength,
          s(:str, "3.5i")),
        s(:send, nil, :justify,
          s(:str, "left")),
        s(:send, nil, :text,
          s(:str, "An arrow and a horizontal scale are displayed below.  If you click or drag mouse button 1 in the scale, you can change the length of the arrow."))))),
  s(:send,
    s(:lvar, :msg), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "Dismiss")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:begin,
                    s(:lvasgn, :tmppath,
                      s(:gvar, :$hscale_demo)),
                    s(:gvasgn, :$hscale_demo,
                      s(:nil)),
                    s(:send,
                      s(:lvar, :tmppath), :destroy)))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))),
        s(:send,
          s(:block,
            s(:send,
              s(:const, nil, :TkButton), :new,
              s(:lvar, :frame)),
            s(:args),
            s(:begin,
              s(:send, nil, :text,
                s(:str, "Show Code")),
              s(:send, nil, :command,
                s(:block,
                  s(:send, nil, :proc),
                  s(:args),
                  s(:send, nil, :showCode,
                    s(:str, "hscale")))))), :pack,
          s(:hash,
            s(:pair,
              s(:str, "side"),
              s(:str, "left")),
            s(:pair,
              s(:str, "expand"),
              s(:str, "yes")))))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "bottom")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")),
      s(:pair,
        s(:str, "pady"),
        s(:str, "2m")))),
  s(:def, :setWidth,
    s(:args,
      s(:arg, :w),
      s(:arg, :width)),
    s(:begin,
      s(:lvasgn, :width,
        s(:send,
          s(:lvar, :width), :+,
          s(:int, 21))),
      s(:lvasgn, :x2,
        s(:send,
          s(:lvar, :width), :-,
          s(:int, 30))),
      s(:if,
        s(:send,
          s(:lvar, :x2), :<,
          s(:int, 21)),
        s(:lvasgn, :x2,
          s(:int, 21)), nil),
      s(:send,
        s(:lvar, :w), :coords,
        s(:str, "poly"),
        s(:int, 20),
        s(:int, 15),
        s(:int, 20),
        s(:int, 35),
        s(:lvar, :x2),
        s(:int, 35),
        s(:lvar, :x2),
        s(:int, 45),
        s(:lvar, :width),
        s(:int, 25),
        s(:lvar, :x2),
        s(:int, 5),
        s(:lvar, :x2),
        s(:int, 15),
        s(:int, 20),
        s(:int, 15)),
      s(:send,
        s(:lvar, :w), :coords,
        s(:str, "line"),
        s(:int, 20),
        s(:int, 15),
        s(:int, 20),
        s(:int, 35),
        s(:lvar, :x2),
        s(:int, 35),
        s(:lvar, :x2),
        s(:int, 45),
        s(:lvar, :width),
        s(:int, 25),
        s(:lvar, :x2),
        s(:int, 5),
        s(:lvar, :x2),
        s(:int, 15),
        s(:int, 20),
        s(:int, 15)))),
  s(:send,
    s(:block,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:lvar, :base_frame)),
      s(:args,
        s(:arg, :frame)),
      s(:begin,
        s(:lvasgn, :canvas,
          s(:send,
            s(:block,
              s(:send,
                s(:const, nil, :TkCanvas), :new,
                s(:lvar, :frame)),
              s(:args,
                s(:arg, :c)),
              s(:begin,
                s(:send, nil, :width,
                  s(:int, 50)),
                s(:send, nil, :height,
                  s(:int, 50)),
                s(:send, nil, :bd,
                  s(:int, 0)),
                s(:send, nil, :highlightthickness,
                  s(:int, 0)),
                s(:block,
                  s(:send,
                    s(:const, nil, :TkcPolygon), :new,
                    s(:lvar, :c),
                    s(:str, "0"),
                    s(:str, "0"),
                    s(:str, "1"),
                    s(:str, "1"),
                    s(:str, "2"),
                    s(:str, "2")),
                  s(:args),
                  s(:begin,
                    s(:send, nil, :fill,
                      s(:str, "DeepSkyBlue")),
                    s(:send, nil, :tags,
                      s(:str, "poly")))),
                s(:block,
                  s(:send,
                    s(:const, nil, :TkcLine), :new,
                    s(:lvar, :c),
                    s(:str, "0"),
                    s(:str, "0"),
                    s(:str, "1"),
                    s(:str, "1"),
                    s(:str, "2"),
                    s(:str, "2"),
                    s(:str, "0"),
                    s(:str, "0")),
                  s(:args),
                  s(:begin,
                    s(:send, nil, :fill,
                      s(:str, "black")),
                    s(:send, nil, :tags,
                      s(:str, "line")))))), :pack,
            s(:hash,
              s(:pair,
                s(:str, "side"),
                s(:str, "top")),
              s(:pair,
                s(:str, "expand"),
                s(:str, "yes")),
              s(:pair,
                s(:str, "anchor"),
                s(:str, "s")),
              s(:pair,
                s(:str, "fill"),
                s(:str, "x")),
              s(:pair,
                s(:str, "padx"),
                s(:str, "15"))))),
        s(:lvasgn, :scale,
          s(:send,
            s(:block,
              s(:send,
                s(:const, nil, :TkScale), :new,
                s(:lvar, :frame)),
              s(:args),
              s(:begin,
                s(:send, nil, :orient,
                  s(:str, "horizontal")),
                s(:send, nil, :length,
                  s(:int, 284)),
                s(:send, nil, :from,
                  s(:int, 0)),
                s(:send, nil, :to,
                  s(:int, 250)),
                s(:send, nil, :command,
                  s(:block,
                    s(:send, nil, :proc),
                    s(:args,
                      s(:arg, :value)),
                    s(:send, nil, :setWidth,
                      s(:lvar, :canvas),
                      s(:lvar, :value)))),
                s(:send, nil, :tickinterval,
                  s(:int, 50)))), :pack,
            s(:hash,
              s(:pair,
                s(:str, "side"),
                s(:str, "bottom")),
              s(:pair,
                s(:str, "expand"),
                s(:str, "yes")),
              s(:pair,
                s(:str, "anchor"),
                s(:str, "n"))))),
        s(:send,
          s(:lvar, :scale), :set,
          s(:int, 75)))), :pack,
    s(:hash,
      s(:pair,
        s(:str, "side"),
        s(:str, "top")),
      s(:pair,
        s(:str, "fill"),
        s(:str, "x")))))

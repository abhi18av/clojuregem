s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$combo_demo)),
      s(:gvar, :$combo_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$combo_demo), :destroy),
      s(:gvasgn, :$combo_demo,
        s(:nil))), nil),
  s(:gvasgn, :$combo_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Combobox Demonstration")),
        s(:send, nil, :iconname,
          s(:str, "combo")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$combo_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:send,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Label), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :font),
          s(:gvar, :$font)),
        s(:pair,
          s(:sym, :wraplength),
          s(:str, "5i")),
        s(:pair,
          s(:sym, :justify),
          s(:sym, :left)),
        s(:pair,
          s(:sym, :text),
          s(:str, "Three different combo-boxes are displayed below. \nYou can add characters to the first \none by pointing, clicking and typing, just as with an entry; pressing \nReturn will cause the current value to be added to the list that is \nselectable from the drop-down list, and you can choose other values \nby pressing the Down key, using the arrow keys to pick another one, \nand pressing Return again. The second combo-box is fixed to a \nparticular value, and cannot be modified at all. The third one only \nallows you to select values from its drop-down list of Australian \ncities.\n")))), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :side),
        s(:sym, :top)),
      s(:pair,
        s(:sym, :fill),
        s(:sym, :x)))),
  s(:lvasgn, :firstValue,
    s(:send,
      s(:const, nil, :TkVariable), :new)),
  s(:lvasgn, :secondValue,
    s(:send,
      s(:const, nil, :TkVariable), :new)),
  s(:lvasgn, :ozCity,
    s(:send,
      s(:const, nil, :TkVariable), :new)),
  s(:block,
    s(:send,
      s(:const,
        s(:const, nil, :Ttk), :Frame), :new,
      s(:lvar, :base_frame)),
    s(:args,
      s(:arg, :frame)),
    s(:begin,
      s(:lvasgn, :sep,
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Separator), :new,
          s(:lvar, :frame))),
      s(:send,
        s(:const, nil, :Tk), :grid,
        s(:lvar, :sep),
        s(:hash,
          s(:pair,
            s(:sym, :columnspan),
            s(:int, 4)),
          s(:pair,
            s(:sym, :row),
            s(:int, 0)),
          s(:pair,
            s(:sym, :sticky),
            s(:str, "ew")),
          s(:pair,
            s(:sym, :pady),
            s(:int, 2)))),
      s(:send, nil, :TkGrid,
        s(:str, "x"),
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Button), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "See Variables")),
            s(:pair,
              s(:sym, :image),
              s(:send,
                s(:gvar, :$image), :[],
                s(:str, "view"))),
            s(:pair,
              s(:sym, :compound),
              s(:sym, :left)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :showVars,
                  s(:lvar, :base_frame),
                  s(:array,
                    s(:str, "firstVariable"),
                    s(:lvar, :firstValue)),
                  s(:array,
                    s(:str, "secondVariable"),
                    s(:lvar, :secondValue)),
                  s(:array,
                    s(:str, "ozCity"),
                    s(:lvar, :ozCity))))))),
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Button), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "See Code")),
            s(:pair,
              s(:sym, :image),
              s(:send,
                s(:gvar, :$image), :[],
                s(:str, "view"))),
            s(:pair,
              s(:sym, :compound),
              s(:sym, :left)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :showCode,
                  s(:str, "combo")))))),
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Button), :new,
          s(:lvar, :frame),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "Dismiss")),
            s(:pair,
              s(:sym, :image),
              s(:send,
                s(:gvar, :$image), :[],
                s(:str, "delete"))),
            s(:pair,
              s(:sym, :compound),
              s(:sym, :left)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:begin,
                  s(:send,
                    s(:gvar, :$combo_demo), :destroy),
                  s(:gvasgn, :$combo_demo,
                    s(:nil))))))),
        s(:hash,
          s(:pair,
            s(:sym, :padx),
            s(:int, 4)),
          s(:pair,
            s(:sym, :pady),
            s(:int, 4)))),
      s(:send, nil, :grid_columnconfigure,
        s(:int, 0),
        s(:hash,
          s(:pair,
            s(:sym, :weight),
            s(:int, 1)))),
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :bottom)),
          s(:pair,
            s(:sym, :fill),
            s(:sym, :x)))))),
  s(:lvasgn, :frame,
    s(:send,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :Frame), :new,
        s(:lvar, :base_frame)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:lvasgn, :australianCities,
    s(:array,
      s(:str, "Canberra"),
      s(:str, "Sydney"),
      s(:str, "Melbourne"),
      s(:str, "Perth"),
      s(:str, "Adelaide"),
      s(:str, "Brisbane"),
      s(:str, "Hobart"),
      s(:str, "Darwin"),
      s(:str, "Alice Springs"))),
  s(:send,
    s(:lvar, :secondValue), :value=,
    s(:str, "unchangeable")),
  s(:send,
    s(:lvar, :ozCity), :value=,
    s(:str, "Sydney")),
  s(:send,
    s(:const, nil, :Tk), :pack,
    s(:block,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :Labelframe), :new,
        s(:lvar, :frame),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "Fully Editable")))),
      s(:args,
        s(:arg, :f)),
      s(:send,
        s(:block,
          s(:send,
            s(:const,
              s(:const, nil, :Ttk), :Combobox), :new,
            s(:lvar, :f),
            s(:hash,
              s(:pair,
                s(:sym, :textvariable),
                s(:lvar, :firstValue)))),
          s(:args,
            s(:arg, :b)),
          s(:block,
            s(:send,
              s(:lvar, :b), :bind,
              s(:str, "Return"),
              s(:str, "%W")),
            s(:args,
              s(:arg, :w)),
            s(:if,
              s(:send,
                s(:send,
                  s(:lvar, :w), :values), :include?,
                s(:send,
                  s(:lvar, :w), :value)), nil,
              s(:op_asgn,
                s(:send,
                  s(:lvar, :w), :values), :<<,
                s(:send,
                  s(:lvar, :w), :value))))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :pady),
            s(:int, 5)),
          s(:pair,
            s(:sym, :padx),
            s(:int, 10))))),
    s(:block,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :LabelFrame), :new,
        s(:lvar, :frame),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "Disabled")))),
      s(:args,
        s(:arg, :f)),
      s(:send,
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Combobox), :new,
          s(:lvar, :f),
          s(:hash,
            s(:pair,
              s(:sym, :textvariable),
              s(:lvar, :secondValue)),
            s(:pair,
              s(:sym, :state),
              s(:sym, :disabled)))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :pady),
            s(:int, 5)),
          s(:pair,
            s(:sym, :padx),
            s(:int, 10))))),
    s(:block,
      s(:send,
        s(:const,
          s(:const, nil, :Ttk), :LabelFrame), :new,
        s(:lvar, :frame),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "Defined List Only")))),
      s(:args,
        s(:arg, :f)),
      s(:send,
        s(:send,
          s(:const,
            s(:const, nil, :Ttk), :Combobox), :new,
          s(:lvar, :f),
          s(:hash,
            s(:pair,
              s(:sym, :textvariable),
              s(:lvar, :ozCity)),
            s(:pair,
              s(:sym, :state),
              s(:sym, :readonly)),
            s(:pair,
              s(:sym, :values),
              s(:lvar, :australianCities)))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :pady),
            s(:int, 5)),
          s(:pair,
            s(:sym, :padx),
            s(:int, 10))))),
    s(:hash,
      s(:pair,
        s(:sym, :side),
        s(:sym, :top)),
      s(:pair,
        s(:sym, :pady),
        s(:int, 5)),
      s(:pair,
        s(:sym, :padx),
        s(:int, 10)))))

s(:begin,
  s(:if,
    s(:and,
      s(:defined?,
        s(:gvar, :$unicodeout_demo)),
      s(:gvar, :$unicodeout_demo)),
    s(:begin,
      s(:send,
        s(:gvar, :$unicodeout_demo), :destroy),
      s(:gvasgn, :$unicodeout_demo,
        s(:nil))), nil),
  s(:gvasgn, :$unicodeout_demo,
    s(:block,
      s(:send,
        s(:const, nil, :TkToplevel), :new),
      s(:args,
        s(:arg, :w)),
      s(:begin,
        s(:send, nil, :title,
          s(:str, "Unicode Label Demonstration")),
        s(:send, nil, :iconname,
          s(:str, "unicodeout")),
        s(:send, nil, :positionWindow,
          s(:lvar, :w))))),
  s(:lvasgn, :base_frame,
    s(:send,
      s(:send,
        s(:const, nil, :TkFrame), :new,
        s(:gvar, :$unicodeout_demo)), :pack,
      s(:hash,
        s(:pair,
          s(:sym, :fill),
          s(:sym, :both)),
        s(:pair,
          s(:sym, :expand),
          s(:true))))),
  s(:send,
    s(:send,
      s(:const, nil, :TkLabel), :new,
      s(:lvar, :base_frame),
      s(:hash,
        s(:pair,
          s(:sym, :font),
          s(:gvar, :$font)),
        s(:pair,
          s(:sym, :wraplength),
          s(:str, "5.4i")),
        s(:pair,
          s(:sym, :justify),
          s(:sym, :left)),
        s(:pair,
          s(:sym, :text),
          s(:dstr,
            s(:str, "This is a sample of Tk's support for languages that use non-Western \ncharacter sets.  However, what you will actually see below depends \nlargely on what character sets you have installed, and what you see \nfor characters that are not present varies greatly between platforms as well. \nPlease try to click the 'See Code' button, \nand click the 'Rerun Demo' button after editing \n(the source file is not changed) \nthe definition of @@font on the Unicodeout_SampleFrame class.\n"),
            s(:str, "The strings are written in Tcl using UNICODE characters \nusing the \\uXXXX escape so as to do so in a portable fashion.\n"),
            s(:str, "\n"),
            s(:str, "ATTENTION:\n"),
            s(:str, "The strings are converted to the encoded string objects \n(completed to rewrite Tcl's escapes) by Tk::UTF8_String method. \nAnd the Tk::UTF8_String objects are passed to the label widgets.\n"))))), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :side),
        s(:sym, :top)))),
  s(:block,
    s(:send,
      s(:const, nil, :TkFrame), :new,
      s(:lvar, :base_frame)),
    s(:args,
      s(:arg, :f)),
    s(:begin,
      s(:send, nil, :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :bottom)),
          s(:pair,
            s(:sym, :fill),
            s(:sym, :x)),
          s(:pair,
            s(:sym, :pady),
            s(:str, "2m")))),
      s(:send,
        s(:send,
          s(:const, nil, :TkButton), :new,
          s(:lvar, :f),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "Dismiss")),
            s(:pair,
              s(:sym, :width),
              s(:int, 15)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:begin,
                  s(:send,
                    s(:gvar, :$unicodeout_demo), :destroy),
                  s(:gvasgn, :$unicodeout_demo,
                    s(:nil))))))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :left)),
          s(:pair,
            s(:sym, :expand),
            s(:true)))),
      s(:send,
        s(:send,
          s(:const, nil, :TkButton), :new,
          s(:lvar, :f),
          s(:hash,
            s(:pair,
              s(:sym, :text),
              s(:str, "See Code")),
            s(:pair,
              s(:sym, :width),
              s(:int, 15)),
            s(:pair,
              s(:sym, :command),
              s(:block,
                s(:send, nil, :proc),
                s(:args),
                s(:send, nil, :showCode,
                  s(:str, "unicodeout")))))), :pack,
        s(:hash,
          s(:pair,
            s(:sym, :side),
            s(:sym, :left)),
          s(:pair,
            s(:sym, :expand),
            s(:true)))))),
  s(:lvasgn, :wait_msg,
    s(:send,
      s(:send,
        s(:const, nil, :TkLabel), :new,
        s(:lvar, :base_frame),
        s(:hash,
          s(:pair,
            s(:sym, :text),
            s(:str, "Please wait while loading fonts...")),
          s(:pair,
            s(:sym, :font),
            s(:str, "Helvetica 12 italic")))), :pack)),
  s(:class,
    s(:const, nil, :Unicodeout_SampleFrame),
    s(:const, nil, :TkFrame),
    s(:begin,
      s(:cvasgn, :@@font,
        s(:gvar, :$font)),
      s(:def, :initialize,
        s(:args,
          s(:arg, :base)),
        s(:begin,
          s(:super,
            s(:lvar, :base)),
          s(:send, nil, :grid_columnconfig,
            s(:int, 1),
            s(:hash,
              s(:pair,
                s(:sym, :weight),
                s(:int, 1)))))),
      s(:def, :add_sample,
        s(:args,
          s(:arg, :lang),
          s(:restarg, :args)),
        s(:begin,
          s(:lvasgn, :sample_txt,
            s(:send,
              s(:const, nil, :Tk), :UTF8_String,
              s(:send,
                s(:lvar, :args), :join,
                s(:str, "")))),
          s(:lvasgn, :l,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:self),
              s(:hash,
                s(:pair,
                  s(:sym, :font),
                  s(:cvar, :@@font)),
                s(:pair,
                  s(:sym, :text),
                  s(:send,
                    s(:lvar, :lang), :+,
                    s(:str, ":"))),
                s(:pair,
                  s(:sym, :anchor),
                  s(:sym, :nw)),
                s(:pair,
                  s(:sym, :pady),
                  s(:int, 0))))),
          s(:lvasgn, :s,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:self),
              s(:hash,
                s(:pair,
                  s(:sym, :font),
                  s(:send,
                    s(:const, nil, :TkFont), :new,
                    s(:cvar, :@@font))),
                s(:pair,
                  s(:sym, :text),
                  s(:lvar, :sample_txt)),
                s(:pair,
                  s(:sym, :anchor),
                  s(:sym, :nw)),
                s(:pair,
                  s(:sym, :width),
                  s(:int, 30)),
                s(:pair,
                  s(:sym, :pady),
                  s(:int, 0))))),
          s(:send,
            s(:const, nil, :Tk), :grid,
            s(:lvar, :l),
            s(:lvar, :s),
            s(:hash,
              s(:pair,
                s(:sym, :sticky),
                s(:sym, :ew)),
              s(:pair,
                s(:sym, :pady),
                s(:int, 0)))),
          s(:send,
            s(:lvar, :l), :grid_config,
            s(:sym, :padx),
            s(:str, "1m")))))),
  s(:lvasgn, :f,
    s(:send,
      s(:const, nil, :Unicodeout_SampleFrame), :new,
      s(:lvar, :base_frame))),
  s(:send,
    s(:lvar, :f), :pack,
    s(:hash,
      s(:pair,
        s(:sym, :expand),
        s(:true)),
      s(:pair,
        s(:sym, :fill),
        s(:sym, :both)),
      s(:pair,
        s(:sym, :padx),
        s(:str, "2m")),
      s(:pair,
        s(:sym, :pady),
        s(:str, "1m")))),
  s(:lvasgn, :oldCursor,
    s(:send,
      s(:gvar, :$unicodeout_demo), :cursor)),
  s(:send,
    s(:gvar, :$unicodeout_demo), :cursor,
    s(:str, "watch")),
  s(:send,
    s(:const, nil, :Tk), :update),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Arabic"),
    s(:str, "\\uFE94\\uFEF4\\uFE91\\uFEAE\\uFECC\\uFEDF\\uFE8D\\uFE94"),
    s(:str, "\\uFEE4\\uFEE0\\uFEDC\\uFEDF\\uFE8D")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Trad. Chinese"),
    s(:str, "\\u4E2D\\u570B\\u7684\\u6F22\\u5B57")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Simpl. Chinese"),
    s(:str, "\\u6C49\\u8BED")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Greek"),
    s(:str, "\\u0395\\u03BB\\u03BB\\u03B7\\u03BD\\u03B9\\u03BA\\u03AE "),
    s(:str, "\\u03B3\\u03BB\\u03CE\\u03C3\\u03C3\\u03B1")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Hebrew"),
    s(:str, "\\u05DD\\u05D9\\u05DC\\u05E9\\u05D5\\u05E8\\u05D9 "),
    s(:str, "\\u05DC\\u05D9\\u05D0\\u05E8\\u05E9\\u05D9")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Japanese"),
    s(:str, "\\u65E5\\u672C\\u8A9E\\u306E\\u3072\\u3089\\u304C\\u306A, "),
    s(:str, "\\u6F22\\u5B57\\u3068\\u30AB\\u30BF\\u30AB\\u30CA")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Korean"),
    s(:str, "\\uB300\\uD55C\\uBBFC\\uAD6D\\uC758 \\uD55C\\uAE00")),
  s(:send,
    s(:lvar, :f), :add_sample,
    s(:str, "Russian"),
    s(:str, "\\u0420\\u0443\\u0441\\u0441\\u043A\\u0438\\u0439 "),
    s(:str, "\\u044F\\u0437\\u044B\\u043A")),
  s(:send,
    s(:lvar, :wait_msg), :destroy),
  s(:send,
    s(:gvar, :$unicodeout_demo), :cursor,
    s(:lvar, :oldCursor)))

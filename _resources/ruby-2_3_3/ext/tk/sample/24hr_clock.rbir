s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:class,
    s(:const, nil, :Clock), nil,
    s(:begin,
      s(:def, :initialize,
        s(:args,
          s(:optarg, :clock24,
            s(:true))),
        s(:begin,
          s(:ivasgn, :@clock,
            s(:if,
              s(:begin,
                s(:lvar, :clock24)),
              s(:int, 24),
              s(:int, 12))),
          s(:ivasgn, :@size,
            s(:int, 200)),
          s(:ivasgn, :@cdot_size,
            s(:int, 5)),
          s(:ivasgn, :@cdot_color,
            s(:str, "black")),
          s(:ivasgn, :@hour_hand_color,
            s(:str, "black")),
          s(:ivasgn, :@minute_hand_color,
            s(:str, "gray25")),
          s(:ivasgn, :@second_hand_color,
            s(:str, "gray50")),
          s(:ivasgn, :@mark_font,
            s(:str, "Helvetica -14")),
          s(:ivasgn, :@mark_width,
            s(:int, 3)),
          s(:ivasgn, :@mark_color,
            s(:str, "black")),
          s(:ivasgn, :@submark_color,
            s(:str, "gray50")),
          s(:ivasgn, :@c,
            s(:send,
              s(:send,
                s(:const, nil, :TkCanvas), :new,
                s(:hash,
                  s(:pair,
                    s(:sym, :width),
                    s(:send,
                      s(:int, 2), :*,
                      s(:ivar, :@size))),
                  s(:pair,
                    s(:sym, :height),
                    s(:send,
                      s(:int, 2), :*,
                      s(:ivar, :@size))),
                  s(:pair,
                    s(:sym, :scrollregion),
                    s(:array,
                      s(:send,
                        s(:ivar, :@size), :-@),
                      s(:send,
                        s(:ivar, :@size), :-@),
                      s(:ivar, :@size),
                      s(:ivar, :@size))))), :pack,
              s(:hash,
                s(:pair,
                  s(:sym, :fill),
                  s(:sym, :both)),
                s(:pair,
                  s(:sym, :expand),
                  s(:true))))),
          s(:ivasgn, :@tag,
            s(:send,
              s(:const, nil, :TkcTag), :new,
              s(:ivar, :@c))),
          s(:ivasgn, :@hand_tag,
            s(:send,
              s(:const, nil, :TkcTag), :new,
              s(:ivar, :@c))),
          s(:ivasgn, :@circle_coords,
            s(:array,
              s(:array,
                s(:send,
                  s(:float, -0.9), :*,
                  s(:ivar, :@size)),
                s(:send,
                  s(:float, -0.9), :*,
                  s(:ivar, :@size))),
              s(:array,
                s(:send,
                  s(:float, 0.9), :*,
                  s(:ivar, :@size)),
                s(:send,
                  s(:float, 0.9), :*,
                  s(:ivar, :@size))))),
          s(:ivasgn, :@oval,
            s(:send,
              s(:const, nil, :TkcOval), :new,
              s(:ivar, :@c),
              s(:ivar, :@circle_coords),
              s(:hash,
                s(:pair,
                  s(:sym, :fill),
                  s(:str, "white")),
                s(:pair,
                  s(:sym, :tags),
                  s(:array,
                    s(:ivar, :@tag)))))),
          s(:lvasgn, :f,
            s(:send,
              s(:send,
                s(:const, nil, :TkFrame), :new), :pack)),
          s(:send,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:lvar, :f),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:str, "CURRENT:")))), :pack,
            s(:hash,
              s(:pair,
                s(:sym, :side),
                s(:sym, :left)))),
          s(:ivasgn, :@now,
            s(:send,
              s(:send,
                s(:const, nil, :TkLabel), :new,
                s(:lvar, :f),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:str, "00:00:00")))), :pack,
              s(:hash,
                s(:pair,
                  s(:sym, :side),
                  s(:sym, :left)),
                s(:pair,
                  s(:sym, :padx),
                  s(:int, 2))))),
          s(:send,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:lvar, :f),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:str, "  ")))), :pack,
            s(:hash,
              s(:pair,
                s(:sym, :side),
                s(:sym, :left)))),
          s(:send,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:lvar, :f),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:str, "  ")))), :pack,
            s(:hash,
              s(:pair,
                s(:sym, :side),
                s(:sym, :right)))),
          s(:ivasgn, :@l,
            s(:send,
              s(:send,
                s(:const, nil, :TkLabel), :new,
                s(:lvar, :f),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:str, "00:00")))), :pack,
              s(:hash,
                s(:pair,
                  s(:sym, :side),
                  s(:sym, :right)),
                s(:pair,
                  s(:sym, :padx),
                  s(:int, 2))))),
          s(:send,
            s(:send,
              s(:const, nil, :TkLabel), :new,
              s(:lvar, :f),
              s(:hash,
                s(:pair,
                  s(:sym, :text),
                  s(:str, "MOUSE-POINTER:")))), :pack,
            s(:hash,
              s(:pair,
                s(:sym, :side),
                s(:sym, :right)))),
          s(:lvasgn, :cmd,
            s(:block,
              s(:send, nil, :proc),
              s(:args,
                s(:arg, :x),
                s(:arg, :y)),
              s(:send,
                s(:ivar, :@l), :text=,
                s(:send,
                  s(:str, "%02d:%02d"), :%,
                  s(:send, nil, :coords_to_time,
                    s(:send,
                      s(:ivar, :@c), :canvasx,
                      s(:lvar, :x)),
                    s(:send,
                      s(:ivar, :@c), :canvasy,
                      s(:lvar, :y))))))),
          s(:send,
            s(:ivar, :@c), :bind,
            s(:str, "Motion"),
            s(:lvar, :cmd),
            s(:str, "%x %y")),
          s(:send,
            s(:ivar, :@tag), :bind,
            s(:str, "Motion"),
            s(:lvar, :cmd),
            s(:str, "%x %y")),
          s(:send, nil, :_create_hands),
          s(:send, nil, :_create_marks),
          s(:lvasgn, :timer_proc,
            s(:block,
              s(:send, nil, :proc),
              s(:args),
              s(:begin,
                s(:lvasgn, :t,
                  s(:send,
                    s(:const, nil, :Time), :now)),
                s(:send,
                  s(:ivar, :@now), :text=,
                  s(:send,
                    s(:str, "%02d:%02d:%02d"), :%,
                    s(:array,
                      s(:send,
                        s(:lvar, :t), :hour),
                      s(:send,
                        s(:lvar, :t), :min),
                      s(:send,
                        s(:lvar, :t), :sec)))),
                s(:send, nil, :set_hands,
                  s(:send,
                    s(:lvar, :t), :hour),
                  s(:send,
                    s(:lvar, :t), :min),
                  s(:send,
                    s(:lvar, :t), :sec))))),
          s(:send,
            s(:lvar, :timer_proc), :call),
          s(:ivasgn, :@timer,
            s(:send,
              s(:const, nil, :TkRTTimer), :start,
              s(:int, 100),
              s(:int, -1),
              s(:lvar, :timer_proc))))),
      s(:def, :_create_marks,
        s(:args),
        s(:begin,
          s(:ivasgn, :@mark_tag,
            s(:send,
              s(:const, nil, :TkcTag), :new,
              s(:ivar, :@c))),
          s(:send,
            s(:const, nil, :TkcLine), :new,
            s(:ivar, :@c),
            s(:int, 0),
            s(:send,
              s(:float, -0.9), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:send,
              s(:float, -0.85), :*,
              s(:ivar, :@size)),
            s(:hash,
              s(:pair,
                s(:sym, :tags),
                s(:array,
                  s(:ivar, :@tag),
                  s(:ivar, :@mark_tag))),
              s(:pair,
                s(:sym, :width),
                s(:ivar, :@mark_width)),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcLine), :new,
            s(:ivar, :@c),
            s(:send,
              s(:float, 0.9), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:send,
              s(:float, 0.85), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:hash,
              s(:pair,
                s(:sym, :tags),
                s(:array,
                  s(:ivar, :@tag),
                  s(:ivar, :@mark_tag))),
              s(:pair,
                s(:sym, :width),
                s(:ivar, :@mark_width)),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcLine), :new,
            s(:ivar, :@c),
            s(:int, 0),
            s(:send,
              s(:float, 0.9), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:send,
              s(:float, 0.85), :*,
              s(:ivar, :@size)),
            s(:hash,
              s(:pair,
                s(:sym, :tags),
                s(:array,
                  s(:ivar, :@tag),
                  s(:ivar, :@mark_tag))),
              s(:pair,
                s(:sym, :width),
                s(:ivar, :@mark_width)),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcLine), :new,
            s(:ivar, :@c),
            s(:send,
              s(:float, -0.9), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:send,
              s(:float, -0.85), :*,
              s(:ivar, :@size)),
            s(:int, 0),
            s(:hash,
              s(:pair,
                s(:sym, :tags),
                s(:array,
                  s(:ivar, :@tag),
                  s(:ivar, :@mark_tag))),
              s(:pair,
                s(:sym, :width),
                s(:ivar, :@mark_width)),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcText), :new,
            s(:ivar, :@c),
            s(:array,
              s(:int, 0),
              s(:send,
                s(:float, -0.92), :*,
                s(:ivar, :@size))),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:int, 0)),
              s(:pair,
                s(:sym, :anchor),
                s(:str, "s")),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcText), :new,
            s(:ivar, :@c),
            s(:array,
              s(:send,
                s(:float, 0.92), :*,
                s(:ivar, :@size)),
              s(:int, 0)),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:send,
                  s(:ivar, :@clock), :div,
                  s(:int, 4))),
              s(:pair,
                s(:sym, :anchor),
                s(:str, "w")),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcText), :new,
            s(:ivar, :@c),
            s(:array,
              s(:int, 0),
              s(:send,
                s(:float, 0.92), :*,
                s(:ivar, :@size))),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:send,
                  s(:ivar, :@clock), :div,
                  s(:int, 2))),
              s(:pair,
                s(:sym, :anchor),
                s(:str, "n")),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:send,
            s(:const, nil, :TkcText), :new,
            s(:ivar, :@c),
            s(:array,
              s(:send,
                s(:float, -0.92), :*,
                s(:ivar, :@size)),
              s(:int, 0)),
            s(:hash,
              s(:pair,
                s(:sym, :text),
                s(:send,
                  s(:send,
                    s(:ivar, :@clock), :div,
                    s(:int, 4)), :*,
                  s(:int, 3))),
              s(:pair,
                s(:sym, :anchor),
                s(:str, "e")),
              s(:pair,
                s(:sym, :fill),
                s(:ivar, :@mark_color)))),
          s(:block,
            s(:send,
              s(:array,
                s(:float, 30.0),
                s(:float, 60.0)), :each),
            s(:args,
              s(:arg, :angle)),
            s(:begin,
              s(:lvasgn, :rad,
                s(:send,
                  s(:send,
                    s(:const,
                      s(:const, nil, :Math), :PI), :*,
                    s(:lvar, :angle)), :/,
                  s(:float, 180.0))),
              s(:lvasgn, :x_base,
                s(:send,
                  s(:ivar, :@size), :*,
                  s(:send,
                    s(:const, nil, :Math), :sin,
                    s(:lvar, :rad)))),
              s(:lvasgn, :y_base,
                s(:send,
                  s(:ivar, :@size), :*,
                  s(:send,
                    s(:const, nil, :Math), :cos,
                    s(:lvar, :rad)))),
              s(:lvasgn, :x1,
                s(:send,
                  s(:float, 0.9), :*,
                  s(:lvar, :x_base))),
              s(:lvasgn, :y1,
                s(:send,
                  s(:float, 0.9), :*,
                  s(:lvar, :y_base))),
              s(:lvasgn, :x2,
                s(:send,
                  s(:float, 0.85), :*,
                  s(:lvar, :x_base))),
              s(:lvasgn, :y2,
                s(:send,
                  s(:float, 0.85), :*,
                  s(:lvar, :y_base))),
              s(:send,
                s(:const, nil, :TkcLine), :new,
                s(:ivar, :@c),
                s(:lvar, :x1),
                s(:lvar, :y1),
                s(:lvar, :x2),
                s(:lvar, :y2),
                s(:hash,
                  s(:pair,
                    s(:sym, :tags),
                    s(:array,
                      s(:ivar, :@tag),
                      s(:ivar, :@mark_tag))),
                  s(:pair,
                    s(:sym, :width),
                    s(:ivar, :@mark_width)),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcLine), :new,
                s(:ivar, :@c),
                s(:lvar, :x1),
                s(:send,
                  s(:lvar, :y1), :-@),
                s(:lvar, :x2),
                s(:send,
                  s(:lvar, :y2), :-@),
                s(:hash,
                  s(:pair,
                    s(:sym, :tags),
                    s(:array,
                      s(:ivar, :@tag),
                      s(:ivar, :@mark_tag))),
                  s(:pair,
                    s(:sym, :width),
                    s(:ivar, :@mark_width)),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcLine), :new,
                s(:ivar, :@c),
                s(:send,
                  s(:lvar, :x1), :-@),
                s(:lvar, :y1),
                s(:send,
                  s(:lvar, :x2), :-@),
                s(:lvar, :y2),
                s(:hash,
                  s(:pair,
                    s(:sym, :tags),
                    s(:array,
                      s(:ivar, :@tag),
                      s(:ivar, :@mark_tag))),
                  s(:pair,
                    s(:sym, :width),
                    s(:ivar, :@mark_width)),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcLine), :new,
                s(:ivar, :@c),
                s(:send,
                  s(:lvar, :x1), :-@),
                s(:send,
                  s(:lvar, :y1), :-@),
                s(:send,
                  s(:lvar, :x2), :-@),
                s(:send,
                  s(:lvar, :y2), :-@),
                s(:hash,
                  s(:pair,
                    s(:sym, :tags),
                    s(:array,
                      s(:ivar, :@tag),
                      s(:ivar, :@mark_tag))),
                  s(:pair,
                    s(:sym, :width),
                    s(:ivar, :@mark_width)),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:lvasgn, :x3,
                s(:send,
                  s(:float, 0.92), :*,
                  s(:lvar, :x_base))),
              s(:lvasgn, :y3,
                s(:send,
                  s(:float, 0.92), :*,
                  s(:lvar, :y_base))),
              s(:if,
                s(:send,
                  s(:ivar, :@clock), :==,
                  s(:int, 24)),
                s(:lvasgn, :dh,
                  s(:send,
                    s(:send,
                      s(:lvar, :angle), :to_i), :/,
                    s(:int, 15))),
                s(:lvasgn, :dh,
                  s(:send,
                    s(:send,
                      s(:lvar, :angle), :to_i), :/,
                    s(:int, 30)))),
              s(:send,
                s(:const, nil, :TkcText), :new,
                s(:ivar, :@c),
                s(:lvar, :x3),
                s(:send,
                  s(:lvar, :y3), :-@),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:lvar, :dh)),
                  s(:pair,
                    s(:sym, :anchor),
                    s(:str, "sw")),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcText), :new,
                s(:ivar, :@c),
                s(:lvar, :x3),
                s(:lvar, :y3),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:send,
                      s(:send,
                        s(:ivar, :@clock), :div,
                        s(:int, 2)), :-,
                      s(:lvar, :dh))),
                  s(:pair,
                    s(:sym, :anchor),
                    s(:str, "nw")),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcText), :new,
                s(:ivar, :@c),
                s(:send,
                  s(:lvar, :x3), :-@),
                s(:lvar, :y3),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:send,
                      s(:send,
                        s(:ivar, :@clock), :div,
                        s(:int, 2)), :+,
                      s(:lvar, :dh))),
                  s(:pair,
                    s(:sym, :anchor),
                    s(:str, "ne")),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))),
              s(:send,
                s(:const, nil, :TkcText), :new,
                s(:ivar, :@c),
                s(:send,
                  s(:lvar, :x3), :-@),
                s(:send,
                  s(:lvar, :y3), :-@),
                s(:hash,
                  s(:pair,
                    s(:sym, :text),
                    s(:send,
                      s(:ivar, :@clock), :-,
                      s(:lvar, :dh))),
                  s(:pair,
                    s(:sym, :anchor),
                    s(:str, "se")),
                  s(:pair,
                    s(:sym, :fill),
                    s(:ivar, :@mark_color)))))),
          s(:if,
            s(:send,
              s(:ivar, :@clock), :==,
              s(:int, 24)),
            s(:block,
              s(:send,
                s(:array,
                  s(:float, 15.0),
                  s(:float, 45.0),
                  s(:float, 75.0)), :each),
              s(:args,
                s(:arg, :angle)),
              s(:begin,
                s(:lvasgn, :rad,
                  s(:send,
                    s(:send,
                      s(:const,
                        s(:const, nil, :Math), :PI), :*,
                      s(:lvar, :angle)), :/,
                    s(:float, 180.0))),
                s(:lvasgn, :x_base,
                  s(:send,
                    s(:ivar, :@size), :*,
                    s(:send,
                      s(:const, nil, :Math), :sin,
                      s(:lvar, :rad)))),
                s(:lvasgn, :y_base,
                  s(:send,
                    s(:ivar, :@size), :*,
                    s(:send,
                      s(:const, nil, :Math), :cos,
                      s(:lvar, :rad)))),
                s(:lvasgn, :x1,
                  s(:send,
                    s(:float, 0.9), :*,
                    s(:lvar, :x_base))),
                s(:lvasgn, :y1,
                  s(:send,
                    s(:float, 0.9), :*,
                    s(:lvar, :y_base))),
                s(:lvasgn, :x2,
                  s(:send,
                    s(:float, 0.875), :*,
                    s(:lvar, :x_base))),
                s(:lvasgn, :y2,
                  s(:send,
                    s(:float, 0.875), :*,
                    s(:lvar, :y_base))),
                s(:send,
                  s(:const, nil, :TkcLine), :new,
                  s(:ivar, :@c),
                  s(:lvar, :x1),
                  s(:lvar, :y1),
                  s(:lvar, :x2),
                  s(:lvar, :y2),
                  s(:hash,
                    s(:pair,
                      s(:sym, :tags),
                      s(:array,
                        s(:ivar, :@tag),
                        s(:ivar, :@mark_tag))),
                    s(:pair,
                      s(:sym, :width),
                      s(:ivar, :@mark_width)),
                    s(:pair,
                      s(:sym, :fill),
                      s(:ivar, :@submark_color)))),
                s(:send,
                  s(:const, nil, :TkcLine), :new,
                  s(:ivar, :@c),
                  s(:lvar, :x1),
                  s(:send,
                    s(:lvar, :y1), :-@),
                  s(:lvar, :x2),
                  s(:send,
                    s(:lvar, :y2), :-@),
                  s(:hash,
                    s(:pair,
                      s(:sym, :tags),
                      s(:array,
                        s(:ivar, :@tag),
                        s(:ivar, :@mark_tag))),
                    s(:pair,
                      s(:sym, :width),
                      s(:ivar, :@mark_width)),
                    s(:pair,
                      s(:sym, :fill),
                      s(:ivar, :@submark_color)))),
                s(:send,
                  s(:const, nil, :TkcLine), :new,
                  s(:ivar, :@c),
                  s(:send,
                    s(:lvar, :x1), :-@),
                  s(:lvar, :y1),
                  s(:send,
                    s(:lvar, :x2), :-@),
                  s(:lvar, :y2),
                  s(:hash,
                    s(:pair,
                      s(:sym, :tags),
                      s(:array,
                        s(:ivar, :@tag),
                        s(:ivar, :@mark_tag))),
                    s(:pair,
                      s(:sym, :width),
                      s(:ivar, :@mark_width)),
                    s(:pair,
                      s(:sym, :fill),
                      s(:ivar, :@submark_color)))),
                s(:send,
                  s(:const, nil, :TkcLine), :new,
                  s(:ivar, :@c),
                  s(:send,
                    s(:lvar, :x1), :-@),
                  s(:send,
                    s(:lvar, :y1), :-@),
                  s(:send,
                    s(:lvar, :x2), :-@),
                  s(:send,
                    s(:lvar, :y2), :-@),
                  s(:hash,
                    s(:pair,
                      s(:sym, :tags),
                      s(:array,
                        s(:ivar, :@tag),
                        s(:ivar, :@mark_tag))),
                    s(:pair,
                      s(:sym, :width),
                      s(:ivar, :@mark_width)),
                    s(:pair,
                      s(:sym, :fill),
                      s(:ivar, :@submark_color)))))), nil))),
      s(:def, :_create_hands,
        s(:args),
        s(:begin,
          s(:lvasgn, :hour_hand_len,
            s(:send,
              s(:float, 0.55), :*,
              s(:ivar, :@size))),
          s(:lvasgn, :minute_hand_len,
            s(:send,
              s(:float, 0.85), :*,
              s(:ivar, :@size))),
          s(:lvasgn, :second_hand_len,
            s(:send,
              s(:float, 0.88), :*,
              s(:ivar, :@size))),
          s(:lvasgn, :hour_hand_width,
            s(:send,
              s(:float, 1.8), :*,
              s(:ivar, :@cdot_size))),
          s(:lvasgn, :minute_hand_width,
            s(:send,
              s(:float, 1.0), :*,
              s(:ivar, :@cdot_size))),
          s(:lvasgn, :second_hand_width,
            s(:int, 1)),
          s(:ivasgn, :@hour_hand_coords,
            s(:array,
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:float, -0.5), :*,
                  s(:ivar, :@cdot_size))),
              s(:array,
                s(:lvar, :hour_hand_width),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :hour_hand_width))),
              s(:array,
                s(:lvar, :hour_hand_width),
                s(:send,
                  s(:send,
                    s(:lvar, :hour_hand_len), :-@), :+,
                  s(:lvar, :hour_hand_width))),
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:lvar, :hour_hand_len), :-@)),
              s(:array,
                s(:send,
                  s(:lvar, :hour_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:lvar, :hour_hand_len), :-@), :+,
                  s(:lvar, :hour_hand_width))),
              s(:array,
                s(:send,
                  s(:lvar, :hour_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :hour_hand_width))))),
          s(:ivasgn, :@minute_hand_coords,
            s(:array,
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:float, -0.5), :*,
                  s(:ivar, :@cdot_size))),
              s(:array,
                s(:lvar, :minute_hand_width),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :minute_hand_width))),
              s(:array,
                s(:lvar, :minute_hand_width),
                s(:send,
                  s(:send,
                    s(:lvar, :minute_hand_len), :-@), :+,
                  s(:lvar, :minute_hand_width))),
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:lvar, :minute_hand_len), :-@)),
              s(:array,
                s(:send,
                  s(:lvar, :minute_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:lvar, :minute_hand_len), :-@), :+,
                  s(:lvar, :minute_hand_width))),
              s(:array,
                s(:send,
                  s(:lvar, :minute_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :minute_hand_width))))),
          s(:ivasgn, :@second_hand_coords,
            s(:array,
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:float, -0.5), :*,
                  s(:ivar, :@cdot_size))),
              s(:array,
                s(:lvar, :second_hand_width),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :second_hand_width))),
              s(:array,
                s(:lvar, :second_hand_width),
                s(:send,
                  s(:send,
                    s(:lvar, :second_hand_len), :-@), :+,
                  s(:lvar, :second_hand_width))),
              s(:array,
                s(:int, 0),
                s(:send,
                  s(:lvar, :second_hand_len), :-@)),
              s(:array,
                s(:send,
                  s(:lvar, :second_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:lvar, :second_hand_len), :-@), :+,
                  s(:lvar, :second_hand_width))),
              s(:array,
                s(:send,
                  s(:lvar, :second_hand_width), :-@),
                s(:send,
                  s(:send,
                    s(:float, -0.5), :*,
                    s(:ivar, :@cdot_size)), :-,
                  s(:lvar, :second_hand_width))))),
          s(:ivasgn, :@hour_hand,
            s(:send,
              s(:const, nil, :TkcPolygon), :new,
              s(:ivar, :@c),
              s(:ivar, :@hour_hand_coords),
              s(:hash,
                s(:pair,
                  s(:sym, :tags),
                  s(:array,
                    s(:ivar, :@tag),
                    s(:ivar, :@hand_tag))),
                s(:pair,
                  s(:sym, :outline),
                  s(:ivar, :@hour_hand_color)),
                s(:pair,
                  s(:sym, :fill),
                  s(:ivar, :@hour_hand_color))))),
          s(:ivasgn, :@minute_hand,
            s(:send,
              s(:const, nil, :TkcPolygon), :new,
              s(:ivar, :@c),
              s(:ivar, :@minute_hand_coords),
              s(:hash,
                s(:pair,
                  s(:sym, :tags),
                  s(:array,
                    s(:ivar, :@tag),
                    s(:ivar, :@hand_tag))),
                s(:pair,
                  s(:sym, :outline),
                  s(:ivar, :@minute_hand_color)),
                s(:pair,
                  s(:sym, :fill),
                  s(:ivar, :@minute_hand_color))))),
          s(:ivasgn, :@second_hand,
            s(:send,
              s(:const, nil, :TkcPolygon), :new,
              s(:ivar, :@c),
              s(:ivar, :@second_hand_coords),
              s(:hash,
                s(:pair,
                  s(:sym, :tags),
                  s(:array,
                    s(:ivar, :@tag),
                    s(:ivar, :@hand_tag))),
                s(:pair,
                  s(:sym, :outline),
                  s(:ivar, :@second_hand_color)),
                s(:pair,
                  s(:sym, :fill),
                  s(:ivar, :@second_hand_color))))),
          s(:ivasgn, :@center_dot,
            s(:send,
              s(:const, nil, :TkcOval), :new,
              s(:ivar, :@c),
              s(:array,
                s(:send,
                  s(:ivar, :@cdot_size), :-@),
                s(:send,
                  s(:ivar, :@cdot_size), :-@)),
              s(:array,
                s(:ivar, :@cdot_size),
                s(:ivar, :@cdot_size)),
              s(:hash,
                s(:pair,
                  s(:sym, :outline),
                  s(:ivar, :@cdot_color)),
                s(:pair,
                  s(:sym, :fill),
                  s(:ivar, :@cdot_color))))))),
      s(:send, nil, :private,
        s(:sym, :_create_hands)),
      s(:def, :_raise_hands,
        s(:args),
        s(:begin,
          s(:send,
            s(:ivar, :@hour_hand), :raise),
          s(:send,
            s(:ivar, :@minute_hand), :raise),
          s(:send,
            s(:ivar, :@second_hand), :raise),
          s(:send,
            s(:ivar, :@center_dot), :raise))),
      s(:send, nil, :private,
        s(:sym, :_raise_hands)),
      s(:def, :_raise_marks,
        s(:args),
        s(:send,
          s(:ivar, :@mark_tag), :raise)),
      s(:send, nil, :private,
        s(:sym, :_raise_marks)),
      s(:def, :set_hands,
        s(:args,
          s(:arg, :hh),
          s(:arg, :mm),
          s(:arg, :ss)),
        s(:begin,
          s(:lvasgn, :ss_angle,
            s(:send,
              s(:send,
                s(:const,
                  s(:const, nil, :Math), :PI), :*,
                s(:lvar, :ss)), :/,
              s(:float, 30.0))),
          s(:lvasgn, :mm_angle,
            s(:send,
              s(:send,
                s(:const,
                  s(:const, nil, :Math), :PI), :*,
                s(:begin,
                  s(:send,
                    s(:lvar, :mm), :+,
                    s(:send,
                      s(:lvar, :ss), :/,
                      s(:float, 60.0))))), :/,
              s(:float, 30.0))),
          s(:lvasgn, :hh_angle,
            s(:send,
              s(:send,
                s(:const,
                  s(:const, nil, :Math), :PI), :*,
                s(:begin,
                  s(:send,
                    s(:lvar, :hh), :+,
                    s(:send,
                      s(:begin,
                        s(:send,
                          s(:lvar, :mm), :+,
                          s(:send,
                            s(:lvar, :ss), :/,
                            s(:float, 60.0)))), :/,
                      s(:float, 60.0))))), :/,
              s(:begin,
                s(:send,
                  s(:ivar, :@clock), :div,
                  s(:int, 2))))),
          s(:send,
            s(:ivar, :@second_hand), :coords=,
            s(:block,
              s(:send,
                s(:ivar, :@second_hand_coords), :collect),
              s(:args,
                s(:arg, :x),
                s(:arg, :y)),
              s(:begin,
                s(:lvasgn, :r,
                  s(:send,
                    s(:const, nil, :Math), :hypot,
                    s(:lvar, :y),
                    s(:lvar, :x))),
                s(:lvasgn, :a,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :atan2,
                      s(:lvar, :y),
                      s(:lvar, :x)), :+,
                    s(:lvar, :ss_angle))),
                s(:array,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :cos,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)),
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :sin,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)))))),
          s(:send,
            s(:ivar, :@minute_hand), :coords=,
            s(:block,
              s(:send,
                s(:ivar, :@minute_hand_coords), :collect),
              s(:args,
                s(:arg, :x),
                s(:arg, :y)),
              s(:begin,
                s(:lvasgn, :r,
                  s(:send,
                    s(:const, nil, :Math), :hypot,
                    s(:lvar, :y),
                    s(:lvar, :x))),
                s(:lvasgn, :a,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :atan2,
                      s(:lvar, :y),
                      s(:lvar, :x)), :+,
                    s(:lvar, :mm_angle))),
                s(:array,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :cos,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)),
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :sin,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)))))),
          s(:send,
            s(:ivar, :@hour_hand), :coords=,
            s(:block,
              s(:send,
                s(:ivar, :@hour_hand_coords), :collect),
              s(:args,
                s(:arg, :x),
                s(:arg, :y)),
              s(:begin,
                s(:lvasgn, :r,
                  s(:send,
                    s(:const, nil, :Math), :hypot,
                    s(:lvar, :y),
                    s(:lvar, :x))),
                s(:lvasgn, :a,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :atan2,
                      s(:lvar, :y),
                      s(:lvar, :x)), :+,
                    s(:lvar, :hh_angle))),
                s(:array,
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :cos,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)),
                  s(:send,
                    s(:send,
                      s(:const, nil, :Math), :sin,
                      s(:lvar, :a)), :*,
                    s(:lvar, :r)))))),
          s(:send, nil, :_raise_hands),
          s(:send, nil, :_raise_marks))),
      s(:def, :coords_to_time,
        s(:args,
          s(:arg, :x),
          s(:arg, :y)),
        s(:begin,
          s(:if,
            s(:send,
              s(:lvar, :x), :==,
              s(:int, 0)),
            s(:return,
              s(:begin,
                s(:if,
                  s(:begin,
                    s(:send,
                      s(:lvar, :y), :<,
                      s(:int, 0))),
                  s(:array,
                    s(:int, 0),
                    s(:int, 0)),
                  s(:array,
                    s(:send,
                      s(:ivar, :@clock), :div,
                      s(:int, 2)),
                    s(:int, 0))))), nil),
          s(:if,
            s(:send,
              s(:ivar, :@clock), :==,
              s(:int, 24)),
            s(:begin,
              s(:lvasgn, :offset,
                s(:if,
                  s(:begin,
                    s(:and,
                      s(:send,
                        s(:lvar, :x), :<,
                        s(:int, 0)),
                      s(:send,
                        s(:lvar, :y), :<,
                        s(:int, 0)))),
                  s(:float, 1800.0),
                  s(:float, 360.0))),
              s(:lvasgn, :m_half,
                s(:float, 720.0))),
            s(:begin,
              s(:lvasgn, :offset,
                s(:if,
                  s(:begin,
                    s(:and,
                      s(:send,
                        s(:lvar, :x), :<,
                        s(:int, 0)),
                      s(:send,
                        s(:lvar, :y), :<,
                        s(:int, 0)))),
                  s(:float, 900.0),
                  s(:float, 180.0))),
              s(:lvasgn, :m_half,
                s(:float, 360.0)))),
          s(:send,
            s(:send,
              s(:begin,
                s(:send,
                  s(:lvar, :offset), :+,
                  s(:send,
                    s(:send,
                      s(:lvar, :m_half), :*,
                      s(:send,
                        s(:const, nil, :Math), :atan2,
                        s(:lvar, :y),
                        s(:lvar, :x))), :/,
                    s(:const,
                      s(:const, nil, :Math), :PI)))), :round), :divmod,
            s(:int, 60)))),
      s(:def, :create_pie,
        s(:args,
          s(:arg, :hh),
          s(:arg, :mm),
          s(:arg, :span),
          s(:optarg, :color,
            s(:str, "red"))),
        s(:begin,
          s(:if,
            s(:send,
              s(:ivar, :@clock), :==,
              s(:int, 24)),
            s(:begin,
              s(:lvasgn, :start,
                s(:send,
                  s(:float, 90.0), :-,
                  s(:send,
                    s(:begin,
                      s(:send,
                        s(:send,
                          s(:lvar, :hh), :*,
                          s(:int, 60)), :+,
                        s(:lvar, :mm))), :/,
                    s(:float, 4.0)))),
              s(:lvasgn, :extent,
                s(:send,
                  s(:send,
                    s(:lvar, :span), :-@), :/,
                  s(:float, 4.0)))),
            s(:begin,
              s(:lvasgn, :start,
                s(:send,
                  s(:float, 90.0), :-,
                  s(:send,
                    s(:begin,
                      s(:send,
                        s(:send,
                          s(:lvar, :hh), :*,
                          s(:int, 60)), :+,
                        s(:lvar, :mm))), :/,
                    s(:float, 2.0)))),
              s(:lvasgn, :extent,
                s(:send,
                  s(:send,
                    s(:lvar, :span), :-@), :/,
                  s(:float, 2.0))))),
          s(:lvasgn, :pie,
            s(:send,
              s(:const, nil, :TkcArc), :new,
              s(:ivar, :@c),
              s(:ivar, :@circle_coords),
              s(:hash,
                s(:pair,
                  s(:sym, :tags),
                  s(:array,
                    s(:ivar, :@tag))),
                s(:pair,
                  s(:sym, :outline),
                  s(:str, "black")),
                s(:pair,
                  s(:str, "fill"),
                  s(:lvar, :color)),
                s(:pair,
                  s(:sym, :start),
                  s(:lvar, :start)),
                s(:pair,
                  s(:sym, :extent),
                  s(:lvar, :extent))))),
          s(:send, nil, :_raise_hands),
          s(:send, nil, :_raise_marks),
          s(:lvar, :pie))))),
  s(:lvasgn, :sched,
    s(:send,
      s(:const, nil, :Clock), :new)),
  s(:send,
    s(:lvar, :sched), :create_pie,
    s(:int, 0),
    s(:int, 0),
    s(:int, 60)),
  s(:send,
    s(:lvar, :sched), :create_pie,
    s(:int, 6),
    s(:int, 30),
    s(:int, 280),
    s(:str, "green")),
  s(:send,
    s(:lvar, :sched), :create_pie,
    s(:int, 15),
    s(:int, 20),
    s(:int, 90),
    s(:str, "blue")),
  s(:send,
    s(:const, nil, :Tk), :mainloop))

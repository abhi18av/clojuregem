s(:begin,
  s(:send, nil, :require,
    s(:str, "tk")),
  s(:send,
    s(:send,
      s(:const, nil, :TkMessage), :new,
      s(:hash,
        s(:pair,
          s(:sym, :width),
          s(:int, 400)),
        s(:pair,
          s(:sym, :text),
          s(:str, "This sample shows how to use Tk::EncodedString class. \nThis reads 'iso2022-kr' text (from discription of \nKorean language environment of GNU Emacs 20.7.2) \nand inserts the text into the text widget.\n")))), :pack),
  s(:lvasgn, :t1,
    s(:send,
      s(:send,
        s(:const, nil, :TkText), :new,
        s(:hash,
          s(:pair,
            s(:sym, :height),
            s(:int, 5)))), :pack)),
  s(:lvasgn, :t2,
    s(:send,
      s(:send,
        s(:const, nil, :TkText), :new,
        s(:hash,
          s(:pair,
            s(:sym, :height),
            s(:int, 5)))), :pack)),
  s(:lvasgn, :t3,
    s(:send,
      s(:send,
        s(:const, nil, :TkText), :new,
        s(:hash,
          s(:pair,
            s(:sym, :height),
            s(:int, 5)))), :pack)),
  s(:lvasgn, :src_str,
    s(:send,
      s(:send,
        s(:const, nil, :IO), :readlines,
        s(:send,
          s(:const, nil, :File), :join,
          s(:send,
            s(:const, nil, :File), :dirname,
            s(:str, "(string)")),
          s(:str, "iso2022-kr.txt"))), :join)),
  s(:send,
    s(:lvar, :t1), :insert,
    s(:str, "end"),
    s(:str, "use neither Tk::EncodedString class nor Tk.encoding= method\n\n")),
  s(:send,
    s(:lvar, :t1), :insert,
    s(:str, "end"),
    s(:lvar, :src_str)),
  s(:lvasgn, :enc_str,
    s(:send,
      s(:const, nil, :Tk), :EncodedString,
      s(:lvar, :src_str),
      s(:str, "iso2022-kr"))),
  s(:send,
    s(:lvar, :t2), :insert,
    s(:str, "end"),
    s(:dstr,
      s(:str, "use Tk::EncodedString class (Tk.encoding => '"),
      s(:begin,
        s(:send,
          s(:const, nil, :Tk), :encoding)),
      s(:str, "')\n\n"))),
  s(:send,
    s(:lvar, :t2), :insert,
    s(:str, "end"),
    s(:lvar, :enc_str)),
  s(:send,
    s(:const, nil, :Tk), :encoding=,
    s(:str, "iso2022-kr")),
  s(:send,
    s(:lvar, :t3), :insert,
    s(:str, "end"),
    s(:dstr,
      s(:str, "use Tk.encoding = 'iso2022-kr' (Tk.force_default_encoding? == "),
      s(:begin,
        s(:send,
          s(:const, nil, :Tk), :force_default_encoding?)),
      s(:str, ")\n\n"))),
  s(:send,
    s(:lvar, :t3), :insert,
    s(:str, "end"),
    s(:lvar, :src_str)),
  s(:send,
    s(:const, nil, :Tk), :mainloop))

s(:module,
  s(:const, nil, :Psych),
  s(:class,
    s(:const, nil, :Handler), nil,
    s(:begin,
      s(:class,
        s(:const, nil, :DumperOptions), nil,
        s(:begin,
          s(:send, nil, :attr_accessor,
            s(:sym, :line_width),
            s(:sym, :indentation),
            s(:sym, :canonical)),
          s(:def, :initialize,
            s(:args),
            s(:begin,
              s(:ivasgn, :@line_width,
                s(:int, 0)),
              s(:ivasgn, :@indentation,
                s(:int, 2)),
              s(:ivasgn, :@canonical,
                s(:false)))))),
      s(:casgn, nil, :OPTIONS,
        s(:send,
          s(:const, nil, :DumperOptions), :new)),
      s(:casgn, nil, :EVENTS,
        s(:array,
          s(:sym, :alias),
          s(:sym, :empty),
          s(:sym, :end_document),
          s(:sym, :end_mapping),
          s(:sym, :end_sequence),
          s(:sym, :end_stream),
          s(:sym, :scalar),
          s(:sym, :start_document),
          s(:sym, :start_mapping),
          s(:sym, :start_sequence),
          s(:sym, :start_stream))),
      s(:def, :start_stream,
        s(:args,
          s(:arg, :encoding)), nil),
      s(:def, :start_document,
        s(:args,
          s(:arg, :version),
          s(:arg, :tag_directives),
          s(:arg, :implicit)), nil),
      s(:def, :end_document,
        s(:args,
          s(:arg, :implicit)), nil),
      s(:def, :alias,
        s(:args,
          s(:arg, :anchor)), nil),
      s(:def, :scalar,
        s(:args,
          s(:arg, :value),
          s(:arg, :anchor),
          s(:arg, :tag),
          s(:arg, :plain),
          s(:arg, :quoted),
          s(:arg, :style)), nil),
      s(:def, :start_sequence,
        s(:args,
          s(:arg, :anchor),
          s(:arg, :tag),
          s(:arg, :implicit),
          s(:arg, :style)), nil),
      s(:def, :end_sequence,
        s(:args), nil),
      s(:def, :start_mapping,
        s(:args,
          s(:arg, :anchor),
          s(:arg, :tag),
          s(:arg, :implicit),
          s(:arg, :style)), nil),
      s(:def, :end_mapping,
        s(:args), nil),
      s(:def, :empty,
        s(:args), nil),
      s(:def, :end_stream,
        s(:args), nil),
      s(:def, :streaming?,
        s(:args),
        s(:false)))))

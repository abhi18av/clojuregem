s(:begin,
  s(:send, nil, :require,
    s(:str, "date_core")),
  s(:class,
    s(:const, nil, :Date), nil,
    s(:class,
      s(:const, nil, :Infinity),
      s(:const, nil, :Numeric),
      s(:begin,
        s(:send, nil, :include,
          s(:const, nil, :Comparable)),
        s(:def, :initialize,
          s(:args,
            s(:optarg, :d,
              s(:int, 1))),
          s(:ivasgn, :@d,
            s(:send,
              s(:lvar, :d), :<=>,
              s(:int, 0)))),
        s(:def, :d,
          s(:args),
          s(:ivar, :@d)),
        s(:send, nil, :protected,
          s(:sym, :d)),
        s(:def, :zero?,
          s(:args),
          s(:false)),
        s(:def, :finite?,
          s(:args),
          s(:false)),
        s(:def, :infinite?,
          s(:args),
          s(:send,
            s(:send, nil, :d), :nonzero?)),
        s(:def, :nan?,
          s(:args),
          s(:send,
            s(:send, nil, :d), :zero?)),
        s(:def, :abs,
          s(:args),
          s(:send,
            s(:send,
              s(:self), :class), :new)),
        s(:def, :-@,
          s(:args),
          s(:send,
            s(:send,
              s(:self), :class), :new,
            s(:send,
              s(:send, nil, :d), :-@))),
        s(:def, :+@,
          s(:args),
          s(:send,
            s(:send,
              s(:self), :class), :new,
            s(:send,
              s(:send, nil, :d), :+@))),
        s(:def, :<=>,
          s(:args,
            s(:arg, :other)),
          s(:begin,
            s(:case,
              s(:lvar, :other),
              s(:when,
                s(:const, nil, :Infinity),
                s(:return,
                  s(:send,
                    s(:send, nil, :d), :<=>,
                    s(:send,
                      s(:lvar, :other), :d)))),
              s(:when,
                s(:const, nil, :Numeric),
                s(:return,
                  s(:send, nil, :d))),
              s(:kwbegin,
                s(:rescue,
                  s(:begin,
                    s(:masgn,
                      s(:mlhs,
                        s(:lvasgn, :l),
                        s(:lvasgn, :r)),
                      s(:send,
                        s(:lvar, :other), :coerce,
                        s(:self))),
                    s(:return,
                      s(:send,
                        s(:lvar, :l), :<=>,
                        s(:lvar, :r)))),
                  s(:resbody,
                    s(:array,
                      s(:const, nil, :NoMethodError)), nil, nil), nil))),
            s(:nil))),
        s(:def, :coerce,
          s(:args,
            s(:arg, :other)),
          s(:case,
            s(:lvar, :other),
            s(:when,
              s(:const, nil, :Numeric),
              s(:return,
                s(:send,
                  s(:send, nil, :d), :-@),
                s(:send, nil, :d))),
            s(:zsuper))),
        s(:def, :to_f,
          s(:args),
          s(:begin,
            s(:if,
              s(:send,
                s(:ivar, :@d), :==,
                s(:int, 0)),
              s(:return,
                s(:int, 0)), nil),
            s(:if,
              s(:send,
                s(:ivar, :@d), :>,
                s(:int, 0)),
              s(:const,
                s(:const, nil, :Float), :INFINITY),
              s(:send,
                s(:const,
                  s(:const, nil, :Float), :INFINITY), :-@))))))))

s(:begin,
  s(:lvasgn, :last_is_void,
    s(:false)),
  s(:block,
    s(:send,
      s(:const, nil, :ARGF), :each),
    s(:args,
      s(:arg, :line)),
    s(:if,
      s(:send,
        s(:send,
          s(:lvar, :line), :strip), :empty?),
      s(:lvasgn, :last_is_void,
        s(:true)),
      s(:if,
        s(:send,
          s(:regexp,
            s(:str, "\\A\\#"),
            s(:regopt)), :===,
          s(:lvar, :line)), nil,
        s(:begin,
          s(:send, nil, :print,
            s(:lvar, :line)),
          s(:lvasgn, :last_is_void,
            s(:false)))))))
